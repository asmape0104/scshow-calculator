import{n as k,u as ne,o as D,a as W,p as oe,b as X,_ as se}from"./kea0whi5.js";import{d as ee,k as $,r as v,H as Y,o as te,y as C,z as S,A as t,B as A,M as s,J as g,L as E,E as U,S as O,K as b,U as ae,V as K,W as F,R as P,X as G,x as ie,C as T,N as J,O as Z,Y as Q,Z as re,I as ue}from"./Kx7KLNzu.js";const de={class:"row"},ce={class:"col form-check-label"},pe={class:"col form-check-label"},fe={class:"col form-check-label"},ve=ee({__name:"MMemberRow",props:{card:{}},emits:["update:skillLevel"],setup(d,{emit:l}){const B=d,w=l,x=$(()=>k(B.card)),a=v("optional"),c=ne(x,{centerSkillLevel:10,skillLevel:10,selected:"optional"});return Y(a,m=>{c.value.selected=m}),Y(c,m=>{w("update:skillLevel",m)}),te(()=>{a.value=c.value.selected||"optional",w("update:skillLevel",c.value)}),(m,i)=>(S(),C("tr",null,[t("td",null,A(s(D)(m.card)),1),t("td",null,[g(t("input",{"onUpdate:modelValue":i[0]||(i[0]=p=>s(c).skillLevel=p),class:"form-control",type:"number",min:"1",max:"14"},null,512),[[E,s(c).skillLevel,void 0,{number:!0}]])]),t("td",null,[g(t("input",{"onUpdate:modelValue":i[1]||(i[1]=p=>s(c).centerSkillLevel=p),class:"form-control",type:"number",min:"1",max:"14"},null,512),[[E,s(c).centerSkillLevel,void 0,{number:!0}]])]),t("td",null,[t("div",de,[t("label",ce,[g(t("input",{"onUpdate:modelValue":i[2]||(i[2]=p=>b(a)?a.value=p:null),class:"form-check-input",type:"radio",value:"required"},null,512),[[O,s(a)]]),i[5]||(i[5]=U(" 必須 ",-1))]),t("label",pe,[g(t("input",{"onUpdate:modelValue":i[3]||(i[3]=p=>b(a)?a.value=p:null),class:"form-check-input",type:"radio",value:"optional"},null,512),[[O,s(a)]]),i[6]||(i[6]=U(" 任意 ",-1))]),t("label",fe,[g(t("input",{"onUpdate:modelValue":i[4]||(i[4]=p=>b(a)?a.value=p:null),class:"form-check-input",type:"radio",value:"excluded"},null,512),[[O,s(a)]]),i[7]||(i[7]=U(" 除外 ",-1))])])])]))}}),me=Object.assign(ve,{__name:"MMemberRow"});function ye(d){const l={size:16,x:0,y:0,rotate:0};return d.size!==l.size||d.x!==l.x||d.y!==l.y||d.rotate!==l.rotate||d.flipX||d.flipY}const be={key:0,style:{display:"none"}},ge=["innerHTML"],ke=["innerHTML"],xe={__name:"FaIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:d=>[!0,!1,"horizontal","vertical","both"].includes(d)},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:void 0},listItem:{type:Boolean,default:!1},pull:{type:String,default:void 0,validator:d=>["right","left"].includes(d)},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:void 0,validator:d=>[90,180,270].includes(Number.parseInt(d,10))},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:void 0,validator:d=>["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(d)},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:void 0},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:void 0},titleId:{type:String,default:void 0},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup(d){const l=d,B=$(()=>z(l.icon)),w=$(()=>z(l.mask)),x=$(()=>{if(l.transform){const n=typeof l.transform!="object"?ae.transform(l.transform):l.transform;if(n&&ye(n))return h(n)}}),a=$(()=>K(B.value,{classes:p.value,title:l.title,titleId:l.titleId})),c=$(()=>K(w.value)),m=$(()=>{const n={"aria-hidden":!0,"data-prefix":a.value?.prefix,"data-icon":a.value?.iconName,class:p.value,focusable:!1,role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${a.value?.icon[0]} ${a.value?.icon[1]}`};return l.symbol&&(n.id=[a.value?.prefix,"fa",a.value?.iconName].join("-")),l.title&&(n["aria-labelledby"]=M.value),n}),i=$(()=>{const n=I();if(c.value){const u=l.maskId||c.value.iconName;return`<defs>
      <clipPath id="clip-${u}">
        <path fill="currentColor" d="${c.value.icon[4]}"></path>
      </clipPath>
      <mask id="mask-${u}" x="0" y="0" width="100%" height="100%" maskUnits="userSpaceOnUse" maskContentUnits="userSpaceOnUse">
        <rect x="0" y="0" width="100%" height="100%" fill="white"></rect>
        ${n}
      </mask>
    </defs>
    <rect fill="currentColor" clip-path="url(#clip-${u})" mask="url(#mask-${u})" x="0" y="0" width="100%" height="100%"></rect>`}return n}),p=$(()=>{const n={"fa-spin":l.spin,"fa-pulse":l.pulse,"fa-fw":l.fixedWidth,"fa-border":l.border,"fa-li":l.listItem,"fa-inverse":l.inverse,"fa-flip":l.flip===!0,"fa-flip-horizontal":l.flip==="horizontal"||l.flip==="both","fa-flip-vertical":l.flip==="vertical"||l.flip==="both",[`fa-${l.size}`]:l.size!==void 0,[`fa-rotate-${l.rotation}`]:l.rotation!==void 0,[`fa-pull-${l.pull}`]:l.pull!==void 0,"fa-swap-opacity":l.swapOpacity,"fa-bounce":l.bounce,"fa-shake":l.shake,"fa-beat":l.beat,"fa-fade":l.fade,"fa-beat-fade":l.beatFade,"fa-spin-pulse":l.spinPulse,"fa-spin-reverse":l.spinReverse},u=Object.keys(n).map(r=>n[r]?r:null).filter(r=>r);return[F.replacementClass,...u]}),M=$(()=>F.replacementClass+"-title-"+(l.titleId||q()));function z(n){if(n){if(typeof n=="string"){const u={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab"};let r=u[F.styleDefault]||"fas",L=n.replace(/\bfa-/g,"");if(L.includes(" ")){const V=L.split(/\s+/);V[0]in u&&(r=u[V[0]]),L=V[1]}return{prefix:r,iconName:L}}if(Array.isArray(n)&&n.length===2)return{prefix:n[0],iconName:n[1]};if(typeof n=="object"&&"prefix"in n&&"iconName"in n)return n}}function h(n){const r=a.value?.icon[0]||512,L=n.x||0,V=n.y||0,j=n.size||0,_=n.rotate||0,y=n.flipX||0,e=n.flipY||0,R="translate(".concat(String(512/2)," 256)"),f="translate(".concat(String(L*32),", ").concat(String(V*32),") "),N="scale(".concat(String(j/16*(y?-1:1)),", ").concat(String(j/16*(e?-1:1)),") "),o="rotate(".concat(String(_)," 0 0)"),H="".concat(f," ").concat(N," ").concat(o),le="translate(".concat(String(r/2*-1)," -256)");return{outer:R,inner:H,path:le}}function q(){const n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";let u=12,r="";for(;u-- >0;)r+=n[Math.random()*62|0];return r}function I(){const n=c.value?"black":"currentColor",u=[];let r=a.value.icon[4];return Array.isArray(r)||(r=[r]),r.forEach(L=>{u.push(`<path fill="${n}"${x.value?' transform="'+x.value.path+'"':""} d="${L}"></path>`)}),x.value&&(u.unshift(`<g transform="${x.value.outer}">`,`<g transform="${x.value.inner}">`),u.push("</g>","</g>")),l.title&&u.unshift(`<title id="${M.value}">${l.title}</title>`),u.join("")}return l.icon&&!a.value&&console.info("Could not find main icon",B.value),l.mask&&!c.value&&console.info("Could not find mask icon",w.value),(n,u)=>a.value&&d.symbol?(S(),C("svg",be,[t("symbol",G(m.value,{innerHTML:i.value}),null,16,ge)])):a.value?(S(),C("svg",G({key:1},m.value,{innerHTML:i.value}),null,16,ke)):P("",!0)}},he={class:"container-md"},Le={class:"card my-2"},Se={class:"card-body"},we={class:"table"},$e={scope:"col"},Ce={class:"d-flex align-items-end"},Ue={class:""},Be={class:"input-group"},Me={class:"card my-2"},ze={class:"card-body"},Ve={class:"mb-2"},_e={class:"row"},Oe={class:"col-auto"},Ie={class:"col-auto"},Ne={class:"mb-2"},Re={class:"row"},Te={class:"col-auto"},je={class:"col-auto"},We={class:"mb-2"},Ae={class:"form-check"},Pe={class:"form-check"},qe={key:2},He={class:"card my-2"},Fe={class:"card-body"},De=["value"],Ye=ee({__name:"auto-formation",setup(d){const l=v(""),B=v(""),w=v(0),x=v(0),a=v("smile"),c=v(50),m=v("perfect"),i=v("current"),p=v(""),M=v(!0),z=v(!0),h=v(Object.fromEntries(W.map(y=>[k(y),{centerSkillLevel:10,skillLevel:10,selected:"optional"}]))),q=(y,e)=>{h.value[y]=e},I=v(null),n=v(null),u=v(Promise.resolve()),r=v("finished"),L=()=>{I.value=new Worker(new URL(""+new URL("calc-worker-BgeWt2w3.js",import.meta.url).href,import.meta.url),{type:"module"}),I.value.onmessage=y=>{switch(y.data.message){case"calcScore":u.value=u.value.then(async()=>{y.data.data.score>(n.value?.score||0)&&(n.value={score:y.data.data.score,members:y.data.data.members,log:y.data.data.log})});break;case"end":r.value="finished";break}}};te(()=>{L()});const V=()=>{n.value=null;const y=oe(l.value,w.value),e=W.filter(f=>h.value[k(f)]&&h.value[k(f)].selected==="required").map(f=>X(f,h.value[k(f)]?.skillLevel||10,h.value[k(f)]?.centerSkillLevel||10));if(e.length>6){_("必要メンバーが6人を超えています");return}const R=W.filter(f=>!h.value[k(f)]?.selected||h.value[k(f)].selected==="optional").map(f=>X(f,h.value[k(f)]?.skillLevel||10,h.value[k(f)]?.centerSkillLevel||10));r.value="running",I.value?.postMessage({requiredMembers:e,optionalMembers:R,notes:y,center:B.value,attribute:a.value,masteryLevel:c.value,playStyle:m.value,formationRule:i.value,includingCenterOnly:M.value,noLog:z.value})},j=()=>{I.value?.terminate(),L(),r.value="finished"},_=y=>{window.alert(y)};return ie({title:"スクショウ自動編成",meta:[{name:"twitter:title",content:"スクショウ自動編成"}]}),(y,e)=>{const R=se,f=me,N=xe;return S(),C("div",he,[e[34]||(e[34]=t("h1",null,"スクショウ自動編成",-1)),T(R,{"note-text":s(l),"onUpdate:noteText":e[0]||(e[0]=o=>b(l)?l.value=o:null),center:s(B),"onUpdate:center":e[1]||(e[1]=o=>b(B)?B.value=o:null),offset:s(w),"onUpdate:offset":e[2]||(e[2]=o=>b(w)?w.value=o:null),"combo-offset":s(x),"onUpdate:comboOffset":e[3]||(e[3]=o=>b(x)?x.value=o:null),attribute:s(a),"onUpdate:attribute":e[4]||(e[4]=o=>b(a)?a.value=o:null),"mastery-level":s(c),"onUpdate:masteryLevel":e[5]||(e[5]=o=>b(c)?c.value=o:null)},null,8,["note-text","center","offset","combo-offset","attribute","mastery-level"]),t("div",Le,[e[22]||(e[22]=t("div",{class:"card-header"}," メンバー ",-1)),t("div",Se,[t("table",we,[t("thead",null,[t("tr",null,[t("th",$e,[t("div",Ce,[e[18]||(e[18]=t("div",{style:{"margin-right":"8px"}}," カード ",-1)),t("div",Ue,[t("div",Be,[e[17]||(e[17]=t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"検索")],-1)),g(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>b(p)?p.value=o:null),type:"text",class:"form-control"},null,512),[[E,s(p)]])])])])]),e[19]||(e[19]=t("th",{scope:"col"},"スキルLv.",-1)),e[20]||(e[20]=t("th",{scope:"col"},"センタースキルLv.",-1)),e[21]||(e[21]=t("th",{scope:"col"},"選択",-1))])]),t("tbody",null,[(S(!0),C(J,null,Z(s(W),o=>g((S(),ue(f,{key:o.key,card:o,"onUpdate:skillLevel":H=>q(s(k)(o),H)},null,8,["card","onUpdate:skillLevel"])),[[re,s(D)(o).toLowerCase().includes(s(p).toLowerCase())]])),128))])])])]),t("div",Me,[e[33]||(e[33]=t("div",{class:"card-header"}," 計算 ",-1)),t("div",ze,[t("div",Ve,[e[25]||(e[25]=U(" プレイスタイル： ",-1)),t("div",_e,[t("div",Oe,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>b(m)?m.value=o:null),class:"form-check-input",type:"radio",value:"perfect"},null,512),[[O,s(m)]]),e[23]||(e[23]=U(" 渾身 ",-1))]),t("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:e[8]||(e[8]=o=>_("メンタルを100%以上に保つプレイ"))},[T(N,{icon:"circle-info"})])]),t("div",Ie,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>b(m)?m.value=o:null),class:"form-check-input",type:"radio",value:"desperate"},null,512),[[O,s(m)]]),e[24]||(e[24]=U(" 背水 ",-1))]),t("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:e[10]||(e[10]=o=>_("メンタルを10%以下に保つプレイ"))},[T(N,{icon:"circle-info"})])])])]),t("div",Ne,[e[28]||(e[28]=U(" 編成ルール ",-1)),t("div",Re,[t("div",Te,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>b(i)?i.value=o:null),class:"form-check-input",type:"radio",value:"current"},null,512),[[O,s(i)]]),e[26]||(e[26]=U(" 現状のルール ",-1))]),t("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:e[12]||(e[12]=o=>_(`・メンバー1人あたり1種類まで
・カード制限なし`))},[T(N,{icon:"circle-info"})])]),t("div",je,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[13]||(e[13]=o=>b(i)?i.value=o:null),class:"form-check-input",type:"radio",value:"new_grand_prix"},null,512),[[O,s(i)]]),e[27]||(e[27]=U(" 新ライグラルール ",-1))]),t("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:e[14]||(e[14]=o=>_(`・メンバー1人あたり2種類まで
・DRは1枚まで`))},[T(N,{icon:"circle-info"})])])])]),t("div",We,[e[31]||(e[31]=U(" オプション： ",-1)),t("div",Ae,[g(t("input",{id:"includingCenterOnly","onUpdate:modelValue":e[15]||(e[15]=o=>b(M)?M.value=o:null),class:"form-check-input",type:"checkbox"},null,512),[[Q,s(M)]]),e[29]||(e[29]=t("label",{class:"form-check-label",for:"includingCenterOnly"}," センターのメンバーを含まない編成は計算しない ",-1))]),t("div",Pe,[g(t("input",{id:"noLog","onUpdate:modelValue":e[16]||(e[16]=o=>b(z)?z.value=o:null),class:"form-check-input",type:"checkbox"},null,512),[[Q,s(z)]]),e[30]||(e[30]=t("label",{class:"form-check-label",for:"noLog"}," ログを出力しない（効果大） ",-1))])]),s(r)!=="running"?(S(),C("button",{key:0,type:"button",class:"btn btn-primary",onClick:V}," 計算 ")):P("",!0),s(r)==="running"?(S(),C("button",{key:1,type:"button",class:"btn btn-primary",onClick:j}," 中止 ")):P("",!0),s(n)?(S(),C("div",qe,[t("p",null,A(s(r)==="running"?"計算中...":"計算完了"),1),t("div",He,[t("div",Fe,[t("p",null,"最高得点: "+A(s(n).score),1),e[32]||(e[32]=t("p",null,"メンバー:",-1)),t("ul",null,[(S(!0),C(J,null,Z(s(n).members,o=>(S(),C("li",{key:s(k)(o)},A(s(D)(o)),1))),128))]),t("textarea",{class:"form-control",value:s(n).log,readonly:"",rows:"5"},null,8,De)])])])):P("",!0)])])])}}});export{Ye as default};
