import{o as L,u as ue,q as W,d as de,b as Q,g as ce,s as oe,e as pe,_ as fe,a as q,i as ve,p as me,j as ye}from"./BxZzD8_0.js";import{g as _,y as be,z as se,A as Z,c as x,q as N,o as v,a as e,B as ee,f as ne,r as b,h as ae,C as ie,d as U,t as M,l as n,b as T,j as C,v as te,s as O,k as g,i as le,w as ke,F as R,m as A,u as ge,D as J,E as xe,x as he}from"./BIWDJk_7.js";function $e(p){const l={size:16,x:0,y:0,rotate:0};return p.size!==l.size||p.x!==l.x||p.y!==l.y||p.rotate!==l.rotate||p.flipX||p.flipY}const Ce={key:0,style:{display:"none"}},we=["innerHTML"],Le=["innerHTML"],re={__name:"FaIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:p=>[!0,!1,"horizontal","vertical","both"].includes(p)},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:void 0},listItem:{type:Boolean,default:!1},pull:{type:String,default:void 0,validator:p=>["right","left"].includes(p)},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:void 0,validator:p=>[90,180,270].includes(Number.parseInt(p,10))},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:void 0,validator:p=>["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(p)},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:void 0},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:void 0},titleId:{type:String,default:void 0},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup(p){const l=p,w=_(()=>D(l.icon)),h=_(()=>D(l.mask)),u=_(()=>{if(l.transform){const s=typeof l.transform!="object"?be.transform(l.transform):l.transform;if(s&&$e(s))return I(s)}}),a=_(()=>se(w.value,{classes:B.value,title:l.title,titleId:l.titleId})),d=_(()=>se(h.value)),c=_(()=>{const s={"aria-hidden":!0,"data-prefix":a.value?.prefix,"data-icon":a.value?.iconName,class:B.value,focusable:!1,role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${a.value?.icon[0]} ${a.value?.icon[1]}`};return l.symbol&&(s.id=[a.value?.prefix,"fa",a.value?.iconName].join("-")),l.title&&(s["aria-labelledby"]=m.value),s}),i=_(()=>{const s=H();if(d.value){const r=l.maskId||d.value.iconName;return`<defs>
      <clipPath id="clip-${r}">
        <path fill="currentColor" d="${d.value.icon[4]}"></path>
      </clipPath>
      <mask id="mask-${r}" x="0" y="0" width="100%" height="100%" maskUnits="userSpaceOnUse" maskContentUnits="userSpaceOnUse">
        <rect x="0" y="0" width="100%" height="100%" fill="white"></rect>
        ${s}
      </mask>
    </defs>
    <rect fill="currentColor" clip-path="url(#clip-${r})" mask="url(#mask-${r})" x="0" y="0" width="100%" height="100%"></rect>`}return s}),B=_(()=>{const s={"fa-spin":l.spin,"fa-pulse":l.pulse,"fa-fw":l.fixedWidth,"fa-border":l.border,"fa-li":l.listItem,"fa-inverse":l.inverse,"fa-flip":l.flip===!0,"fa-flip-horizontal":l.flip==="horizontal"||l.flip==="both","fa-flip-vertical":l.flip==="vertical"||l.flip==="both",[`fa-${l.size}`]:l.size!==void 0,[`fa-rotate-${l.rotation}`]:l.rotation!==void 0,[`fa-pull-${l.pull}`]:l.pull!==void 0,"fa-swap-opacity":l.swapOpacity,"fa-bounce":l.bounce,"fa-shake":l.shake,"fa-beat":l.beat,"fa-fade":l.fade,"fa-beat-fade":l.beatFade,"fa-spin-pulse":l.spinPulse,"fa-spin-reverse":l.spinReverse},r=Object.keys(s).map(f=>s[f]?f:null).filter(f=>f);return[Z.replacementClass,...r]}),m=_(()=>Z.replacementClass+"-title-"+(l.titleId||S()));function D(s){if(s){if(typeof s=="string"){const r={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab"};let f=r[Z.styleDefault]||"fas",$=s.replace(/\bfa-/g,"");if($.includes(" ")){const z=$.split(/\s+/);z[0]in r&&(f=r[z[0]]),$=z[1]}return{prefix:f,iconName:$}}if(Array.isArray(s)&&s.length===2)return{prefix:s[0],iconName:s[1]};if(typeof s=="object"&&"prefix"in s&&"iconName"in s)return s}}function I(s){const f=a.value?.icon[0]||512,$=s.x||0,z=s.y||0,F=s.size||0,E=s.rotate||0,V=s.flipX||0,Y=s.flipY||0,X="translate(".concat(String(512/2)," 256)"),G="translate(".concat(String($*32),", ").concat(String(z*32),") "),y="scale(".concat(String(F/16*(V?-1:1)),", ").concat(String(F/16*(Y?-1:1)),") "),t="rotate(".concat(String(E)," 0 0)"),j="".concat(G," ").concat(y," ").concat(t),k="translate(".concat(String(f/2*-1)," -256)");return{outer:X,inner:j,path:k}}function S(){const s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";let r=12,f="";for(;r-- >0;)f+=s[Math.random()*62|0];return f}function H(){const s=d.value?"black":"currentColor",r=[];let f=a.value.icon[4];return Array.isArray(f)||(f=[f]),f.forEach($=>{r.push(`<path fill="${s}"${u.value?' transform="'+u.value.path+'"':""} d="${$}"></path>`)}),u.value&&(r.unshift(`<g transform="${u.value.outer}">`,`<g transform="${u.value.inner}">`),r.push("</g>","</g>")),l.title&&r.unshift(`<title id="${m.value}">${l.title}</title>`),r.join("")}return l.icon&&!a.value&&console.info("Could not find main icon",w.value),l.mask&&!d.value&&console.info("Could not find mask icon",h.value),(s,r)=>a.value&&p.symbol?(v(),x("svg",Ce,[e("symbol",ee(c.value,{innerHTML:i.value}),null,16,we)])):a.value?(v(),x("svg",ee({key:1},c.value,{innerHTML:i.value}),null,16,Le)):N("",!0)}},Se={class:"row"},_e={class:"col form-check-label"},Ue={class:"col form-check-label"},Me={class:"col form-check-label"},Be=ne({__name:"MMemberRow",props:{card:{},openCardDetailsModal:{type:Function}},emits:["update:skillLevel"],setup(p,{emit:l}){const w=p,h=l,u=_(()=>L(w.card)),a=b("optional"),d=ue(u,{centerSkillLevel:10,skillLevel:10,selected:"optional"});return ae(a,c=>{d.value.selected=c}),ae(d,c=>{h("update:skillLevel",c)}),ie(()=>{a.value=d.value.selected||"optional",h("update:skillLevel",d.value)}),(c,i)=>{const B=re;return v(),x("tr",null,[e("td",null,[U(M(n(W)(c.card))+" ",1),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:i[0]||(i[0]=m=>c.openCardDetailsModal(c.card))},[T(B,{icon:"circle-info"})])]),e("td",null,[C(e("input",{"onUpdate:modelValue":i[1]||(i[1]=m=>n(d).skillLevel=m),class:"form-control",type:"number",min:"1",max:"14"},null,512),[[te,n(d).skillLevel,void 0,{number:!0}]])]),e("td",null,[C(e("input",{"onUpdate:modelValue":i[2]||(i[2]=m=>n(d).centerSkillLevel=m),class:"form-control",type:"number",min:"1",max:"14"},null,512),[[te,n(d).centerSkillLevel,void 0,{number:!0}]])]),e("td",null,[e("div",Se,[e("label",_e,[C(e("input",{"onUpdate:modelValue":i[3]||(i[3]=m=>g(a)?a.value=m:null),class:"form-check-input",type:"radio",value:"required"},null,512),[[O,n(a)]]),i[6]||(i[6]=U(" 必須 ",-1))]),e("label",Ue,[C(e("input",{"onUpdate:modelValue":i[4]||(i[4]=m=>g(a)?a.value=m:null),class:"form-check-input",type:"radio",value:"optional"},null,512),[[O,n(a)]]),i[7]||(i[7]=U(" 任意 ",-1))]),e("label",Me,[C(e("input",{"onUpdate:modelValue":i[5]||(i[5]=m=>g(a)?a.value=m:null),class:"form-check-input",type:"radio",value:"excluded"},null,512),[[O,n(a)]]),i[8]||(i[8]=U(" 除外 ",-1))])])])])}}}),ze=Object.assign(Be,{__name:"MMemberRow"}),De={class:"mb-3"},Ve={class:"my-2"},Oe={class:"card my-2"},Ie={class:"card-body"},Te={class:"table"},je={key:0,rowspan:"14"},Ne={class:"card my-2"},Re={class:"card-body"},Ae={class:"table"},Fe={class:"card my-2"},Pe={class:"card-body"},qe=ne({__name:"MdCardDetails",props:{onClose:{},card:{}},setup(p){const l=p,w=_(()=>Array.from({length:14},(h,u)=>de(Q(l.card,u+1,u+1))));return(h,u)=>{const a=fe;return v(),le(a,{"on-close":h.onClose},{default:ke(()=>[e("h3",De,M(n(W)(h.card)),1),e("div",Ve,[e("div",Oe,[u[2]||(u[2]=e("div",{class:"card-header"}," センタースキル ",-1)),e("div",Ie,[e("table",Te,[u[1]||(u[1]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"発動条件"),e("th",null,"効果")])],-1)),e("tbody",null,[(v(!0),x(R,null,A(n(w),(d,c)=>(v(),x("tr",{key:`center-skill-${c}`},[e("td",null,M(c+1),1),c===0?(v(),x("td",je,M(n(ce)(d.centerSkillCondition)),1)):N("",!0),e("td",null,M(n(oe)(d.centerSkills)),1)]))),128))])])])]),e("div",Ne,[u[4]||(u[4]=e("div",{class:"card-header"}," スキル ",-1)),e("div",Re,[e("table",Ae,[u[3]||(u[3]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"効果")])],-1)),e("tbody",null,[(v(!0),x(R,null,A(n(w),(d,c)=>(v(),x("tr",{key:`skill-${c}`},[e("td",null,M(c+1),1),e("td",null,M(n(oe)(d.skills)),1)]))),128))])])])]),e("div",Fe,[u[5]||(u[5]=e("div",{class:"card-header"}," センター特性 ",-1)),e("div",Pe,M(n(pe)(n(w)[0].centerAbilities)),1)]),e("button",{class:"btn btn-primary",onClick:u[0]||(u[0]=d=>h.onClose(null))}," 閉じる ")])]),_:1},8,["on-close"])}}}),We=Object.assign(qe,{__name:"MdCardDetails"}),He={class:"container-md"},Ee={class:"card my-2"},Ye={class:"card-body"},Xe={class:"table"},Ge={scope:"col"},Ke={class:"d-flex align-items-end"},Ze={class:""},Je={class:"input-group"},Qe={class:"card my-2"},et={class:"card-body"},tt={class:"mb-2"},lt={class:"row"},nt={class:"col-auto"},ot={class:"col-auto"},st={class:"mb-2"},at={class:"row"},it={class:"col-auto"},rt={class:"col-auto"},ut={class:"mb-2"},dt={class:"form-check"},ct={class:"form-check"},pt={class:"form-check"},ft={key:2},vt={class:"card my-2"},mt={class:"card-body"},yt=["value"],gt=ne({__name:"auto-formation",setup(p){const l=b(""),w=b(""),h=b(0),u=b(0),a=b("smile"),d=b(50),c=b("perfect"),i=b("current"),B=b(""),m=b(!0),D=b(!0),I=b(!0),S=b(Object.fromEntries(q.map(y=>[L(y),{centerSkillLevel:10,skillLevel:10,selected:"optional"}]))),H=(y,t)=>{S.value[y]=t},s=b(null),r=b(null),f=b(Promise.resolve()),$=b("finished"),z=()=>{s.value=new Worker(new URL(""+new URL("calc-worker-BIYP3nZC.js",import.meta.url).href,import.meta.url),{type:"module"}),s.value.onmessage=y=>{switch(y.data.message){case"calcScore":f.value=f.value.then(async()=>{y.data.data.score>(r.value?.score||0)&&(r.value={score:y.data.data.score,members:y.data.data.members,log:y.data.data.log})});break;case"end":$.value="finished";break}}};ie(()=>{z()});const F=()=>{r.value=null;const y=me(l.value,h.value),t=q.filter(k=>S.value[L(k)]&&S.value[L(k)].selected==="required").map(k=>Q(k,S.value[L(k)]?.skillLevel||10,S.value[L(k)]?.centerSkillLevel||10));if(t.length>6){V("必要メンバーが6人を超えています");return}const j=q.filter(k=>!S.value[L(k)]?.selected||S.value[L(k)].selected==="optional").map(k=>Q(k,S.value[L(k)]?.skillLevel||10,S.value[L(k)]?.centerSkillLevel||10));$.value="running",s.value?.postMessage({requiredMembers:t,optionalMembers:j,notes:y,center:w.value,attribute:a.value,masteryLevel:d.value,playStyle:c.value,formationRule:i.value,includingCenterOnly:m.value,noLog:D.value,noDamagedFormation:I.value})},E=()=>{s.value?.terminate(),z(),$.value="finished"},V=y=>{window.alert(y)},{modals:Y,openModal:X}=ve(),G=async y=>{await X(We,{card:y})};return ge({title:"スクショウ自動編成",meta:[{name:"twitter:title",content:"スクショウ自動編成"}]}),(y,t)=>{const j=ye,k=ze,P=re;return v(),x("div",He,[t[36]||(t[36]=e("h1",null,"スクショウ自動編成",-1)),T(j,{"note-text":n(l),"onUpdate:noteText":t[0]||(t[0]=o=>g(l)?l.value=o:null),center:n(w),"onUpdate:center":t[1]||(t[1]=o=>g(w)?w.value=o:null),offset:n(h),"onUpdate:offset":t[2]||(t[2]=o=>g(h)?h.value=o:null),"combo-offset":n(u),"onUpdate:comboOffset":t[3]||(t[3]=o=>g(u)?u.value=o:null),attribute:n(a),"onUpdate:attribute":t[4]||(t[4]=o=>g(a)?a.value=o:null),"mastery-level":n(d),"onUpdate:masteryLevel":t[5]||(t[5]=o=>g(d)?d.value=o:null)},null,8,["note-text","center","offset","combo-offset","attribute","mastery-level"]),e("div",Ee,[t[23]||(t[23]=e("div",{class:"card-header"}," メンバー ",-1)),e("div",Ye,[e("table",Xe,[e("thead",null,[e("tr",null,[e("th",Ge,[e("div",Ke,[t[19]||(t[19]=e("div",{style:{"margin-right":"8px"}}," カード ",-1)),e("div",Ze,[e("div",Je,[t[18]||(t[18]=e("div",{class:"input-group-prepend"},[e("span",{class:"input-group-text"},"検索")],-1)),C(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>g(B)?B.value=o:null),type:"text",class:"form-control"},null,512),[[te,n(B)]])])])])]),t[20]||(t[20]=e("th",{scope:"col"},"スキルLv.",-1)),t[21]||(t[21]=e("th",{scope:"col"},"センタースキルLv.",-1)),t[22]||(t[22]=e("th",{scope:"col"},"選択",-1))])]),e("tbody",null,[(v(!0),x(R,null,A(n(q),o=>C((v(),le(k,{key:o.key,card:o,"open-card-details-modal":G,"onUpdate:skillLevel":K=>H(n(L)(o),K)},null,8,["card","onUpdate:skillLevel"])),[[xe,n(W)(o).toLowerCase().includes(n(B).toLowerCase())]])),128))])])])]),e("div",Qe,[t[35]||(t[35]=e("div",{class:"card-header"}," 計算 ",-1)),e("div",et,[e("div",tt,[t[26]||(t[26]=U(" プレイスタイル： ",-1)),e("div",lt,[e("div",nt,[e("label",null,[C(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>g(c)?c.value=o:null),class:"form-check-input",type:"radio",value:"perfect"},null,512),[[O,n(c)]]),t[24]||(t[24]=U(" 渾身 ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:t[8]||(t[8]=o=>V("メンタルを100%以上に保つプレイ"))},[T(P,{icon:"circle-info"})])]),e("div",ot,[e("label",null,[C(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>g(c)?c.value=o:null),class:"form-check-input",type:"radio",value:"desperate"},null,512),[[O,n(c)]]),t[25]||(t[25]=U(" 背水 ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:t[10]||(t[10]=o=>V("メンタルを10%以下に保つプレイ"))},[T(P,{icon:"circle-info"})])])])]),e("div",st,[t[29]||(t[29]=U(" 編成ルール ",-1)),e("div",at,[e("div",it,[e("label",null,[C(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>g(i)?i.value=o:null),class:"form-check-input",type:"radio",value:"current"},null,512),[[O,n(i)]]),t[27]||(t[27]=U(" 現状のルール ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:t[12]||(t[12]=o=>V(`・メンバー1人あたり1種類まで
・カード制限なし`))},[T(P,{icon:"circle-info"})])]),e("div",rt,[e("label",null,[C(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>g(i)?i.value=o:null),class:"form-check-input",type:"radio",value:"new_grand_prix"},null,512),[[O,n(i)]]),t[28]||(t[28]=U(" 新ライグラルール ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:t[14]||(t[14]=o=>V(`・メンバー1人あたり2種類まで
・DRは1枚まで`))},[T(P,{icon:"circle-info"})])])])]),e("div",ut,[t[33]||(t[33]=U(" オプション： ",-1)),e("div",dt,[C(e("input",{id:"includingCenterOnly","onUpdate:modelValue":t[15]||(t[15]=o=>g(m)?m.value=o:null),class:"form-check-input",type:"checkbox"},null,512),[[J,n(m)]]),t[30]||(t[30]=e("label",{class:"form-check-label",for:"includingCenterOnly"}," センターのメンバーを含まない編成は計算しない ",-1))]),e("div",ct,[C(e("input",{id:"noLog","onUpdate:modelValue":t[16]||(t[16]=o=>g(D)?D.value=o:null),class:"form-check-input",type:"checkbox"},null,512),[[J,n(D)]]),t[31]||(t[31]=e("label",{class:"form-check-label",for:"noLog"}," ログを出力しない（効果大） ",-1))]),e("div",pt,[C(e("input",{id:"noDamagedFormation","onUpdate:modelValue":t[17]||(t[17]=o=>g(I)?I.value=o:null),class:"form-check-input",type:"checkbox"},null,512),[[J,n(I)]]),t[32]||(t[32]=e("label",{class:"form-check-label",for:"noDamagedFormation"}," 途中でメンタルが100%未満になった場合計算を打ち切る（背水選択時は自動で無効） ",-1))])]),n($)!=="running"?(v(),x("button",{key:0,type:"button",class:"btn btn-primary",onClick:F}," 計算 ")):N("",!0),n($)==="running"?(v(),x("button",{key:1,type:"button",class:"btn btn-primary",onClick:E}," 中止 ")):N("",!0),n(r)?(v(),x("div",ft,[e("p",null,M(n($)==="running"?"計算中...":"計算完了"),1),e("div",vt,[e("div",mt,[e("p",null,"最高得点: "+M(n(r).score),1),t[34]||(t[34]=e("p",null,"メンバー:",-1)),e("ul",null,[(v(!0),x(R,null,A(n(r).members,o=>(v(),x("li",{key:n(L)(o)},M(n(W)(o)),1))),128))]),e("textarea",{class:"form-control",value:n(r).log,readonly:"",rows:"5"},null,8,yt)])])])):N("",!0)])]),(v(!0),x(R,null,A(n(Y),(o,K)=>(v(),le(he(o.component),ee({key:`modal-${K}`,"on-close":o.onClose},{ref_for:!0},o.args),null,16,["on-close"]))),128))])}}});export{gt as default};
