import{m as He,r as Xe,t as w,u as Se,v as z,o as E,w as we,d as Qe,b as H,x as Ye,g as Ze,s as $e,e as el,_ as ll,a as tl,j as nl,p as ol,y as sl,z as al,k as rl}from"./l6R8hpaS.js";import{f as j,z as il,A as de,B as ul,C as dl,c as f,D as vl,E as cl,G as pl,H as ml,l as y,I as Me,o as m,a as e,F,n as O,j as g,t as b,m as t,v as q,q as fl,J as bl,p as A,_ as Ve,K as Ue,g as P,r as c,L as kl,h as G,d as $,b as V,k as he,M as B,x as D,s as X,N,O as ke,i as ye,w as ge,u as yl,P as gl,y as Cl}from"./Bbxbsn76.js";const _l=Symbol.for("nuxt:client-only"),Ll=j({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(x,{slots:i,attrs:v}){const C=il(!1);de(()=>{C.value=!0});const _=vl();return _&&(_._nuxtClientOnly=!0),cl(_l,!0),()=>{if(C.value){const d=i.default?.();return d&&d.length===1?[ul(d[0],v)]:d}const u=i.fallback||i.placeholder;if(u)return dl(u);const n=x.fallback||x.placeholder||"",r=x.fallbackTag||x.placeholderTag||"span";return f(r,v,n)}}}),xl="$s";function wl(...x){const i=typeof x[x.length-1]=="string"?x.pop():void 0;typeof x[0]!="string"&&x.unshift(i);const[v,C]=x;if(!v||typeof v!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+v);if(C!==void 0&&typeof C!="function")throw new Error("[nuxt] [useState] init must be a function: "+C);const _=xl+v,u=pl(),n=ml(u.payload.state,_);if(n.value===void 0&&C){const r=C();if(y(r))return u.payload.state[_]=r,r;n.value=r}return n}const $l={class:"card my-2"},Sl={class:"card-body"},Ml={class:"row"},Vl={class:"input-group"},Ul={class:"input-group-prepend"},hl={class:"input-group-text",style:{width:"74px","justify-content":"center"}},Fl=["onUpdate:modelValue"],Pl=j({__name:"OSeasonFanLv",props:{seasonFanLvs:{required:!0},seasonFanLvsModifiers:{}},emits:["update:seasonFanLvs"],setup(x){const i=Me(x,"seasonFanLvs"),v=["kaho","sayaka","rurino","ginko","kosuzu","hime","ceras","izumi"];return(C,_)=>(m(),f("div",$l,[_[0]||(_[0]=e("div",{class:"card-header"}," Season Fan Lv. ",-1)),e("div",Sl,[e("div",Ml,[(m(),f(F,null,O(v,u=>e("div",{key:u,class:"col-12 col-sm-6 col-md-4 col-lg-3 mb-2"},[e("div",Vl,[e("div",Ul,[e("div",hl,[e("span",null,b(t(He)[u]),1)])]),g(e("input",{"onUpdate:modelValue":n=>i.value[u]=n,type:"number",class:"form-control",min:"1",max:"10"},null,8,Fl),[[q,i.value[u],void 0,{number:!0}]])])])),64))])])]))}}),Tl=Object.assign(Pl,{__name:"OSeasonFanLv"}),Ol=j({__name:"AMarkSelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(x){const i=Me(x,"modelValue");return(v,C)=>g((m(),f("select",{"onUpdate:modelValue":C[0]||(C[0]=_=>i.value=_),class:A(["form-select marker-select",[i.value]])},C[1]||(C[1]=[bl('<option value="none" data-v-4055ea95>-</option><option value="heart" data-v-4055ea95>♥</option><option value="diamond" data-v-4055ea95>♦</option><option value="spade" data-v-4055ea95>♠</option><option value="club" data-v-4055ea95>♣</option>',5)]),2)),[[fl,i.value]])}}),Ce=Object.assign(Ve(Ol,[["__scopeId","data-v-4055ea95"]]),{__name:"AMarkSelect"}),_e=Xe(()=>({skillCaches:Ue(new Map)})),Al=["rowspan"],Dl=["max"],Rl=["rowspan"],Nl={class:"row"},zl={class:"col form-check-label"},El={class:"col form-check-label"},ql={class:"col form-check-label"},jl=["rowspan"],Il=["rowspan"],Gl={class:"friend-row"},Bl={class:"friend-row"},Kl=j({__name:"MMemberRow",props:{card:{},openCardDetailsModal:{type:Function}},emits:["update:skillLevel"],setup(x,{emit:i}){const v=x,C=i,_=P(()=>w(v.card)),u=c("optional"),n=Se(_,{level:z[v.card.rarity]||1,centerSkillLevel:10,skillLevel:10,friendLevel:z[v.card.rarity]||1,friendCenterSkillLevel:14,lbCount:1,selected:"optional",friendPosession:!1,mark:"none"}),{skillCaches:r}=_e();return de(()=>{r.set(_.value,n)}),kl(()=>{r.delete(_.value)}),n.value.level||(n.value.level=z[v.card.rarity]||1),n.value.lbCount||(n.value.lbCount=1),n.value.friendLevel||(n.value.friendLevel=z[v.card.rarity]||1),n.value.friendCenterSkillLevel||(n.value.friendCenterSkillLevel=14),n.value.mark||(n.value.mark="none"),G(u,d=>{n.value.selected!==d&&(n.value.selected=d)}),G(n,d=>{u.value!==d.selected&&(u.value=d.selected)}),G(P(()=>n.value.skillLevel),d=>{d>10&&(n.value.lbCount=Math.max(n.value.lbCount,d-9))}),G(P(()=>n.value.centerSkillLevel),d=>{d>10&&(n.value.lbCount=Math.max(n.value.lbCount,d-9))}),G(n,d=>{C("update:skillLevel",d)}),de(()=>{u.value=n.value.selected||"optional",C("update:skillLevel",n.value)}),(d,o)=>{const L=he,T=Ce;return m(),f(F,null,[e("tr",null,[e("td",{rowspan:t(n).friendPosession?2:1},[$(b(t(E)(d.card))+" ",1),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:o[0]||(o[0]=p=>d.openCardDetailsModal(d.card))},[V(L,{icon:"circle-info"})])],8,Al),e("td",{class:A({"gained-ap":t(we)(d.card,t(n).level)>0}),style:B({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},b(d.card.ap+t(we)(d.card,t(n).level)),7),e("td",{style:B({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},[g(e("input",{"onUpdate:modelValue":o[1]||(o[1]=p=>t(n).level=p),class:A(["form-control",{"not-max":t(n).level!==t(z)[d.card.rarity]}]),type:"number",min:"1",max:t(z)[d.card.rarity],onChange:o[2]||(o[2]=p=>C("update:skillLevel",t(n)))},null,42,Dl),[[q,t(n).level,void 0,{number:!0}]])],4),e("td",{style:B({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},[g(e("input",{"onUpdate:modelValue":o[3]||(o[3]=p=>t(n).skillLevel=p),class:A([[t(n).skillLevel>10?`level-exceeded-${t(n).skillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[q,t(n).skillLevel,void 0,{number:!0}]])],4),e("td",{style:B({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},[g(e("input",{"onUpdate:modelValue":o[4]||(o[4]=p=>t(n).centerSkillLevel=p),class:A([[t(n).centerSkillLevel>10?`level-exceeded-${t(n).centerSkillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[q,t(n).centerSkillLevel,void 0,{number:!0}]])],4),e("td",{style:B({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},[g(e("input",{"onUpdate:modelValue":o[5]||(o[5]=p=>t(n).lbCount=p),class:A(["form-control",[t(n).lbCount>1?`level-exceeded-${t(n).lbCount-1}`:""]]),type:"number",min:"1",max:"5"},null,2),[[q,t(n).lbCount,void 0,{number:!0}]])],4),e("td",{rowspan:t(n).friendPosession?2:1,class:A({"required-bg":t(u)==="required","excluded-bg":t(u)==="excluded"})},[e("div",Nl,[e("label",zl,[g(e("input",{"onUpdate:modelValue":o[6]||(o[6]=p=>y(u)?u.value=p:null),class:"form-check-input",type:"radio",value:"required"},null,512),[[D,t(u)]]),o[13]||(o[13]=$(" 必須 ",-1))]),e("label",El,[g(e("input",{"onUpdate:modelValue":o[7]||(o[7]=p=>y(u)?u.value=p:null),class:"form-check-input",type:"radio",value:"optional"},null,512),[[D,t(u)]]),o[14]||(o[14]=$(" 任意 ",-1))]),e("label",ql,[g(e("input",{"onUpdate:modelValue":o[8]||(o[8]=p=>y(u)?u.value=p:null),class:"form-check-input",type:"radio",value:"excluded"},null,512),[[D,t(u)]]),o[15]||(o[15]=$(" 除外 ",-1))])])],10,Rl),e("td",{rowspan:t(n).friendPosession?2:1,style:{"text-align":"center"}},[d.card.rarity!=="dr"&&d.card.rarity!=="dr2"?g((m(),f("input",{key:0,"onUpdate:modelValue":o[9]||(o[9]=p=>t(n).friendPosession=p),class:"form-check-input",type:"checkbox"},null,512)),[[N,t(n).friendPosession]]):X("",!0)],8,jl),e("td",{rowspan:t(n).friendPosession?2:1},[V(T,{modelValue:t(n).mark,"onUpdate:modelValue":o[10]||(o[10]=p=>t(n).mark=p)},null,8,["modelValue"])],8,Il)]),g(e("tr",null,[o[16]||(o[16]=e("td",{class:"p-0 position-relative"},[e("div",{class:"friend-row-start"},[e("div",null,"フレンド")])],-1)),e("td",Gl,[g(e("input",{"onUpdate:modelValue":o[11]||(o[11]=p=>t(n).friendLevel=p),class:A([[t(n).friendLevel>10?`level-exceeded-${t(n).friendLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[q,t(n).friendLevel,void 0,{number:!0}]])]),o[17]||(o[17]=e("td",{class:"friend-row"},null,-1)),e("td",Bl,[g(e("input",{"onUpdate:modelValue":o[12]||(o[12]=p=>t(n).friendCenterSkillLevel=p),class:A([[t(n).friendCenterSkillLevel>10?`level-exceeded-${t(n).friendCenterSkillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[ke,t(n).friendPosession],[q,t(n).friendCenterSkillLevel,void 0,{number:!0}]])]),o[18]||(o[18]=e("td",{class:"p-0 position-relative"},[e("div",{class:"friend-row-end"})],-1))],512),[[ke,t(n).friendPosession]])],64)}}}),Wl=Object.assign(Ve(Kl,[["__scopeId","data-v-6db2442b"]]),{__name:"MMemberRow"}),Jl={class:"card my-2"},Hl={class:"card-body"},Xl={class:"d-flex gap-2 align-items-center"},Ql=j({__name:"OCardOperation",setup(x){const i=c("none"),{skillCaches:v}=_e(),C=()=>{v.forEach(o=>{o.value.mark===i.value&&(console.log("setSelectedMarkToRequired",o.value.mark),o.value={...o.value,selected:"required"})})},_=()=>{v.forEach(o=>{o.value.mark===i.value&&(o.value={...o.value,selected:"optional"})})},u=()=>{v.forEach(o=>{o.value.mark===i.value&&(o.value={...o.value,selected:"excluded"})})},n=()=>{confirm("マークをリセットしますか？")&&v.forEach(o=>{o.value={...o.value,mark:"none"}})},r=()=>{v.forEach(o=>{o.value={...o.value,friendPosession:!0}})},d=()=>{v.forEach(o=>{o.value={...o.value,friendPosession:!1}})};return(o,L)=>{const T=Ce;return m(),f("div",Jl,[L[3]||(L[3]=e("div",{class:"card-header"}," カード操作 ",-1)),e("div",Hl,[e("div",Xl,[e("div",null,[V(T,{modelValue:t(i),"onUpdate:modelValue":L[0]||(L[0]=p=>y(i)?i.value=p:null),class:""},null,8,["modelValue"])]),L[1]||(L[1]=e("div",null,"をすべて",-1)),e("button",{class:"btn btn-primary",onClick:C},"必須に"),e("button",{class:"btn btn-primary",onClick:_},"任意に"),e("button",{class:"btn btn-primary",onClick:u},"除外に")]),e("div",{class:"mt-2"},[e("button",{class:"btn btn-primary",onClick:n},"マークリセット")]),e("div",{class:"mt-2 d-flex gap-2 align-items-center"},[L[2]||(L[2]=e("div",null,"フレンド所持状況：",-1)),e("button",{class:"btn btn-primary",onClick:r},"すべてON"),e("button",{class:"btn btn-primary",onClick:d},"すべてOFF")])])])}}}),Yl=Object.assign(Ql,{__name:"OCardOperation"}),J=["スコアには楽曲マスタリーレベルとボルテージレベルの補正が乗る。スキルによるスコア獲得にも乗る。","コンボによるAP獲得量ボーナスはスキルにも乗る。","DRとLRは特殊なセンタースキルを持っている。強い。","「ボルテージPt.をXpt獲得／〜〜の時、ボルテージPt.をXpt獲得」みたいなスキルは、1番目のスキルにしか効果量増加が乗らない。","フィーバー中はボルテージ2倍になり獲得スコアも増加。スキルにも補正が乗るのでフィーバー中に発動できると強い。","ボルテージLv.7〜8（280〜449pt）のときに「[悠久の舞踏会] 大沢瑠璃乃」がループできると強い。","「[be proud] 乙宗梢」はスキルLv.12以上にすると手札からなくなるまでの回数が増えるので注意。","スキルLv.14の効果量はスキルLv.10の効果量の約1.5倍。切り捨ての関係でズレることはある。","フリックは実は下でも良い。"],Zl={class:"card my-2"},et={class:"card-body"},lt=j({__name:"OTips",setup(x){const i=wl("currentTipIndex",()=>Math.floor(Math.random()*J.length)),v=P(()=>J[i.value]),C=()=>{i.value=(i.value+1)%J.length},_=()=>{i.value=(i.value-1+J.length)%J.length};return(u,n)=>(m(),f("div",Zl,[n[1]||(n[1]=e("div",{class:"card-header"}," Tips ",-1)),e("div",et,[e("div",null," （No. "+b(t(i)+1)+"）"+b(t(v)),1),e("button",{type:"button",class:"btn btn-primary",onClick:_}," ＜前 "),n[0]||(n[0]=$("   ",-1)),e("button",{type:"button",class:"btn btn-primary",onClick:C}," 次＞ ")])]))}}),tt=Object.assign(lt,{__name:"OTips"}),nt={class:"mb-3"},ot={class:"my-2"},st={class:"card my-2"},at={class:"card-body"},rt={class:"table"},it={class:"card my-2"},ut={class:"card-body"},dt={class:"table"},vt={key:0,rowspan:"14"},ct={class:"card my-2"},pt={class:"card-body"},mt={class:"table"},ft={class:"card my-2"},bt={class:"card-body"},kt=j({__name:"MdCardDetails",props:{onClose:{},card:{},displayLevel:{}},setup(x){const i=x,v=P(()=>Array.from({length:14},(n,r)=>Qe(H(i.card,r+1,r+1)))),C=Ue(new Set([...Ye[i.card.rarity].map(([n])=>n),i.displayLevel])),_=P(()=>Array.from(C).sort((n,r)=>n-r)),u=P(()=>_.value.map(n=>H(i.card,1,1,n)));return(n,r)=>{const d=ll;return m(),ye(d,{"on-close":n.onClose},{default:ge(()=>[e("h3",nt,b(t(E)(n.card)),1),e("div",ot,[e("div",st,[r[6]||(r[6]=e("div",{class:"card-header"}," ステータス ",-1)),e("div",at,[e("table",rt,[e("thead",null,[e("tr",null,[r[1]||(r[1]=e("th",null,"ステータス",-1)),(m(!0),f(F,null,O(t(_),o=>(m(),f("th",{key:`status-${o}`}," Lv."+b(o),1))),128))])]),e("tbody",null,[e("tr",null,[r[2]||(r[2]=e("td",null,"スマイル",-1)),(m(!0),f(F,null,O(t(u),o=>(m(),f("td",{key:`status-smile-${o.key}`},b(o.smile),1))),128))]),e("tr",null,[r[3]||(r[3]=e("td",null,"ピュア",-1)),(m(!0),f(F,null,O(t(u),o=>(m(),f("td",{key:`status-pure-${o.key}`},b(o.pure),1))),128))]),e("tr",null,[r[4]||(r[4]=e("td",null,"クール",-1)),(m(!0),f(F,null,O(t(u),o=>(m(),f("td",{key:`status-cool-${o.key}`},b(o.cool),1))),128))]),e("tr",null,[r[5]||(r[5]=e("td",null,"メンタル",-1)),(m(!0),f(F,null,O(t(u),o=>(m(),f("td",{key:`status-mental-${o.key}`},b(o.mental),1))),128))])])])])]),e("div",it,[r[8]||(r[8]=e("div",{class:"card-header"}," センタースキル ",-1)),e("div",ut,[e("table",dt,[r[7]||(r[7]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"発動条件"),e("th",null,"効果")])],-1)),e("tbody",null,[(m(!0),f(F,null,O(t(v),(o,L)=>(m(),f("tr",{key:`center-skill-${L}`},[e("td",null,b(L+1),1),L===0?(m(),f("td",vt,b(t(Ze)(o.centerSkillCondition)),1)):X("",!0),e("td",null,b(t($e)(o.centerSkills)),1)]))),128))])])])]),e("div",ct,[r[10]||(r[10]=e("div",{class:"card-header"}," スキル ",-1)),e("div",pt,[e("table",mt,[r[9]||(r[9]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"効果")])],-1)),e("tbody",null,[(m(!0),f(F,null,O(t(v),(o,L)=>(m(),f("tr",{key:`skill-${L}`},[e("td",null,b(L+1),1),e("td",null,b(t($e)(o.skills)),1)]))),128))])])])]),e("div",ft,[r[11]||(r[11]=e("div",{class:"card-header"}," センター特性 ",-1)),e("div",bt,b(t(el)(t(v)[0].centerAbilities)),1)]),e("button",{class:"btn btn-primary",onClick:r[0]||(r[0]=o=>n.onClose(null))}," 閉じる ")])]),_:1},8,["on-close"])}}}),yt=Object.assign(kt,{__name:"MdCardDetails"}),gt={class:"container-md"},Ct={class:"card my-2"},_t={class:"card-body"},Lt={class:"table"},xt={scope:"col"},wt={class:"d-flex align-items-end"},$t={class:""},St={class:"input-group"},Mt={class:"input-group-prepend"},Vt={class:"input-group-text"},Ut={style:{"min-height":"1.5em"}},ht={style:{"text-align":"right"}},Ft={class:"d-flex gap-3 justify-content-end"},Pt={class:"d-flex gap-2"},Tt=["disabled"],Ot={class:"card my-2"},At={class:"card-body"},Dt={class:"mb-2"},Rt={class:"row"},Nt={class:"col-auto"},zt={class:"col-auto"},Et={class:"mb-2"},qt={class:"row"},jt={class:"col-auto"},It={class:"col-auto"},Gt={class:"mb-2"},Bt={class:"row"},Kt={class:"col-auto"},Wt={class:"col-auto"},Jt={class:"mb-2"},Ht={class:"form-check"},Xt={class:"form-check-label",for:"parallel"},Qt={class:"form-check"},Yt={class:"form-check"},Zt={class:"form-check"},en={class:"form-check"},ln={class:"form-check"},tn={class:"form-check"},nn={key:2},on={class:"card my-2"},sn={class:"card-body"},an=["value"],rn={class:"d-flex gap-2 align-items-center"},vn=j({__name:"auto-formation",setup(x){const i=c("finished"),v=c(void 0),C=async()=>{if(v.value)try{await v.value.release(),v.value=void 0}catch{}if("wakeLock"in navigator)try{v.value=await navigator.wakeLock.request("screen")}catch(a){console.error(a)}};G(i,async a=>{if(a==="finished")try{await v.value?.release(),v.value=void 0}catch{}});const _=c(""),u=c(""),n=c(0),r=c(0),d=c("smile"),o=c(50),L=c("perfect"),T=c("current"),p=c("score"),Q=c(!0),Y=c(!0),Z=c(!1),ee=c([]),le=Se("seasonFanLvs",{kaho:1,sayaka:1,rurino:1,ginko:1,kosuzu:1,hime:1,ceras:1,izumi:1,kozue:1,tsuzuri:1,megumi:1}),te=c(""),ne=c(!0),oe=c(!0),se=c(!1),ae=c(!1),h=c([...tl]),S=c(Object.fromEntries(h.value.map(a=>[w(a),{level:z[a.rarity]||1,centerSkillLevel:10,skillLevel:10,friendLevel:z[a.rarity]||1,friendCenterSkillLevel:14,selected:"optional",friendPosession:!1}]))),Fe=(a,l)=>{S.value[a]=l},Pe=P(()=>h.value.filter(a=>S.value[w(a)]?.selected==="required").length),Te=P(()=>h.value.filter(a=>S.value[w(a)]?.selected==="excluded").length),Oe=P(()=>h.value.filter(a=>S.value[w(a)]?.selected==="optional").length),K=c([]),ve=c([]),ce=c(0),pe=c(1);de(()=>{pe.value=navigator.hardwareConcurrency||4});const U=c(null),Ae=P(()=>ve.value.reduce((a,l)=>a+l,0)),Le=c(Promise.resolve()),De=a=>{K.value=Array.from({length:a},()=>new Worker(new URL(""+new URL("calc-worker-parallel-CzRKtfW2.js",import.meta.url).href,import.meta.url),{type:"module"})),K.value.forEach((l,R)=>{l.onmessage=M=>{switch(M.data.message){case"calcScore":Le.value=Le.value.then(async()=>{M.data.data.score>(U.value?.score||0)&&(U.value={score:M.data.data.score,liveGrandPrixPt:M.data.data.liveGrandPrixPt,members:M.data.data.members,centerMember:M.data.data.centerMember,friendMember:M.data.data.friendMember,log:M.data.data.log})});break;case"progress":ve.value[R]=M.data.data.progress;break;case"end":ce.value++,ce.value===K.value.length&&(i.value="finished");break}}})},Re=()=>{const a=Q.value?pe.value:1;De(a),C(),U.value=null,ve.value=Array.from({length:a},()=>0),ce.value=0;const l=ol(_.value,n.value),R=h.value.filter(k=>S.value[w(k)]&&S.value[w(k)].selected==="required").map(k=>H(k,S.value[w(k)]?.skillLevel||10,S.value[w(k)]?.centerSkillLevel||10,S.value[w(k)]?.level||1));if(R.length>6){W("必須のメンバーが6人を超えています");return}const M=h.value.filter(k=>!S.value[w(k)]?.selected||S.value[w(k)].selected==="optional").map(k=>H(k,S.value[w(k)]?.skillLevel||10,S.value[w(k)]?.centerSkillLevel||10,S.value[w(k)]?.level||1)),ue=Z.value?[]:h.value.filter(k=>S.value[w(k)]?.friendPosession).map(k=>H(k,10,S.value[w(k)]?.friendCenterSkillLevel||10,S.value[w(k)]?.friendLevel||1));i.value="running",K.value.forEach((k,fe)=>{k.postMessage(JSON.parse(JSON.stringify({requiredMembers:R,optionalMembers:M,friendMembers:ue,notes:l,center:u.value,attribute:d.value,masteryLevel:o.value,playStyle:L.value,formationRule:T.value,includingCenterOnly:ne.value,includeFriendOnlyCenter:Y.value,noLog:oe.value,noDamagedFormation:se.value,noCuredFormation:ae.value,scoreComparisonRule:p.value,seasonFanLvs:le.value,singers:ee.value,batchNum:a,batchIndex:fe})))})},Ne=()=>{K.value.forEach(a=>{a.terminate()}),i.value="finished"},W=a=>{window.alert(a)},{modals:ze,openModal:Ee}=nl(),qe=async a=>{await Ee(yt,{card:a,displayLevel:S.value[w(a)]?.level||1})},me=c(null),je=()=>{const a=me.value?.files?.[0];if(a){const l=new FileReader;l.onload=R=>{const M=R.target?.result;h.value=h.value.concat(sl(M))},l.readAsText(a)}},Ie=c(null),xe=c(!1),Ge=()=>{h.value=h.value.concat(al),xe.value=!0},re=c("none"),{skillCaches:I}=_e(),ie=P(()=>({spade:Array.from(I.values()).filter(a=>a.value.mark==="spade").length,heart:Array.from(I.values()).filter(a=>a.value.mark==="heart").length,diamond:Array.from(I.values()).filter(a=>a.value.mark==="diamond").length,club:Array.from(I.values()).filter(a=>a.value.mark==="club").length,none:Array.from(I.values()).filter(a=>a.value.mark==="none").length})),Be=()=>{U.value?.members.forEach(a=>{const l=I.get(w(a));l&&(l.value={...l.value,mark:re.value})})};return yl({title:"スクショウ自動編成",meta:[{name:"twitter:title",content:"スクショウ自動編成"},{name:"description",content:"スクショウの編成を自動で計算します"}]}),(a,l)=>{const R=rl,M=Tl,ue=Ll,k=he,fe=Wl,Ke=Yl,We=Ce,Je=tt;return m(),f("div",gt,[l[64]||(l[64]=e("h1",null,"スクショウ自動編成",-1)),l[65]||(l[65]=e("a",{href:"https://note.com/asmape/n/nefd46574f4e3",target:"_blank"},"note",-1)),V(R,{"note-text":t(_),"onUpdate:noteText":l[0]||(l[0]=s=>y(_)?_.value=s:null),center:t(u),"onUpdate:center":l[1]||(l[1]=s=>y(u)?u.value=s:null),offset:t(n),"onUpdate:offset":l[2]||(l[2]=s=>y(n)?n.value=s:null),"combo-offset":t(r),"onUpdate:comboOffset":l[3]||(l[3]=s=>y(r)?r.value=s:null),attribute:t(d),"onUpdate:attribute":l[4]||(l[4]=s=>y(d)?d.value=s:null),"mastery-level":t(o),"onUpdate:masteryLevel":l[5]||(l[5]=s=>y(o)?o.value=s:null),singers:t(ee),"onUpdate:singers":l[6]||(l[6]=s=>y(ee)?ee.value=s:null)},null,8,["note-text","center","offset","combo-offset","attribute","mastery-level","singers"]),V(ue,null,{default:ge(()=>[V(M,{"season-fan-lvs":t(le),"onUpdate:seasonFanLvs":l[7]||(l[7]=s=>y(le)?le.value=s:null)},null,8,["season-fan-lvs"])]),_:1}),e("div",Ct,[l[43]||(l[43]=e("div",{class:"card-header"}," メンバー ",-1)),e("div",_t,[e("table",Lt,[e("thead",null,[e("tr",null,[e("th",xt,[e("div",wt,[l[29]||(l[29]=e("div",{style:{"margin-right":"8px"}}," カード ",-1)),e("div",$t,[e("div",St,[e("div",Mt,[e("div",Vt,[e("div",Ut,[V(k,{icon:["fas","magnifying-glass"]})])])]),g(e("input",{"onUpdate:modelValue":l[8]||(l[8]=s=>y(te)?te.value=s:null),type:"text",class:"form-control"},null,512),[[q,t(te)]])])])])]),l[30]||(l[30]=e("th",{scope:"col"},"AP",-1)),l[31]||(l[31]=e("th",{scope:"col"},"Lv.",-1)),l[32]||(l[32]=e("th",{scope:"col"},"Sk Lv.",-1)),l[33]||(l[33]=e("th",{scope:"col"},"CtSk Lv.",-1)),l[34]||(l[34]=e("th",{scope:"col"},"凸数",-1)),l[35]||(l[35]=e("th",{scope:"col"},"選択",-1)),l[36]||(l[36]=e("th",{scope:"col"},"フレンド",-1)),l[37]||(l[37]=e("th",{scope:"col"},"マーク",-1))])]),e("tbody",null,[V(ue,{"fallback-tag":"tr"},{default:ge(()=>[(m(!0),f(F,null,O(t(h),s=>g((m(),ye(fe,{key:t(E)(s),card:s,"open-card-details-modal":qe,"onUpdate:skillLevel":be=>Fe(t(w)(s),be)},null,8,["card","onUpdate:skillLevel"])),[[ke,t(E)(s).toLowerCase().includes(t(te).toLowerCase())]])),128))]),_:1})])]),e("div",ht," 必須："+b(t(Pe))+" 任意："+b(t(Oe))+" 除外："+b(t(Te)),1),e("div",Ft,[e("div",null,[l[38]||(l[38]=e("span",{style:{color:"#ddbb00"}},"♥",-1)),$("："+b(t(ie).heart),1)]),e("div",null,[l[39]||(l[39]=e("span",{style:{color:"#6666dd"}},"♦",-1)),$("："+b(t(ie).diamond),1)]),e("div",null,[l[40]||(l[40]=e("span",{style:{color:"#888"}},"♠",-1)),$("："+b(t(ie).spade),1)]),e("div",null,[l[41]||(l[41]=e("span",{style:{color:"#ff88aa"}},"♣",-1)),$("："+b(t(ie).club),1)])]),e("div",Pt,[e("button",{type:"button",class:"btn btn-primary",onClick:l[9]||(l[9]=s=>t(me)?.click())}," TSVインポート "),e("button",{type:"button",class:"btn btn-primary",disabled:t(xe),onClick:l[10]||(l[10]=s=>Ge())}," 後衛カード追加 ",8,Tt)]),l[42]||(l[42]=e("div",null,[e("a",{href:"https://docs.google.com/spreadsheets/d/13moGCQN2fd9_kxc5g3M9go98Sw6Y8fO25nDxKFoDsDk/edit?gid=1837505339#gid=1837505339",target:"_blank"}," 後衛カード一覧 ")],-1)),e("input",{ref_key:"tsvFileInput",ref:me,type:"file",class:"d-none",onChange:je},null,544)])]),V(Ke),e("div",Ot,[l[63]||(l[63]=e("div",{class:"card-header"}," 計算 ",-1)),e("div",At,[e("div",Dt,[l[46]||(l[46]=$(" プレイスタイル： ",-1)),e("div",Rt,[e("div",Nt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[11]||(l[11]=s=>y(L)?L.value=s:null),class:"form-check-input",type:"radio",value:"perfect"},null,512),[[D,t(L)]]),l[44]||(l[44]=$(" 渾身 ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[12]||(l[12]=s=>W("フルコンを目指すプレイ"))},[V(k,{icon:"circle-info"})])]),e("div",zt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[13]||(l[13]=s=>y(L)?L.value=s:null),class:"form-check-input",type:"radio",value:"desperate"},null,512),[[D,t(L)]]),l[45]||(l[45]=$(" 背水 ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[14]||(l[14]=s=>W("メンタルが10%以下になるようミスをするプレイ"))},[V(k,{icon:"circle-info"})])])])]),e("div",Et,[l[49]||(l[49]=$(" 編成ルール： ",-1)),e("div",qt,[e("div",jt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[15]||(l[15]=s=>y(T)?T.value=s:null),class:"form-check-input",type:"radio",value:"current"},null,512),[[D,t(T)]]),l[47]||(l[47]=$(" 通常ルール ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[16]||(l[16]=s=>W(`・メンバー1人あたり1種類まで
・カード制限なし`))},[V(k,{icon:"circle-info"})])]),e("div",It,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[17]||(l[17]=s=>y(T)?T.value=s:null),class:"form-check-input",type:"radio",value:"new_grand_prix"},null,512),[[D,t(T)]]),l[48]||(l[48]=$(" ライグラルール ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[18]||(l[18]=s=>W(`・メンバー1人あたり2種類まで
・DRは1枚まで`))},[V(k,{icon:"circle-info"})])])])]),e("div",Gt,[l[52]||(l[52]=$(" スコア比較基準： ",-1)),e("div",Bt,[e("div",Kt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[19]||(l[19]=s=>y(p)?p.value=s:null),class:"form-check-input",type:"radio",value:"score"},null,512),[[D,t(p)]]),l[50]||(l[50]=$(" スコア ",-1))])]),e("div",Wt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[20]||(l[20]=s=>y(p)?p.value=s:null),class:"form-check-input",type:"radio",value:"grandPrixPt"},null,512),[[D,t(p)]]),l[51]||(l[51]=$(" グランプリpt ",-1))])])])]),e("div",Jt,[l[59]||(l[59]=$(" オプション： ",-1)),e("div",Ht,[g(e("input",{id:"parallel","onUpdate:modelValue":l[21]||(l[21]=s=>y(Q)?Q.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(Q)]]),e("label",Xt," マルチスレッド ("+b(t(pe))+"スレッド) ",1)]),e("div",Qt,[g(e("input",{id:"includingCenterOnly","onUpdate:modelValue":l[22]||(l[22]=s=>y(ne)?ne.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(ne)]]),l[53]||(l[53]=e("label",{class:"form-check-label",for:"includingCenterOnly"}," センターのメンバーを含まない編成は計算しない ",-1))]),e("div",Yt,[g(e("input",{id:"includeFriendOnlyCenter","onUpdate:modelValue":l[23]||(l[23]=s=>y(Y)?Y.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(Y)]]),l[54]||(l[54]=e("label",{class:"form-check-label",for:"includeFriendOnlyCenter"}," フレンドはセンターのメンバーのみ採用する ",-1))]),e("div",Zt,[g(e("input",{id:"noLog","onUpdate:modelValue":l[24]||(l[24]=s=>y(oe)?oe.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(oe)]]),l[55]||(l[55]=e("label",{class:"form-check-label",for:"noLog"}," ログを出力しない（効果大） ",-1))]),e("div",en,[g(e("input",{id:"noDamagedFormation","onUpdate:modelValue":l[25]||(l[25]=s=>y(se)?se.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(se)]]),l[56]||(l[56]=e("label",{class:"form-check-label",for:"noDamagedFormation"}," 途中でメンタルが100%未満になった場合計算を打ち切る（渾身選択時以外は自動で無効） ",-1))]),e("div",ln,[g(e("input",{id:"noCuredFormation","onUpdate:modelValue":l[26]||(l[26]=s=>y(ae)?ae.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(ae)]]),l[57]||(l[57]=e("label",{class:"form-check-label",for:"noCuredFormation"}," 途中でメンタルが10%超になった場合計算を打ち切る（背水選択時以外は自動で無効） ",-1))]),e("div",tn,[g(e("input",{id:"noConsiderFriend","onUpdate:modelValue":l[27]||(l[27]=s=>y(Z)?Z.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(Z)]]),l[58]||(l[58]=e("label",{class:"form-check-label",for:"noConsiderFriend"}," フレンドなし固定 ",-1))])]),t(i)!=="running"?(m(),f("button",{key:0,type:"button",class:"btn btn-primary",onClick:Re}," 計算 ")):X("",!0),t(i)==="running"?(m(),f("button",{key:1,type:"button",class:"btn btn-primary",onClick:Ne}," 中止 ")):X("",!0),t(U)?(m(),f("div",nn,[e("p",{ref_key:"progressView",ref:Ie},b(t(i)==="running"?`計算中... ${t(Ae).toFixed(2)}%`:"計算完了"),513),e("div",on,[e("div",sn,[e("p",null,"最高得点: "+b(t(U).score)+" ("+b(t(U).liveGrandPrixPt)+"pt)",1),l[62]||(l[62]=e("p",null,"メンバー:",-1)),e("ul",null,[(m(!0),f(F,null,O(t(U).members,s=>(m(),f("li",{key:t(w)(s),style:B({fontWeight:t(U).centerMember&&t(E)(s)===t(E)(t(U).centerMember)?"bold":"normal"})},b(t(E)(s)),5))),128))]),e("p",null,"フレンド: "+b(t(U).friendMember?t(E)(t(U).friendMember):"なし"),1),e("textarea",{class:"form-control",value:t(U).log,readonly:"",rows:"5"},null,8,an),e("div",rn,[l[60]||(l[60]=e("div",null,"編成に使用したカードを",-1)),e("div",null,[V(We,{modelValue:t(re),"onUpdate:modelValue":l[28]||(l[28]=s=>y(re)?re.value=s:null),class:""},null,8,["modelValue"])]),l[61]||(l[61]=e("div",null,"にする",-1)),e("button",{class:"btn btn-primary",onClick:Be},"実行")])])])])):X("",!0)])]),V(Je),(m(!0),f(F,null,O(t(ze),(s,be)=>(m(),ye(Cl(s.component),gl({key:`modal-${be}`,"on-close":s.onClose},{ref_for:!0},s.args),null,16,["on-close"]))),128))])}}});export{vn as default};
