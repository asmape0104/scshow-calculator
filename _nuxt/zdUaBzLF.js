import{o as _,u as re,q as W,d as ue,b as J,g as de,s as le,e as ce,_ as pe,a as F,i as fe,p as ve,j as me}from"./kpWgoozj.js";import{g as S,y as ye,z as ne,A as G,c as x,q as R,o as v,a as e,B as Q,f as te,r as k,h as oe,C as ae,d as M,t as U,l as o,b as j,j as C,v as Z,s as T,k as g,i as ee,w as be,F as A,m as q,u as ke,D as se,E as ge,x as xe}from"./C45eJsRV.js";function he(f){const l={size:16,x:0,y:0,rotate:0};return f.size!==l.size||f.x!==l.x||f.y!==l.y||f.rotate!==l.rotate||f.flipX||f.flipY}const $e={key:0,style:{display:"none"}},Ce=["innerHTML"],_e=["innerHTML"],ie={__name:"FaIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:f=>[!0,!1,"horizontal","vertical","both"].includes(f)},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:void 0},listItem:{type:Boolean,default:!1},pull:{type:String,default:void 0,validator:f=>["right","left"].includes(f)},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:void 0,validator:f=>[90,180,270].includes(Number.parseInt(f,10))},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:void 0,validator:f=>["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(f)},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:void 0},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:void 0},titleId:{type:String,default:void 0},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup(f){const l=f,$=S(()=>z(l.icon)),h=S(()=>z(l.mask)),r=S(()=>{if(l.transform){const n=typeof l.transform!="object"?ye.transform(l.transform):l.transform;if(n&&he(n))return w(n)}}),a=S(()=>ne($.value,{classes:B.value,title:l.title,titleId:l.titleId})),u=S(()=>ne(h.value)),d=S(()=>{const n={"aria-hidden":!0,"data-prefix":a.value?.prefix,"data-icon":a.value?.iconName,class:B.value,focusable:!1,role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${a.value?.icon[0]} ${a.value?.icon[1]}`};return l.symbol&&(n.id=[a.value?.prefix,"fa",a.value?.iconName].join("-")),l.title&&(n["aria-labelledby"]=m.value),n}),i=S(()=>{const n=D();if(u.value){const p=l.maskId||u.value.iconName;return`<defs>
      <clipPath id="clip-${p}">
        <path fill="currentColor" d="${u.value.icon[4]}"></path>
      </clipPath>
      <mask id="mask-${p}" x="0" y="0" width="100%" height="100%" maskUnits="userSpaceOnUse" maskContentUnits="userSpaceOnUse">
        <rect x="0" y="0" width="100%" height="100%" fill="white"></rect>
        ${n}
      </mask>
    </defs>
    <rect fill="currentColor" clip-path="url(#clip-${p})" mask="url(#mask-${p})" x="0" y="0" width="100%" height="100%"></rect>`}return n}),B=S(()=>{const n={"fa-spin":l.spin,"fa-pulse":l.pulse,"fa-fw":l.fixedWidth,"fa-border":l.border,"fa-li":l.listItem,"fa-inverse":l.inverse,"fa-flip":l.flip===!0,"fa-flip-horizontal":l.flip==="horizontal"||l.flip==="both","fa-flip-vertical":l.flip==="vertical"||l.flip==="both",[`fa-${l.size}`]:l.size!==void 0,[`fa-rotate-${l.rotation}`]:l.rotation!==void 0,[`fa-pull-${l.pull}`]:l.pull!==void 0,"fa-swap-opacity":l.swapOpacity,"fa-bounce":l.bounce,"fa-shake":l.shake,"fa-beat":l.beat,"fa-fade":l.fade,"fa-beat-fade":l.beatFade,"fa-spin-pulse":l.spinPulse,"fa-spin-reverse":l.spinReverse},p=Object.keys(n).map(c=>n[c]?c:null).filter(c=>c);return[G.replacementClass,...p]}),m=S(()=>G.replacementClass+"-title-"+(l.titleId||H()));function z(n){if(n){if(typeof n=="string"){const p={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab"};let c=p[G.styleDefault]||"fas",L=n.replace(/\bfa-/g,"");if(L.includes(" ")){const V=L.split(/\s+/);V[0]in p&&(c=p[V[0]]),L=V[1]}return{prefix:c,iconName:L}}if(Array.isArray(n)&&n.length===2)return{prefix:n[0],iconName:n[1]};if(typeof n=="object"&&"prefix"in n&&"iconName"in n)return n}}function w(n){const c=a.value?.icon[0]||512,L=n.x||0,V=n.y||0,P=n.size||0,O=n.rotate||0,E=n.flipX||0,X=n.flipY||0,Y="translate(".concat(String(512/2)," 256)"),y="translate(".concat(String(L*32),", ").concat(String(V*32),") "),t="scale(".concat(String(P/16*(E?-1:1)),", ").concat(String(P/16*(X?-1:1)),") "),N="rotate(".concat(String(O)," 0 0)"),b="".concat(y," ").concat(t," ").concat(N),I="translate(".concat(String(c/2*-1)," -256)");return{outer:Y,inner:b,path:I}}function H(){const n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";let p=12,c="";for(;p-- >0;)c+=n[Math.random()*62|0];return c}function D(){const n=u.value?"black":"currentColor",p=[];let c=a.value.icon[4];return Array.isArray(c)||(c=[c]),c.forEach(L=>{p.push(`<path fill="${n}"${r.value?' transform="'+r.value.path+'"':""} d="${L}"></path>`)}),r.value&&(p.unshift(`<g transform="${r.value.outer}">`,`<g transform="${r.value.inner}">`),p.push("</g>","</g>")),l.title&&p.unshift(`<title id="${m.value}">${l.title}</title>`),p.join("")}return l.icon&&!a.value&&console.info("Could not find main icon",$.value),l.mask&&!u.value&&console.info("Could not find mask icon",h.value),(n,p)=>a.value&&f.symbol?(v(),x("svg",$e,[e("symbol",Q(d.value,{innerHTML:i.value}),null,16,Ce)])):a.value?(v(),x("svg",Q({key:1},d.value,{innerHTML:i.value}),null,16,_e)):R("",!0)}},we={class:"row"},Le={class:"col form-check-label"},Se={class:"col form-check-label"},Me={class:"col form-check-label"},Ue=te({__name:"MMemberRow",props:{card:{},openCardDetailsModal:{type:Function}},emits:["update:skillLevel"],setup(f,{emit:l}){const $=f,h=l,r=S(()=>_($.card)),a=k("optional"),u=re(r,{centerSkillLevel:10,skillLevel:10,selected:"optional"});return oe(a,d=>{u.value.selected=d}),oe(u,d=>{h("update:skillLevel",d)}),ae(()=>{a.value=u.value.selected||"optional",h("update:skillLevel",u.value)}),(d,i)=>{const B=ie;return v(),x("tr",null,[e("td",null,[M(U(o(W)(d.card))+" ",1),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:i[0]||(i[0]=m=>d.openCardDetailsModal(d.card))},[j(B,{icon:"circle-info"})])]),e("td",null,[C(e("input",{"onUpdate:modelValue":i[1]||(i[1]=m=>o(u).skillLevel=m),class:"form-control",type:"number",min:"1",max:"14"},null,512),[[Z,o(u).skillLevel,void 0,{number:!0}]])]),e("td",null,[C(e("input",{"onUpdate:modelValue":i[2]||(i[2]=m=>o(u).centerSkillLevel=m),class:"form-control",type:"number",min:"1",max:"14"},null,512),[[Z,o(u).centerSkillLevel,void 0,{number:!0}]])]),e("td",null,[e("div",we,[e("label",Le,[C(e("input",{"onUpdate:modelValue":i[3]||(i[3]=m=>g(a)?a.value=m:null),class:"form-check-input",type:"radio",value:"required"},null,512),[[T,o(a)]]),i[6]||(i[6]=M(" 必須 ",-1))]),e("label",Se,[C(e("input",{"onUpdate:modelValue":i[4]||(i[4]=m=>g(a)?a.value=m:null),class:"form-check-input",type:"radio",value:"optional"},null,512),[[T,o(a)]]),i[7]||(i[7]=M(" 任意 ",-1))]),e("label",Me,[C(e("input",{"onUpdate:modelValue":i[5]||(i[5]=m=>g(a)?a.value=m:null),class:"form-check-input",type:"radio",value:"excluded"},null,512),[[T,o(a)]]),i[8]||(i[8]=M(" 除外 ",-1))])])])])}}}),Be=Object.assign(Ue,{__name:"MMemberRow"}),ze={class:"mb-3"},Ve={class:"my-2"},Oe={class:"card my-2"},Te={class:"card-body"},De={class:"table"},Ie={key:0,rowspan:"14"},je={class:"card my-2"},Ne={class:"card-body"},Re={class:"table"},Ae={class:"card my-2"},qe={class:"card-body"},Pe=te({__name:"MdCardDetails",props:{onClose:{},card:{}},setup(f){const l=f,$=S(()=>Array.from({length:14},(h,r)=>ue(J(l.card,r+1,r+1))));return(h,r)=>{const a=pe;return v(),ee(a,{"on-close":h.onClose},{default:be(()=>[e("h3",ze,U(o(W)(h.card)),1),e("div",Ve,[e("div",Oe,[r[2]||(r[2]=e("div",{class:"card-header"}," センタースキル ",-1)),e("div",Te,[e("table",De,[r[1]||(r[1]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"発動条件"),e("th",null,"効果")])],-1)),e("tbody",null,[(v(!0),x(A,null,q(o($),(u,d)=>(v(),x("tr",{key:`center-skill-${d}`},[e("td",null,U(d+1),1),d===0?(v(),x("td",Ie,U(o(de)(u.centerSkillCondition)),1)):R("",!0),e("td",null,U(o(le)(u.centerSkills)),1)]))),128))])])])]),e("div",je,[r[4]||(r[4]=e("div",{class:"card-header"}," スキル ",-1)),e("div",Ne,[e("table",Re,[r[3]||(r[3]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"効果")])],-1)),e("tbody",null,[(v(!0),x(A,null,q(o($),(u,d)=>(v(),x("tr",{key:`skill-${d}`},[e("td",null,U(d+1),1),e("td",null,U(o(le)(u.skills)),1)]))),128))])])])]),e("div",Ae,[r[5]||(r[5]=e("div",{class:"card-header"}," センター特性 ",-1)),e("div",qe,U(o(ce)(o($)[0].centerAbilities)),1)]),e("button",{class:"btn btn-primary",onClick:r[0]||(r[0]=u=>h.onClose(null))}," 閉じる ")])]),_:1},8,["on-close"])}}}),Fe=Object.assign(Pe,{__name:"MdCardDetails"}),We={class:"container-md"},He={class:"card my-2"},Ee={class:"card-body"},Xe={class:"table"},Ye={scope:"col"},Ke={class:"d-flex align-items-end"},Ge={class:""},Je={class:"input-group"},Qe={class:"card my-2"},Ze={class:"card-body"},et={class:"mb-2"},tt={class:"row"},lt={class:"col-auto"},nt={class:"col-auto"},ot={class:"mb-2"},st={class:"row"},at={class:"col-auto"},it={class:"col-auto"},rt={class:"mb-2"},ut={class:"form-check"},dt={class:"form-check"},ct={key:2},pt={class:"card my-2"},ft={class:"card-body"},vt=["value"],bt=te({__name:"auto-formation",setup(f){const l=k(""),$=k(""),h=k(0),r=k(0),a=k("smile"),u=k(50),d=k("perfect"),i=k("current"),B=k(""),m=k(!0),z=k(!0),w=k(Object.fromEntries(F.map(y=>[_(y),{centerSkillLevel:10,skillLevel:10,selected:"optional"}]))),H=(y,t)=>{w.value[y]=t},D=k(null),n=k(null),p=k(Promise.resolve()),c=k("finished"),L=()=>{D.value=new Worker(new URL(""+new URL("calc-worker-CdVmeKk0.js",import.meta.url).href,import.meta.url),{type:"module"}),D.value.onmessage=y=>{switch(y.data.message){case"calcScore":p.value=p.value.then(async()=>{y.data.data.score>(n.value?.score||0)&&(n.value={score:y.data.data.score,members:y.data.data.members,log:y.data.data.log})});break;case"end":c.value="finished";break}}};ae(()=>{L()});const V=()=>{n.value=null;const y=ve(l.value,h.value),t=F.filter(b=>w.value[_(b)]&&w.value[_(b)].selected==="required").map(b=>J(b,w.value[_(b)]?.skillLevel||10,w.value[_(b)]?.centerSkillLevel||10));if(t.length>6){O("必要メンバーが6人を超えています");return}const N=F.filter(b=>!w.value[_(b)]?.selected||w.value[_(b)].selected==="optional").map(b=>J(b,w.value[_(b)]?.skillLevel||10,w.value[_(b)]?.centerSkillLevel||10));c.value="running",D.value?.postMessage({requiredMembers:t,optionalMembers:N,notes:y,center:$.value,attribute:a.value,masteryLevel:u.value,playStyle:d.value,formationRule:i.value,includingCenterOnly:m.value,noLog:z.value})},P=()=>{D.value?.terminate(),L(),c.value="finished"},O=y=>{window.alert(y)},{modals:E,openModal:X}=fe(),Y=async y=>{await X(Fe,{card:y})};return ke({title:"スクショウ自動編成",meta:[{name:"twitter:title",content:"スクショウ自動編成"}]}),(y,t)=>{const N=me,b=Be,I=ie;return v(),x("div",We,[t[34]||(t[34]=e("h1",null,"スクショウ自動編成",-1)),j(N,{"note-text":o(l),"onUpdate:noteText":t[0]||(t[0]=s=>g(l)?l.value=s:null),center:o($),"onUpdate:center":t[1]||(t[1]=s=>g($)?$.value=s:null),offset:o(h),"onUpdate:offset":t[2]||(t[2]=s=>g(h)?h.value=s:null),"combo-offset":o(r),"onUpdate:comboOffset":t[3]||(t[3]=s=>g(r)?r.value=s:null),attribute:o(a),"onUpdate:attribute":t[4]||(t[4]=s=>g(a)?a.value=s:null),"mastery-level":o(u),"onUpdate:masteryLevel":t[5]||(t[5]=s=>g(u)?u.value=s:null)},null,8,["note-text","center","offset","combo-offset","attribute","mastery-level"]),e("div",He,[t[22]||(t[22]=e("div",{class:"card-header"}," メンバー ",-1)),e("div",Ee,[e("table",Xe,[e("thead",null,[e("tr",null,[e("th",Ye,[e("div",Ke,[t[18]||(t[18]=e("div",{style:{"margin-right":"8px"}}," カード ",-1)),e("div",Ge,[e("div",Je,[t[17]||(t[17]=e("div",{class:"input-group-prepend"},[e("span",{class:"input-group-text"},"検索")],-1)),C(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>g(B)?B.value=s:null),type:"text",class:"form-control"},null,512),[[Z,o(B)]])])])])]),t[19]||(t[19]=e("th",{scope:"col"},"スキルLv.",-1)),t[20]||(t[20]=e("th",{scope:"col"},"センタースキルLv.",-1)),t[21]||(t[21]=e("th",{scope:"col"},"選択",-1))])]),e("tbody",null,[(v(!0),x(A,null,q(o(F),s=>C((v(),ee(b,{key:s.key,card:s,"open-card-details-modal":Y,"onUpdate:skillLevel":K=>H(o(_)(s),K)},null,8,["card","onUpdate:skillLevel"])),[[ge,o(W)(s).toLowerCase().includes(o(B).toLowerCase())]])),128))])])])]),e("div",Qe,[t[33]||(t[33]=e("div",{class:"card-header"}," 計算 ",-1)),e("div",Ze,[e("div",et,[t[25]||(t[25]=M(" プレイスタイル： ",-1)),e("div",tt,[e("div",lt,[e("label",null,[C(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>g(d)?d.value=s:null),class:"form-check-input",type:"radio",value:"perfect"},null,512),[[T,o(d)]]),t[23]||(t[23]=M(" 渾身 ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:t[8]||(t[8]=s=>O("メンタルを100%以上に保つプレイ"))},[j(I,{icon:"circle-info"})])]),e("div",nt,[e("label",null,[C(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>g(d)?d.value=s:null),class:"form-check-input",type:"radio",value:"desperate"},null,512),[[T,o(d)]]),t[24]||(t[24]=M(" 背水 ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:t[10]||(t[10]=s=>O("メンタルを10%以下に保つプレイ"))},[j(I,{icon:"circle-info"})])])])]),e("div",ot,[t[28]||(t[28]=M(" 編成ルール ",-1)),e("div",st,[e("div",at,[e("label",null,[C(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>g(i)?i.value=s:null),class:"form-check-input",type:"radio",value:"current"},null,512),[[T,o(i)]]),t[26]||(t[26]=M(" 現状のルール ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:t[12]||(t[12]=s=>O(`・メンバー1人あたり1種類まで
・カード制限なし`))},[j(I,{icon:"circle-info"})])]),e("div",it,[e("label",null,[C(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>g(i)?i.value=s:null),class:"form-check-input",type:"radio",value:"new_grand_prix"},null,512),[[T,o(i)]]),t[27]||(t[27]=M(" 新ライグラルール ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:t[14]||(t[14]=s=>O(`・メンバー1人あたり2種類まで
・DRは1枚まで`))},[j(I,{icon:"circle-info"})])])])]),e("div",rt,[t[31]||(t[31]=M(" オプション： ",-1)),e("div",ut,[C(e("input",{id:"includingCenterOnly","onUpdate:modelValue":t[15]||(t[15]=s=>g(m)?m.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[se,o(m)]]),t[29]||(t[29]=e("label",{class:"form-check-label",for:"includingCenterOnly"}," センターのメンバーを含まない編成は計算しない ",-1))]),e("div",dt,[C(e("input",{id:"noLog","onUpdate:modelValue":t[16]||(t[16]=s=>g(z)?z.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[se,o(z)]]),t[30]||(t[30]=e("label",{class:"form-check-label",for:"noLog"}," ログを出力しない（効果大） ",-1))])]),o(c)!=="running"?(v(),x("button",{key:0,type:"button",class:"btn btn-primary",onClick:V}," 計算 ")):R("",!0),o(c)==="running"?(v(),x("button",{key:1,type:"button",class:"btn btn-primary",onClick:P}," 中止 ")):R("",!0),o(n)?(v(),x("div",ct,[e("p",null,U(o(c)==="running"?"計算中...":"計算完了"),1),e("div",pt,[e("div",ft,[e("p",null,"最高得点: "+U(o(n).score),1),t[32]||(t[32]=e("p",null,"メンバー:",-1)),e("ul",null,[(v(!0),x(A,null,q(o(n).members,s=>(v(),x("li",{key:o(_)(s)},U(o(W)(s)),1))),128))]),e("textarea",{class:"form-control",value:o(n).log,readonly:"",rows:"5"},null,8,vt)])])])):R("",!0)])]),(v(!0),x(A,null,q(o(E),(s,K)=>(v(),ee(xe(s.component),Q({key:`modal-${K}`,"on-close":s.onClose},{ref_for:!0},s.args),null,16,["on-close"]))),128))])}}});export{bt as default};
