import{m as tl,w as ol,x as $,u as Be,y as A,q as E,z as Me,e as nl,d as X,A as sl,j as al,s as Pe,f as rl,_ as il,b as dl,l as ul,B as vl,r as pl,C as ml,D as cl,n as fl}from"./DQIdGDvt.js";import{f as z,z as bl,A as pe,B as yl,C as kl,c as y,D as gl,E as Cl,G as Ll,H as _l,l as g,I as xe,o as b,a as e,F,n as O,j as C,t as L,m as t,v as j,q as wl,J as xl,p as R,_ as he,K as Fe,g as B,r as c,L as Sl,h as H,M as Ce,d as x,b as V,k as Oe,N as G,x as D,s as Q,O as q,P as Te,Q as $l,R as Vl,S as Ul,i as me,T as Ml,w as M,U as Le,V as _e,W as we,X as Ae,Y as Pl,u as Tl,y as Bl}from"./nSTCr0q7.js";const hl=Symbol.for("nuxt:client-only"),Fl=z({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(S,{slots:u,attrs:m}){const w=bl(!1);pe(()=>{w.value=!0});const _=gl();return _&&(_._nuxtClientOnly=!0),Cl(hl,!0),()=>{if(w.value){const v=u.default?.();return v&&v.length===1?[yl(v[0],m)]:v}const r=u.fallback||u.placeholder;if(r)return kl(r);const o=S.fallback||S.placeholder||"",i=S.fallbackTag||S.placeholderTag||"span";return y(i,m,o)}}}),Ol="$s";function Al(...S){const u=typeof S[S.length-1]=="string"?S.pop():void 0;typeof S[0]!="string"&&S.unshift(u);const[m,w]=S;if(!m||typeof m!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+m);if(w!==void 0&&typeof w!="function")throw new Error("[nuxt] [useState] init must be a function: "+w);const _=Ol+m,r=Ll(),o=_l(r.payload.state,_);if(o.value===void 0&&w){const i=w();if(g(i))return r.payload.state[_]=i,i;o.value=i}return o}const Dl={class:"card my-2"},Rl={class:"card-body"},ql={class:"row"},zl={class:"input-group"},Nl={class:"input-group-prepend"},El={class:"input-group-text",style:{width:"74px","justify-content":"center"}},jl=["onUpdate:modelValue"],Il=z({__name:"OSeasonFanLv",props:{seasonFanLvs:{required:!0},seasonFanLvsModifiers:{}},emits:["update:seasonFanLvs"],setup(S){const u=xe(S,"seasonFanLvs"),m=["kaho","sayaka","rurino","ginko","kosuzu","hime","ceras","izumi"];return(w,_)=>(b(),y("div",Dl,[_[0]||(_[0]=e("div",{class:"card-header"}," Season Fan Lv. ",-1)),e("div",Rl,[e("div",ql,[(b(),y(F,null,O(m,r=>e("div",{key:r,class:"col-12 col-sm-6 col-md-4 col-lg-3 mb-2"},[e("div",zl,[e("div",Nl,[e("div",El,[e("span",null,L(t(tl)[r]),1)])]),C(e("input",{"onUpdate:modelValue":o=>u.value[r]=o,type:"number",class:"form-control",min:"1",max:"10"},null,8,jl),[[j,u.value[r],void 0,{number:!0}]])])])),64))])])]))}}),Hl=Object.assign(Il,{__name:"OSeasonFanLv"}),Gl=z({__name:"AMarkSelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(S){const u=xe(S,"modelValue");return(m,w)=>C((b(),y("select",{"onUpdate:modelValue":w[0]||(w[0]=_=>u.value=_),class:R(["form-select marker-select",[u.value]])},w[1]||(w[1]=[xl('<option value="none" data-v-4055ea95>-</option><option value="heart" data-v-4055ea95>♥</option><option value="diamond" data-v-4055ea95>♦</option><option value="spade" data-v-4055ea95>♠</option><option value="club" data-v-4055ea95>♣</option>',5)]),2)),[[wl,u.value]])}}),Se=Object.assign(he(Gl,[["__scopeId","data-v-4055ea95"]]),{__name:"AMarkSelect"}),$e=ol(()=>({skillCaches:Fe(new Map)})),Wl=["rowspan"],Kl=["max"],Jl=["rowspan"],Xl={class:"row"},Ql={class:"col form-check-label"},Yl={class:"col form-check-label"},Zl={class:"col form-check-label"},et=["rowspan"],lt=["rowspan"],tt={class:"friend-row"},ot=["max"],nt={class:"friend-row"},st=z({__name:"MMemberRow",props:{card:{},isVisible:{type:Boolean},openCardDetailsModal:{type:Function}},emits:["update:skillLevel"],setup(S,{emit:u}){const m=S,w=u,_=B(()=>$(m.card)),r=c("optional"),o=Be(_,{level:A[m.card.rarity]||1,centerSkillLevel:10,skillLevel:10,friendLevel:A[m.card.rarity]||1,friendCenterSkillLevel:14,lbCount:1,selected:"optional",friendPosession:!1,mark:"none"}),{skillCaches:i}=$e();return pe(()=>{i.set(_.value,o)}),Sl(()=>{i.delete(_.value)}),o.value.level||(o.value.level=A[m.card.rarity]||1),o.value.lbCount||(o.value.lbCount=1),o.value.friendLevel||(o.value.friendLevel=A[m.card.rarity]||1),o.value.friendCenterSkillLevel||(o.value.friendCenterSkillLevel=14),o.value.mark||(o.value.mark="none"),H(r,v=>{o.value.selected!==v&&(o.value.selected=v)}),H(o,v=>{r.value!==v.selected&&(r.value=v.selected)}),H(B(()=>o.value.skillLevel),v=>{v>10&&(o.value.lbCount=Math.max(o.value.lbCount,v-9))}),H(B(()=>o.value.centerSkillLevel),v=>{v>10&&(o.value.lbCount=Math.max(o.value.lbCount,v-9))}),H(o,v=>{w("update:skillLevel",v)}),pe(()=>{r.value=o.value.selected||"optional",w("update:skillLevel",o.value)}),(v,n)=>{const f=Oe,p=Se;return b(),y(F,null,[C(e("tr",null,[e("td",{rowspan:t(o).friendPosession?2:1},[x(L(t(E)(v.card))+" ",1),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:n[0]||(n[0]=s=>v.openCardDetailsModal(v.card))},[V(f,{icon:"circle-info"})])],8,Wl),e("td",{class:R({"gained-ap":t(Me)(v.card,t(o).level)>0}),style:G({"border-bottom-width":t(o).friendPosession?"0px":"var(--bs-border-width)"})},L(v.card.ap+t(Me)(v.card,t(o).level)),7),e("td",{style:G({"border-bottom-width":t(o).friendPosession?"0px":"var(--bs-border-width)"})},[C(e("input",{"onUpdate:modelValue":n[1]||(n[1]=s=>t(o).level=s),class:R(["form-control",{"not-max":t(o).level!==t(A)[v.card.rarity]}]),type:"number",min:"1",max:t(A)[v.card.rarity],onChange:n[2]||(n[2]=s=>w("update:skillLevel",t(o)))},null,42,Kl),[[j,t(o).level,void 0,{number:!0}]])],4),e("td",{style:G({"border-bottom-width":t(o).friendPosession?"0px":"var(--bs-border-width)"})},[C(e("input",{"onUpdate:modelValue":n[3]||(n[3]=s=>t(o).skillLevel=s),class:R([[t(o).skillLevel>10?`level-exceeded-${t(o).skillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[j,t(o).skillLevel,void 0,{number:!0}]])],4),e("td",{style:G({"border-bottom-width":t(o).friendPosession?"0px":"var(--bs-border-width)"})},[C(e("input",{"onUpdate:modelValue":n[4]||(n[4]=s=>t(o).centerSkillLevel=s),class:R([[t(o).centerSkillLevel>10?`level-exceeded-${t(o).centerSkillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[j,t(o).centerSkillLevel,void 0,{number:!0}]])],4),e("td",{style:G({"border-bottom-width":t(o).friendPosession?"0px":"var(--bs-border-width)"})},[C(e("input",{"onUpdate:modelValue":n[5]||(n[5]=s=>t(o).lbCount=s),class:R(["form-control",[t(o).lbCount>1?`level-exceeded-${t(o).lbCount-1}`:""]]),type:"number",min:"1",max:"5"},null,2),[[j,t(o).lbCount,void 0,{number:!0}]])],4),e("td",{rowspan:t(o).friendPosession?2:1,class:R({"required-bg":t(r)==="required","excluded-bg":t(r)==="excluded"})},[e("div",Xl,[e("label",Ql,[C(e("input",{"onUpdate:modelValue":n[6]||(n[6]=s=>g(r)?r.value=s:null),class:"form-check-input",type:"radio",value:"required"},null,512),[[D,t(r)]]),n[13]||(n[13]=x(" 必須 ",-1))]),e("label",Yl,[C(e("input",{"onUpdate:modelValue":n[7]||(n[7]=s=>g(r)?r.value=s:null),class:"form-check-input",type:"radio",value:"optional"},null,512),[[D,t(r)]]),n[14]||(n[14]=x(" 任意 ",-1))]),e("label",Zl,[C(e("input",{"onUpdate:modelValue":n[8]||(n[8]=s=>g(r)?r.value=s:null),class:"form-check-input",type:"radio",value:"excluded"},null,512),[[D,t(r)]]),n[15]||(n[15]=x(" 除外 ",-1))])])],10,Jl),e("td",{rowspan:t(o).friendPosession?2:1,style:{"text-align":"center"}},[v.card.rarity!=="dr"&&v.card.rarity!=="dr2"?C((b(),y("input",{key:0,"onUpdate:modelValue":n[9]||(n[9]=s=>t(o).friendPosession=s),class:"form-check-input",type:"checkbox"},null,512)),[[q,t(o).friendPosession]]):Q("",!0)],8,et),e("td",{rowspan:t(o).friendPosession?2:1},[V(p,{modelValue:t(o).mark,"onUpdate:modelValue":n[10]||(n[10]=s=>t(o).mark=s)},null,8,["modelValue"])],8,lt)],512),[[Ce,v.isVisible]]),C(e("tr",null,[n[16]||(n[16]=e("td",{class:"p-0 position-relative"},[e("div",{class:"friend-row-start"},[e("div",null,"フレンド")])],-1)),e("td",tt,[C(e("input",{"onUpdate:modelValue":n[11]||(n[11]=s=>t(o).friendLevel=s),class:R([{"not-max":t(o).friendLevel!==t(A)[v.card.rarity]},"form-control"]),type:"number",min:"1",max:t(A)[v.card.rarity]},null,10,ot),[[j,t(o).friendLevel,void 0,{number:!0}]])]),n[17]||(n[17]=e("td",{class:"friend-row"},null,-1)),e("td",nt,[C(e("input",{"onUpdate:modelValue":n[12]||(n[12]=s=>t(o).friendCenterSkillLevel=s),class:R([[t(o).friendCenterSkillLevel>10?`level-exceeded-${t(o).friendCenterSkillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[Ce,t(o).friendPosession],[j,t(o).friendCenterSkillLevel,void 0,{number:!0}]])]),n[18]||(n[18]=e("td",{class:"p-0 position-relative"},[e("div",{class:"friend-row-end"})],-1))],512),[[Ce,v.isVisible&&t(o).friendPosession]])],64)}}}),at=Object.assign(he(st,[["__scopeId","data-v-870db6ec"]]),{__name:"MMemberRow"}),rt={class:"card my-2"},it={class:"card-body"},dt={class:"d-flex gap-2 align-items-center"},ut=z({__name:"OCardOperation",setup(S){const u=c("none"),{skillCaches:m}=$e(),w=()=>{m.forEach(n=>{n.value.mark===u.value&&(console.log("setSelectedMarkToRequired",n.value.mark),n.value={...n.value,selected:"required"})})},_=()=>{m.forEach(n=>{n.value.mark===u.value&&(n.value={...n.value,selected:"optional"})})},r=()=>{m.forEach(n=>{n.value.mark===u.value&&(n.value={...n.value,selected:"excluded"})})},o=()=>{confirm("マークをリセットしますか？")&&m.forEach(n=>{n.value={...n.value,mark:"none"}})},i=()=>{m.forEach(n=>{n.value={...n.value,friendPosession:!0}})},v=()=>{m.forEach(n=>{n.value={...n.value,friendPosession:!1}})};return(n,f)=>{const p=Se;return b(),y("div",rt,[f[3]||(f[3]=e("div",{class:"card-header"}," カード操作 ",-1)),e("div",it,[e("div",dt,[e("div",null,[V(p,{modelValue:t(u),"onUpdate:modelValue":f[0]||(f[0]=s=>g(u)?u.value=s:null),class:""},null,8,["modelValue"])]),f[1]||(f[1]=e("div",null,"をすべて",-1)),e("button",{class:"btn btn-primary",onClick:w},"必須に"),e("button",{class:"btn btn-primary",onClick:_},"任意に"),e("button",{class:"btn btn-primary",onClick:r},"除外に")]),e("div",{class:"mt-2"},[e("button",{class:"btn btn-primary",onClick:o},"マークリセット")]),e("div",{class:"mt-2 d-flex gap-2 align-items-center"},[f[2]||(f[2]=e("div",null,"フレンド所持状況：",-1)),e("button",{class:"btn btn-primary",onClick:i},"すべてON"),e("button",{class:"btn btn-primary",onClick:v},"すべてOFF")])])])}}}),vt=Object.assign(ut,{__name:"OCardOperation"}),pt=z({__name:"BTooltip",props:Te({interactive:{type:Boolean,default:void 0},body:{},bodyClass:{default:void 0},boundary:{},boundaryPadding:{},click:{type:Boolean,default:void 0},closeOnHide:{type:Boolean},focus:{type:Boolean,default:void 0},hover:{type:Boolean,default:void 0},delay:{default:0},floatingMiddleware:{default:void 0},hideMargin:{default:0},id:{default:void 0},inline:{type:Boolean,default:void 0},manual:{type:Boolean,default:void 0},noAutoClose:{type:Boolean,default:void 0},noFlip:{type:Boolean,default:void 0},noHide:{type:Boolean,default:void 0},noShift:{type:Boolean,default:void 0},noSize:{type:Boolean},noninteractive:{type:Boolean,default:void 0},offset:{default:void 0},placement:{default:void 0},realtime:{type:Boolean,default:void 0},reference:{default:void 0},strategy:{default:void 0},target:{default:void 0},title:{default:void 0},titleClass:{default:void 0},teleportDisabled:{type:Boolean,default:void 0},teleportTo:{default:void 0},initialAnimation:{type:Boolean,default:!1},noAnimation:{type:Boolean},noFade:{type:Boolean,default:void 0},lazy:{type:Boolean,default:void 0},unmountLazy:{type:Boolean,default:void 0},show:{type:Boolean,default:void 0},transProps:{},visible:{type:Boolean,default:void 0}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:Te(["pointerleave","blur","click-outside","close-on-hide","hide","hide-prevented","hidden","show","show-prevented","shown","toggle","toggle-prevented","cancel","ok"],["update:modelValue"]),setup(S,{expose:u,emit:m}){const _=$l(S,"BTooltip"),r=m,o=Vl(),i=xe(S,"modelValue"),v=B(()=>{const{interactive:f,noninteractive:p,...s}=_;return{noninteractive:p!==void 0?p:!f,...s}}),n=Ul("_popover");return u({hide:()=>{n.value?.hide()},show:()=>{n.value?.show()},toggle:()=>{n.value?.toggle()}}),(f,p)=>(b(),me(Pl,Ae({ref:"_popover"},v.value,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=s=>i.value=s),tooltip:"",onShow:p[1]||(p[1]=s=>r("show",s)),onShown:p[2]||(p[2]=s=>r("shown",s)),onHide:p[3]||(p[3]=s=>r("hide",s)),onHidden:p[4]||(p[4]=s=>r("hidden",s)),onHidePrevented:p[5]||(p[5]=s=>r("hide-prevented",s)),onShowPrevented:p[6]||(p[6]=s=>r("show-prevented",s)),onTogglePrevented:p[7]||(p[7]=s=>r("toggle-prevented",s)),onToggle:p[8]||(p[8]=s=>r("toggle",s)),onPointerleave:p[9]||(p[9]=s=>r("pointerleave",s)),onBlur:p[10]||(p[10]=s=>r("blur",s)),onClickOutside:p[11]||(p[11]=s=>r("click-outside",s)),onCloseOnHide:p[12]||(p[12]=s=>r("close-on-hide",s))}),Ml({_:2},[o.default?{name:"default",fn:M(s=>[Le(f.$slots,"default",_e(we(s)))]),key:"0"}:void 0,o.target?{name:"target",fn:M(s=>[Le(f.$slots,"target",_e(we(s)))]),key:"1"}:void 0,o.title?{name:"title",fn:M(s=>[Le(f.$slots,"title",_e(we(s)))]),key:"2"}:void 0]),1040,["modelValue"]))}}),J=["スコアには楽曲マスタリーレベルとボルテージレベルの補正が乗る。スキルによるスコア獲得にも乗る。","コンボによるAP獲得量ボーナスはスキルにも乗る。","DRとLR、及び地平シリーズのURは特殊なセンタースキルを持っている。強い。","「ボルテージPt.をXpt獲得／〜〜の時、ボルテージPt.をXpt獲得」みたいなスキルは、1番目のスキルにしか効果量増加が乗らない。","フィーバー中はボルテージ2倍になり獲得スコアも増加。スキルにも補正が乗るのでフィーバー中に発動できると強い。","ボルテージLv.7〜8（280〜449pt）のときに「[悠久の舞踏会] 大沢瑠璃乃」がループできると強い。","「[be proud] 乙宗梢」はスキルLv.12以上にすると手札からなくなるまでの回数が増えるので注意。","スキルLv.14の効果量はスキルLv.10の効果量の約1.5倍。切り捨ての関係でズレることはある。","フリックは実は下でも良い。","フレンドに設定したカードはレベルとセンタースキルレベルが利用される。フレンドカードに設定するカードは育成しておこう。"],mt={class:"card my-2"},ct={class:"card-body"},ft=z({__name:"OTips",setup(S){const u=Al("currentTipIndex",()=>Math.floor(Math.random()*J.length)),m=B(()=>J[u.value]),w=()=>{u.value=(u.value+1)%J.length},_=()=>{u.value=(u.value-1+J.length)%J.length};return(r,o)=>(b(),y("div",mt,[o[1]||(o[1]=e("div",{class:"card-header"}," Tips ",-1)),e("div",ct,[e("div",null," （No. "+L(t(u)+1)+"）"+L(t(m)),1),e("button",{type:"button",class:"btn btn-primary",onClick:_}," ＜前 "),o[0]||(o[0]=x("   ",-1)),e("button",{type:"button",class:"btn btn-primary",onClick:w}," 次＞ ")])]))}}),bt=Object.assign(ft,{__name:"OTips"}),yt={class:"mb-3"},kt={class:"my-2"},gt={class:"card my-2"},Ct={class:"card-body"},Lt={class:"table"},_t={class:"card my-2"},wt={class:"card-body"},xt={class:"table"},St={key:0,rowspan:"14"},$t={class:"card my-2"},Vt={class:"card-body"},Ut={class:"table"},Mt={class:"card my-2"},Pt={class:"card-body"},Tt=z({__name:"MdCardDetails",props:{onClose:{},card:{},displayLevel:{}},setup(S){const u=S,m=B(()=>Array.from({length:14},(o,i)=>nl(X(u.card,i+1,i+1)))),w=Fe(new Set([...sl[u.card.rarity].map(([o])=>o),u.displayLevel])),_=B(()=>Array.from(w).sort((o,i)=>o-i)),r=B(()=>_.value.map(o=>X(u.card,1,1,o)));return(o,i)=>{const v=il;return b(),me(v,{"on-close":o.onClose},{default:M(()=>[e("h3",yt,L(t(E)(o.card)),1),e("div",kt,[e("div",gt,[i[6]||(i[6]=e("div",{class:"card-header"}," ステータス ",-1)),e("div",Ct,[e("table",Lt,[e("thead",null,[e("tr",null,[i[1]||(i[1]=e("th",null,"ステータス",-1)),(b(!0),y(F,null,O(t(_),n=>(b(),y("th",{key:`status-${n}`}," Lv."+L(n),1))),128))])]),e("tbody",null,[e("tr",null,[i[2]||(i[2]=e("td",null,"スマイル",-1)),(b(!0),y(F,null,O(t(r),n=>(b(),y("td",{key:`status-smile-${n.key}`},L(n.smile),1))),128))]),e("tr",null,[i[3]||(i[3]=e("td",null,"ピュア",-1)),(b(!0),y(F,null,O(t(r),n=>(b(),y("td",{key:`status-pure-${n.key}`},L(n.pure),1))),128))]),e("tr",null,[i[4]||(i[4]=e("td",null,"クール",-1)),(b(!0),y(F,null,O(t(r),n=>(b(),y("td",{key:`status-cool-${n.key}`},L(n.cool),1))),128))]),e("tr",null,[i[5]||(i[5]=e("td",null,"メンタル",-1)),(b(!0),y(F,null,O(t(r),n=>(b(),y("td",{key:`status-mental-${n.key}`},L(n.mental),1))),128))])])])])]),e("div",_t,[i[8]||(i[8]=e("div",{class:"card-header"}," センタースキル ",-1)),e("div",wt,[e("table",xt,[i[7]||(i[7]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"発動条件"),e("th",null,"効果")])],-1)),e("tbody",null,[(b(!0),y(F,null,O(t(m),(n,f)=>(b(),y("tr",{key:`center-skill-${f}`},[e("td",null,L(f+1),1),f===0?(b(),y("td",St,L(t(al)(n.centerSkillCondition)),1)):Q("",!0),e("td",null,L(t(Pe)(n.centerSkills)),1)]))),128))])])])]),e("div",$t,[i[10]||(i[10]=e("div",{class:"card-header"}," スキル ",-1)),e("div",Vt,[e("table",Ut,[i[9]||(i[9]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"効果")])],-1)),e("tbody",null,[(b(!0),y(F,null,O(t(m),(n,f)=>(b(),y("tr",{key:`skill-${f}`},[e("td",null,L(f+1),1),e("td",null,L(t(Pe)(n.skills)),1)]))),128))])])])]),e("div",Mt,[i[11]||(i[11]=e("div",{class:"card-header"}," センター特性 ",-1)),e("div",Pt,L(t(rl)(t(m)[0].centerAbilities)),1)]),e("button",{class:"btn btn-primary",onClick:i[0]||(i[0]=n=>o.onClose(null))}," 閉じる ")])]),_:1},8,["on-close"])}}}),Bt=Object.assign(Tt,{__name:"MdCardDetails"}),ht={class:"container-md"},Ft={class:"card my-2"},Ot={class:"card-body"},At={class:"table"},Dt={scope:"col"},Rt={class:"d-flex align-items-end"},qt={class:""},zt={class:"input-group"},Nt={class:"input-group-prepend"},Et={class:"input-group-text"},jt={style:{"min-height":"1.5em"}},It={style:{"text-align":"right"}},Ht={class:"d-flex gap-3 justify-content-end"},Gt={class:"d-flex gap-2"},Wt=["disabled"],Kt={class:"card my-2"},Jt={class:"card-body"},Xt={class:"mb-2"},Qt={class:"row"},Yt={class:"col-auto"},Zt={style:{"vertical-align":"super","font-size":"0.8em"}},eo={class:"col-auto"},lo={style:{"vertical-align":"super","font-size":"0.8em"}},to={class:"col-auto"},oo={style:{"vertical-align":"super","font-size":"0.8em"}},no={class:"mb-2"},so={class:"row"},ao={class:"col-auto"},ro={style:{"vertical-align":"super","font-size":"0.8em"}},io={class:"col-auto"},uo={style:{"vertical-align":"super","font-size":"0.8em"}},vo={class:"mb-2"},po={class:"row"},mo={class:"col-auto"},co={class:"col-auto"},fo={class:"mb-2"},bo={class:"form-check"},yo={class:"form-check-label",for:"parallel"},ko={class:"form-check"},go={class:"form-check"},Co={class:"form-check"},Lo={class:"form-check"},_o={class:"form-check"},wo={class:"form-check"},xo={class:"form-check"},So={key:2},$o={class:"card my-2"},Vo={class:"card-body"},Uo=["value"],Mo={class:"d-flex gap-2 align-items-center"},Bo=z({__name:"auto-formation",setup(S){const u=c("finished"),m=c(void 0),w=async()=>{if(m.value)try{await m.value.release(),m.value=void 0}catch{}if("wakeLock"in navigator)try{m.value=await navigator.wakeLock.request("screen")}catch(d){console.error(d)}};H(u,async d=>{if(d==="finished")try{await m.value?.release(),m.value=void 0}catch{}});const _=c(""),r=c(""),o=c(0),i=c(0),v=c("smile"),n=c(50),f=c("perfect"),p=c("current"),s=c("score"),Y=c(!0),Z=c(!0),ee=c(!0),le=c(!0),te=c(!1),oe=c([]),ne=c(!0),se=c(!0),ae=c(!1),re=Be("seasonFanLvs",{kaho:1,sayaka:1,rurino:1,ginko:1,kosuzu:1,hime:1,ceras:1,izumi:1,kozue:1,tsuzuri:1,megumi:1}),ie=c(""),h=c([...dl]),U=c(Object.fromEntries(h.value.map(d=>[$(d),{level:A[d.rarity]||1,centerSkillLevel:10,skillLevel:10,friendLevel:A[d.rarity]||1,friendCenterSkillLevel:14,selected:"optional",friendPosession:!1}]))),De=(d,l)=>{U.value[d]=l},Re=B(()=>h.value.filter(d=>U.value[$(d)]?.selected==="required").length),qe=B(()=>h.value.filter(d=>U.value[$(d)]?.selected==="excluded").length),ze=B(()=>h.value.filter(d=>U.value[$(d)]?.selected==="optional").length),W=c([]),ce=c([]),fe=c(0),be=c(1);pe(()=>{be.value=navigator.hardwareConcurrency||4});const T=c(null),Ne=B(()=>ce.value.reduce((d,l)=>d+l,0)),Ve=c(Promise.resolve()),Ee=d=>{W.value=Array.from({length:d},()=>new Worker(new URL(""+new URL("calc-worker-parallel-BC8jGmHN.js",import.meta.url).href,import.meta.url),{type:"module"})),W.value.forEach((l,N)=>{l.onmessage=P=>{switch(P.data.message){case"calcScore":Ve.value=Ve.value.then(async()=>{P.data.data.score>(T.value?.score||0)&&(T.value={score:P.data.data.score,liveGrandPrixPt:P.data.data.liveGrandPrixPt,members:P.data.data.members,centerMember:P.data.data.centerMember,friendMember:P.data.data.friendMember,log:P.data.data.log})});break;case"progress":ce.value[N]=P.data.data.progress;break;case"end":fe.value++,fe.value===W.value.length&&(u.value="finished");break}}})},je=()=>{const d=Y.value?be.value:1;Ee(d),w(),T.value=null,ce.value=Array.from({length:d},()=>0),fe.value=0;const l=pl(_.value,o.value),N=h.value.filter(k=>U.value[$(k)]&&U.value[$(k)].selected==="required").map(k=>X(k,U.value[$(k)]?.skillLevel||10,U.value[$(k)]?.centerSkillLevel||10,U.value[$(k)]?.level||1));if(N.length>6){He("必須のメンバーが6人を超えています");return}const P=h.value.filter(k=>!U.value[$(k)]?.selected||U.value[$(k)].selected==="optional").map(k=>X(k,U.value[$(k)]?.skillLevel||10,U.value[$(k)]?.centerSkillLevel||10,U.value[$(k)]?.level||1)),ve=te.value?[]:h.value.filter(k=>U.value[$(k)]?.friendPosession).map(k=>X(k,10,U.value[$(k)]?.friendCenterSkillLevel||10,U.value[$(k)]?.friendLevel||1));u.value="running",W.value.forEach((k,ke)=>{k.postMessage(JSON.parse(JSON.stringify({requiredMembers:N,optionalMembers:P,friendMembers:ve,notes:l,center:r.value,attribute:v.value,masteryLevel:n.value,playStyle:f.value,formationRule:p.value,includingCenterOnly:ne.value,includeFriendOnlyCenter:Z.value,requireVolUpAndScoreUp:ee.value,requireScoreBuff:le.value,noLog:se.value,noDamagedFormation:ae.value,scoreComparisonRule:s.value,seasonFanLvs:re.value,singers:oe.value,batchNum:d,batchIndex:ke})))})},Ie=()=>{W.value.forEach(d=>{d.terminate()}),u.value="finished"},He=d=>{window.alert(d)},{modals:Ge,openModal:We}=ul(),Ke=async d=>{await We(Bt,{card:d,displayLevel:U.value[$(d)]?.level||1})},ye=c(null),Je=()=>{const d=ye.value?.files?.[0];if(d){const l=new FileReader;l.onload=N=>{const P=N.target?.result;h.value=h.value.concat(ml(P))},l.readAsText(d)}},Xe=c(null),Ue=c(!1),Qe=()=>{h.value=h.value.concat(cl),Ue.value=!0},de=c("none"),{skillCaches:I}=$e(),ue=B(()=>({spade:Array.from(I.values()).filter(d=>d.value.mark==="spade").length,heart:Array.from(I.values()).filter(d=>d.value.mark==="heart").length,diamond:Array.from(I.values()).filter(d=>d.value.mark==="diamond").length,club:Array.from(I.values()).filter(d=>d.value.mark==="club").length,none:Array.from(I.values()).filter(d=>d.value.mark==="none").length})),Ye=()=>{T.value?.members.forEach(d=>{const l=I.get($(d));l&&(l.value={...l.value,mark:de.value})})};return Tl({title:"スクショウ自動編成",meta:[{name:"twitter:title",content:"スクショウ自動編成"},{name:"description",content:"スクショウの編成を自動で計算します"}]}),vl(window,"beforeunload",d=>{if(u.value==="running")return d.preventDefault(),"計算中です"}),(d,l)=>{const N=fl,P=Hl,ve=Fl,k=Oe,ke=at,Ze=vt,K=pt,el=Se,ll=bt;return b(),y("div",ht,[l[73]||(l[73]=e("h1",null,"スクショウ自動編成",-1)),l[74]||(l[74]=e("a",{href:"https://note.com/asmape/n/nefd46574f4e3",target:"_blank"},"note",-1)),V(N,{"note-text":t(_),"onUpdate:noteText":l[0]||(l[0]=a=>g(_)?_.value=a:null),center:t(r),"onUpdate:center":l[1]||(l[1]=a=>g(r)?r.value=a:null),offset:t(o),"onUpdate:offset":l[2]||(l[2]=a=>g(o)?o.value=a:null),"combo-offset":t(i),"onUpdate:comboOffset":l[3]||(l[3]=a=>g(i)?i.value=a:null),attribute:t(v),"onUpdate:attribute":l[4]||(l[4]=a=>g(v)?v.value=a:null),"mastery-level":t(n),"onUpdate:masteryLevel":l[5]||(l[5]=a=>g(n)?n.value=a:null),singers:t(oe),"onUpdate:singers":l[6]||(l[6]=a=>g(oe)?oe.value=a:null)},null,8,["note-text","center","offset","combo-offset","attribute","mastery-level","singers"]),V(ve,null,{default:M(()=>[V(P,{"season-fan-lvs":t(re),"onUpdate:seasonFanLvs":l[7]||(l[7]=a=>g(re)?re.value=a:null)},null,8,["season-fan-lvs"])]),_:1}),e("div",Ft,[l[41]||(l[41]=e("div",{class:"card-header"}," メンバー ",-1)),e("div",Ot,[e("table",At,[e("thead",null,[e("tr",null,[e("th",Dt,[e("div",Rt,[l[27]||(l[27]=e("div",{style:{"margin-right":"8px"}}," カード ",-1)),e("div",qt,[e("div",zt,[e("div",Nt,[e("div",Et,[e("div",jt,[V(k,{icon:["fas","magnifying-glass"]})])])]),C(e("input",{"onUpdate:modelValue":l[8]||(l[8]=a=>g(ie)?ie.value=a:null),type:"text",class:"form-control"},null,512),[[j,t(ie)]])])])])]),l[28]||(l[28]=e("th",{scope:"col"},"AP",-1)),l[29]||(l[29]=e("th",{scope:"col"},"Lv.",-1)),l[30]||(l[30]=e("th",{scope:"col"},"Sk Lv.",-1)),l[31]||(l[31]=e("th",{scope:"col"},"CtSk Lv.",-1)),l[32]||(l[32]=e("th",{scope:"col"},"凸数",-1)),l[33]||(l[33]=e("th",{scope:"col"},"選択",-1)),l[34]||(l[34]=e("th",{scope:"col"},"フレンド",-1)),l[35]||(l[35]=e("th",{scope:"col"},"マーク",-1))])]),e("tbody",null,[V(ve,{"fallback-tag":"tr"},{default:M(()=>[(b(!0),y(F,null,O(t(h),a=>(b(),me(ke,{isVisible:t(E)(a).toLowerCase().includes(t(ie).toLowerCase()),key:t(E)(a),card:a,"open-card-details-modal":Ke,"onUpdate:skillLevel":ge=>De(t($)(a),ge)},null,8,["isVisible","card","onUpdate:skillLevel"]))),128))]),_:1})])]),e("div",It," 必須："+L(t(Re))+" 任意："+L(t(ze))+" 除外："+L(t(qe)),1),e("div",Ht,[e("div",null,[l[36]||(l[36]=e("span",{style:{color:"#ddbb00"}},"♥",-1)),x("："+L(t(ue).heart),1)]),e("div",null,[l[37]||(l[37]=e("span",{style:{color:"#6666dd"}},"♦",-1)),x("："+L(t(ue).diamond),1)]),e("div",null,[l[38]||(l[38]=e("span",{style:{color:"#888"}},"♠",-1)),x("："+L(t(ue).spade),1)]),e("div",null,[l[39]||(l[39]=e("span",{style:{color:"#ff88aa"}},"♣",-1)),x("："+L(t(ue).club),1)])]),e("div",Gt,[e("button",{type:"button",class:"btn btn-primary",onClick:l[9]||(l[9]=a=>t(ye)?.click())}," TSVインポート "),e("button",{type:"button",class:"btn btn-primary",disabled:t(Ue),onClick:l[10]||(l[10]=a=>Qe())}," 後衛カード追加 ",8,Wt)]),l[40]||(l[40]=e("div",null,[e("a",{href:"https://docs.google.com/spreadsheets/d/13moGCQN2fd9_kxc5g3M9go98Sw6Y8fO25nDxKFoDsDk/edit?gid=1837505339#gid=1837505339",target:"_blank"}," 後衛カード一覧 ")],-1)),e("input",{ref_key:"tsvFileInput",ref:ye,type:"file",class:"d-none",onChange:Je},null,544)])]),V(Ze),e("div",Kt,[l[72]||(l[72]=e("div",{class:"card-header"}," 計算 ",-1)),e("div",Jt,[e("div",Xt,[l[48]||(l[48]=x(" プレイスタイル： ",-1)),e("div",Qt,[e("div",Yt,[e("label",null,[C(e("input",{"onUpdate:modelValue":l[11]||(l[11]=a=>g(f)?f.value=a:null),class:"form-check-input",type:"radio",value:"perfect"},null,512),[[D,t(f)]]),l[42]||(l[42]=x(" 渾身 ",-1))]),V(K,null,{target:M(()=>[e("a",Zt,[V(k,{icon:"circle-info"})])]),default:M(()=>[l[43]||(l[43]=x(" フルコンを目指すプレイ ",-1))]),_:1,__:[43]})]),e("div",eo,[e("label",null,[C(e("input",{"onUpdate:modelValue":l[12]||(l[12]=a=>g(f)?f.value=a:null),class:"form-check-input",type:"radio",value:"desperate"},null,512),[[D,t(f)]]),l[44]||(l[44]=x(" 背水 ",-1))]),V(K,null,{target:M(()=>[e("a",lo,[V(k,{icon:"circle-info"})])]),default:M(()=>[l[45]||(l[45]=x(" メンタルが10%以下になるようミスをするプレイ ",-1))]),_:1,__:[45]})]),e("div",to,[e("label",null,[C(e("input",{"onUpdate:modelValue":l[13]||(l[13]=a=>g(f)?f.value=a:null),class:"form-check-input",type:"radio",value:"desperate1"},null,512),[[D,t(f)]]),l[46]||(l[46]=x(" 1%背水 ",-1))]),V(K,null,{target:M(()=>[e("a",oo,[V(k,{icon:"circle-info"})])]),default:M(()=>[l[47]||(l[47]=x(" メンタルが1%以下になるようミスをするプレイ。MISSのみで1%を達成できない編成は計算できません。 ",-1))]),_:1,__:[47]})])])]),e("div",no,[l[57]||(l[57]=x(" 編成ルール： ",-1)),e("div",so,[e("div",ao,[e("label",null,[C(e("input",{"onUpdate:modelValue":l[14]||(l[14]=a=>g(p)?p.value=a:null),class:"form-check-input",type:"radio",value:"current"},null,512),[[D,t(p)]]),l[49]||(l[49]=x(" 通常ルール ",-1))]),V(K,null,{target:M(()=>[e("a",ro,[V(k,{icon:"circle-info"})])]),default:M(()=>[l[50]||(l[50]=x(" ・メンバー1人あたり1種類まで",-1)),l[51]||(l[51]=e("br",null,null,-1)),l[52]||(l[52]=x(" ・カード制限なし ",-1))]),_:1,__:[50,51,52]})]),e("div",io,[e("label",null,[C(e("input",{"onUpdate:modelValue":l[15]||(l[15]=a=>g(p)?p.value=a:null),class:"form-check-input",type:"radio",value:"new_grand_prix"},null,512),[[D,t(p)]]),l[53]||(l[53]=x(" ライグラルール ",-1))]),V(K,null,{target:M(()=>[e("a",uo,[V(k,{icon:"circle-info"})])]),default:M(()=>[l[54]||(l[54]=x(" ・メンバー1人あたり2種類まで",-1)),l[55]||(l[55]=e("br",null,null,-1)),l[56]||(l[56]=x(" ・DRは1枚まで ",-1))]),_:1,__:[54,55,56]})])])]),e("div",vo,[l[60]||(l[60]=x(" スコア比較基準： ",-1)),e("div",po,[e("div",mo,[e("label",null,[C(e("input",{"onUpdate:modelValue":l[16]||(l[16]=a=>g(s)?s.value=a:null),class:"form-check-input",type:"radio",value:"score"},null,512),[[D,t(s)]]),l[58]||(l[58]=x(" スコア ",-1))])]),e("div",co,[e("label",null,[C(e("input",{"onUpdate:modelValue":l[17]||(l[17]=a=>g(s)?s.value=a:null),class:"form-check-input",type:"radio",value:"grandPrixPt"},null,512),[[D,t(s)]]),l[59]||(l[59]=x(" グランプリpt ",-1))])])])]),e("div",fo,[l[68]||(l[68]=x(" オプション： ",-1)),e("div",bo,[C(e("input",{id:"parallel","onUpdate:modelValue":l[18]||(l[18]=a=>g(Y)?Y.value=a:null),class:"form-check-input",type:"checkbox"},null,512),[[q,t(Y)]]),e("label",yo," マルチスレッド ("+L(t(be))+"スレッド) ",1)]),e("div",ko,[C(e("input",{id:"includingCenterOnly","onUpdate:modelValue":l[19]||(l[19]=a=>g(ne)?ne.value=a:null),class:"form-check-input",type:"checkbox"},null,512),[[q,t(ne)]]),l[61]||(l[61]=e("label",{class:"form-check-label",for:"includingCenterOnly"}," センターのメンバーを含まない編成は計算しない ",-1))]),e("div",go,[C(e("input",{id:"includeFriendOnlyCenter","onUpdate:modelValue":l[20]||(l[20]=a=>g(Z)?Z.value=a:null),class:"form-check-input",type:"checkbox"},null,512),[[q,t(Z)]]),l[62]||(l[62]=e("label",{class:"form-check-label",for:"includeFriendOnlyCenter"}," フレンドはセンターのメンバーのみ採用する ",-1))]),e("div",Co,[C(e("input",{id:"requireVolUpAndScoreUp","onUpdate:modelValue":l[21]||(l[21]=a=>g(ee)?ee.value=a:null),class:"form-check-input",type:"checkbox"},null,512),[[q,t(ee)]]),l[63]||(l[63]=e("label",{class:"form-check-label",for:"requireVolUpAndScoreUp"}," スキルにボルテージゲインとスコアアップを含まない編成は除外する ",-1))]),e("div",Lo,[C(e("input",{id:"requireScoreBuff","onUpdate:modelValue":l[22]||(l[22]=a=>g(le)?le.value=a:null),class:"form-check-input",type:"checkbox"},null,512),[[q,t(le)]]),l[64]||(l[64]=e("label",{class:"form-check-label",for:"requireScoreBuff"}," スキルにスコア獲得量アップを含まない編成は除外する ",-1))]),e("div",_o,[C(e("input",{id:"noLog","onUpdate:modelValue":l[23]||(l[23]=a=>g(se)?se.value=a:null),class:"form-check-input",type:"checkbox"},null,512),[[q,t(se)]]),l[65]||(l[65]=e("label",{class:"form-check-label",for:"noLog"}," ログを出力しない（効果大） ",-1))]),e("div",wo,[C(e("input",{id:"noDamagedFormation","onUpdate:modelValue":l[24]||(l[24]=a=>g(ae)?ae.value=a:null),class:"form-check-input",type:"checkbox"},null,512),[[q,t(ae)]]),l[66]||(l[66]=e("label",{class:"form-check-label",for:"noDamagedFormation"}," 途中でメンタルが100%未満になった場合計算を打ち切る（渾身選択時以外は自動で無効） ",-1))]),e("div",xo,[C(e("input",{id:"noConsiderFriend","onUpdate:modelValue":l[25]||(l[25]=a=>g(te)?te.value=a:null),class:"form-check-input",type:"checkbox"},null,512),[[q,t(te)]]),l[67]||(l[67]=e("label",{class:"form-check-label",for:"noConsiderFriend"}," フレンドなし固定 ",-1))])]),t(u)!=="running"?(b(),y("button",{key:0,type:"button",class:"btn btn-primary",onClick:je}," 計算 ")):Q("",!0),t(u)==="running"?(b(),y("button",{key:1,type:"button",class:"btn btn-primary",onClick:Ie}," 中止 ")):Q("",!0),t(T)?(b(),y("div",So,[e("p",{ref_key:"progressView",ref:Xe},L(t(u)==="running"?`計算中... ${t(Ne).toFixed(3)}%`:"計算完了"),513),e("div",$o,[e("div",Vo,[e("p",null,"最高得点: "+L(t(T).score)+" ("+L(t(T).liveGrandPrixPt)+"pt)",1),l[71]||(l[71]=e("p",null,"メンバー:",-1)),e("ul",null,[(b(!0),y(F,null,O(t(T).members,a=>(b(),y("li",{key:t($)(a),style:G({fontWeight:t(T).centerMember&&t(E)(a)===t(E)(t(T).centerMember)?"bold":"normal"})},L(t(E)(a)),5))),128))]),e("p",null,"フレンド: "+L(t(T).friendMember?t(E)(t(T).friendMember):"なし"),1),e("textarea",{class:"form-control",value:t(T).log,readonly:"",rows:"5"},null,8,Uo),e("div",Mo,[l[69]||(l[69]=e("div",null,"編成に使用したカードを",-1)),e("div",null,[V(el,{modelValue:t(de),"onUpdate:modelValue":l[26]||(l[26]=a=>g(de)?de.value=a:null),class:""},null,8,["modelValue"])]),l[70]||(l[70]=e("div",null,"にする",-1)),e("button",{class:"btn btn-primary",onClick:Ye},"実行")])])])])):Q("",!0)])]),V(ll),(b(!0),y(F,null,O(t(Ge),(a,ge)=>(b(),me(Bl(a.component),Ae({key:`modal-${ge}`,"on-close":a.onClose},{ref_for:!0},a.args),null,16,["on-close"]))),128))])}}});export{Bo as default};
