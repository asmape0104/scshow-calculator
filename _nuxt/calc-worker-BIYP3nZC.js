(function(){"use strict";const tt=t=>t.reduce((r,o)=>r+o.normalCount+o.slideCount,0),et=["kaho","sayaka","kozue","tsuzuri","rurino","megumi","ginko","kosuzu","hime","ceras","izumi","other"],b={kaho:"花帆",sayaka:"さやか",kozue:"梢",tsuzuri:"綴理",rurino:"瑠璃乃",megumi:"慈",ginko:"吟子",kosuzu:"小鈴",hime:"姫芽",ceras:"セラス",izumi:"泉",other:"その他"},lt={all:et,g102:["kozue","tsuzuri","megumi"],g103:["kaho","sayaka","rurino"],g104:["ginko","kosuzu","hime"],g105:["ceras"],cerise:["kaho","kozue","ginko"],dollche:["sayaka","tsuzuri","kosuzu"],miracra:["rurino","megumi","hime"],edel:["ceras","izumi"]},rt=t=>t<=2100?Math.floor((-5+Math.sqrt(25+20*t))/10):Math.floor(20+(t-2100)/200),I=(t,r,o)=>(1+t/100)*(1+r*(o?2:1)/10),D=t=>t<10?1:t<20?1.1:t<30?1.2:t<40?1.3:t<50?1.4:1.5,at=({notes:t,convertedMembers:r,center:o,appealSum:d,mentalSum:a,masteryLevel:u,playStyle:l="perfect",noLog:e=!1,noDamagedFormation:f=!1})=>{const c=r.find(n=>n.name===o),h=c?.centerSkillCondition,k=c?.centerSkills||[],g=c?.centerAbilities||[],x=g.find(n=>n.type==="cooltime_reduce"),E=g.find(n=>n.type==="ap_reduce"),R=5-Number(x?.value.amount||0),M=Number(E?.value.amount||0),w=r.slice();let A=R,y=0,i=a,s=0;const v={_point:0,_lv:0,get point(){return this._point},set point(n){this._point=n,this._lv=rt(n)},get lv(){return this._lv}},C=[0],F=[0];let N=0,Y=0;const Z=tt(t);let O=0,K=0;const W=new WeakMap,pt=60/Z;let V,m="";const j=(n,p,$)=>{const U=v.lv,_t=i*100/a;t:for(const _ of p){if(_.condition){const[z,q,G]=_.condition;let B=0;switch(z){case"skill_count":B=W.get(n)||0;break;case"total_skill_count":B=K;break;case"vol_lv":B=U*($?2:1);break;case"mental_rate":B=_t;break;default:throw new Error(`条件式が不正です: ${z}`)}if(G===void 0)throw new Error(`条件式が不正です: ${z}`);switch(q){case"<=":if(!(B<=G))continue t;break;case">=":if(!(B>=G))continue t;break}}switch(_.type){case"vol_buff":F[0]=(F[0]||0)+(_.value||0),e||(m+=`${b[n.name]} vol_buff: +${_.value}
`);break;case"vol_up":{const z=F[0]??0;F[0]=0,v.point+=Math.ceil((_.value||0)*(1+z/100)),e||(m+=`${b[n.name]} vol_up: +${Math.ceil((_.value||0)*(1+z/100))}
`,m+=`now voltagePoint: ${v.point}
`);break}case"vol_down":v.point-=_.value||0,v.point<0&&(v.point=0),e||(m+=`${b[n.name]} vol_down: -${_.value||0}
`);break;case"score_buff":C[0]=(C[0]||0)+(_.value||0),e||(m+=`${b[n.name]} score_buff: +${_.value}
`);break;case"score_up":{const z=C[0]??0;C[0]=0;const q=(_.value||0)/100*(1+z/100)*I(u,v.lv,$);s+=Math.ceil(d*q),e||(m+=`${b[n.name]} score_up: +${Math.ceil(d*q)}
`);break}case"mental_up":i+=Math.ceil((_.value||0)/100*a),e||(m+=`${b[n.name]} mental_up: +${Math.ceil((_.value||0)/100*a)}
`);break;case"mental_down":i-=Math.ceil((_.value||0)/100*a),e||(m+=`${b[n.name]} mental_down: -${Math.ceil((_.value||0)/100*a)}
`),i<=0&&(i=1);break;case"ap_up":y+=Math.ceil((_.value||0)*D(O)*1e4),e||(m+=`${b[n.name]} ap_up: +${(_.value||0)*D(O)}
`);break;case"ap_down":y-=(_.value||0)*1e4,e||(m+=`${b[n.name]} ap_down: -${_.value||0}
`);break;case"reset":N=w.length-1,e||(m+=`${b[n.name]} reset
`);break;case"splice":w.splice(w.indexOf(n),1),N--,e||(m+=`${b[n.name]} splice
`);break;default:throw new Error(`skill typeが不正です: ${_.type}`)}}};c&&h==="start"&&j(c,k,!1);const L=n=>{if(w.length===0)return!1;const p=w[N];if(!p)throw new Error("メンバーが見つかりません");const $=Math.max(p.ap-M,0);return $*1e4<=y&&A<=0?(y-=$*1e4,W.set(p,(W.get(p)||0)+1),K++,j(p,p.skills,n),N=w.length-1===N?0:N+1,A+=R,!0):!1};for(let n=0;n<t.length;n++){const p=t[n];if(V=t[n-1],!p)throw new Error("noteが見つかりません");for(A-=p.time-Y,Y=p.time;L(V?.fever||!1););A=Math.max(0,A),c&&p.fever&&!V?.fever&&h==="fever_start"&&(e||(m+=`FEVER START
`),j(c,k,!0)),!p.fever&&V?.fever&&(e||(m+=`FEVER END
`));for(let $=0;$<p.normalCount+p.slideCount;$++){if(l==="desperate"&&i*10>a){$<p.normalCount?i-=Math.ceil(a/15):i-=Math.ceil(a*2/75),e||(m+=`miss, apPoint: ${y}, mental: ${i}, vol_lv: ${v.lv*(p.fever?2:1)}
`);continue}O++,y+=Math.ceil(pt*D(O)*1e4),L(p.fever);const U=Math.ceil(d/Z*30*I(u,v.lv,p.fever));if(s+=U,e||(m+=`combo: ${O}, score: ${s} (+${U}), apPoint: ${y}, mental: ${i}, vol_lv: ${v.lv*(p.fever?2:1)}
`),l==="perfect"&&f&&i<a)return e||(m+=`メンタルが100%未満になったため計算を打ち切ります
`),{score:s,log:m}}}return c&&h==="end"&&j(c,k,!1),{score:s,log:m}};var ot=`key	series	other_name	smile	pure	cool	mental	rarity	center_skill_condition	raw_center_skill_text	raw_skill_text	ap	center_ability_text
other	蓮ノ空女学院スクールアイドルクラブ102期生	大賀美沙知	5880	5700	5700	480	ur			ap_up(10);skill_count>=3 ^ splice()	0	
rurino	悠久の舞踏会		4320	7800	5160	480	ur	fever_start	ap_up(8);vol_lv >= 4 ^ ap_up(8)	vol_lv <= 8 ^ vol_buff(326.25);vol_lv >= 7 ^ score_buff(435);mental_down(10*)	10	appeal_up(g103, 200);ap_reduce(all, 2)
rurino	アイドゥーミー！		6960	6360	5880	520	ur	fever_start	ap_up(20); mental_rate <= 99 ^ vol_down(1000*)	mental_up(10*); mental_rate >= 100 ^ ap_up(15); mental_rate <= 99 ^ vol_down(1000*); skill_count >= 3 ^ splice()	5	appeal_up(miracra, 200)
megumi	久遠の銀河へ		7200	4920	4800	510	ur	fever_start	score_up(204.75); skill_count >= 6 ^ score_up(286.65)	total_skill_count <= 9 ^ ap_up(15*); total_skill_count >= 10 ^ score_up(522)	10	appeal_up(g102, 200);ap_reduce(all, 2)
kaho	アイドゥーミー！		6000	6240	6960	520	ur	end	score_up(418.5)	mental_up(10*); mental_rate >= 100 ^ score_up(1134); mental_rate <= 99 ^ vol_down(1000*)	12	appeal_up(all, 72)
sayaka	アイドゥーミー！		6120	6960	6120	520	ur	fever_start	score_up(877.5); mental_rate <= 99 ^ vol_down(1000*)	skill_count <= 1 ^ vol_buff(78.75); skill_count >= 2 ^ score_buff(243); mental_rate >= 100 ^ vol_up(945); mental_rate <= 99 ^ vol_down(1000*)	14	appeal_up(dollche, 200)
kozue	輪廻の銀河へ		5160	4680	7440	480	ur	fever_start	ap_up(8); skill_count >= 6 ^ ap_up(8)	skill_count <= 3 ^ vol_buff(324); skill_count <= 3 ^ reset(); skill_count >= 4 ^ score_buff(324)	10	appeal_up(g102, 200);ap_reduce(all, 2)
ceras	16th Birthday		5760	5760	5760	480	br	start	ap_up(10)	ap_up(5); vol_buff(54.45); reset(); skill_count >= 3 ^ splice()	0	appeal_up(ceras, 400)
tsuzuri	幸せのリボン		5760	5160	8520	500	lr	fever_start	vol_up(478)	vol_up(731); skill_count >= 10 ^ vol_up(1170); lr_tsuzuri(); splice()	20	appeal_up(g102, 200); ap_reduce(all, 1); cooltime_reduce(2)
sayaka	真実の舞踏会		5160	4080	7920	490	ur	fever_start	vol_up(170); mental_rate >= 50 ^ vol_up(238)	vol_lv <= 8 ^ vol_up(326); vol_lv >= 7 ^ score_buff(558); vol_lv >= 7 ^ vol_down(50*)	10	appeal_up(g103, 200); ap_reduce(all, 2)
kaho	軌跡の舞踏会		7680	5760	3960	470	ur	end	score_up(204.75); vol_lv >= 4 ^ score_up(286.65)	vol_lv <= 8 ^ score_buff(243); vol_lv >= 7 ^ score_up(522)	10	appeal_up(g103, 200); ap_reduce(all, 2)
megumi	18th Birthday*		5760	5760	5760	480	br	fever_start	score_up(368.28); total_skill_count >= 6 ^ ap_up(8)	score_buff(123.75); vol_buff(123.75); skill_count <= 4 ^ ap_up(5*); skill_count <= 2 ^ ap_up(5*)	10	appeal_up(megumi, 400)
hime	BLAST!!		3720	7080	6240	500	ur	fever_start	mental_down(40*); score_up(326.25)	mental_rate >= 30 ^ mental_down(20*); mental_rate >= 30 ^ ap_up(8*); mental_rate >= 30 ^ score_buff(74.25); mental_rate <= 30 ^ score_up(918)	20	appeal_up(miracra, 200)
ginko	輝跡の舞踏会		4320	6720	6120	490	ur	fever_start	ap_up(8); vol_lv >= 4 ^ ap_up(8)	mental_rate <= 10 ^ score_buff(253.12); mental_rate <= 10 ^ vol_buff(253.12); mental_rate <= 10 ^ ap_up(10*); mental_down(50*)	10	appeal_up(g104, 200); ap_reduce(all, 2)
rurino	17th Birthday*		5760	5760	5760	480	br	fever_start	ap_up(12); mental_rate >= 50 ^ ap_up(8)	score_buff(123.75); vol_buff(123.75); mental_rate >= 50 ^ ap_up(5*); mental_rate >= 100 ^ ap_up(5*)	10	appeal_up(rurino, 400)
ceras	十六夜セレーネ		4560	5280	7320	490	ur	fever_start	vol_up(348)	vol_lv <= 8 ^ vol_up(243); vol_lv >= 7 ^ score_buff(324); skill_count <= 2 ^ reset()	12	appeal_up(edel, 200)
ceras	天地黎明		6960	6480	3840	480	ur	end	score_up(418.5)	skill_count <= 1 ^ vol_buff(697.5); skill_count >= 2 ^ score_up(502.2); skill_count >= 3 ^ ap_up(8)	17	appeal_up(all, 80)
kozue	奇跡の舞踏会		7200	5160	4920	480	ur	fever_start	ap_up(8); total_skill_count >= 6 ^ ap_up(8)	vol_lv <= 8 ^ vol_buff(243); vol_lv >= 7 ^ score_buff(324)	8	appeal_up(g102, 200); ap_reduce(all, 2)
ginko	37.5℃のファンタジー		6720	6120	4440	480	ur	start	mental_down(25); ap_up(5)	score_buff(170.62); mental_rate >= 30 ^ reset(); mental_rate <= 25 ^ ap_up(3)	7	appeal_up(all, 80)
izumi	天地黎明		7080	6240	3960	480	ur	start	vol_up(348)	skill_count <= 1 ^ score_buff(697.5); skill_count >= 2 ^ vol_up(418); skill_count >= 3 ^ ap_up(8)	18	appeal_up(all, 80)
kosuzu	アイマイメーデー		4200	6120	6960	480	ur	fever_start	vol_up(348)	vol_up(202); mental_rate >= 30 ^ mental_down(25); mental_rate <= 25 ^ vol_up(435); mental_rate <= 25 ^ splice()	8	appeal_up(all, 80)
kozue	Prism Echo		7200	6720	6240	640	dr	start	ap_up(18)	score_buff(204.75); vol_buff(204.75); splice(); dr_ap_up(5)	12	appeal_up(cerise, 160); ap_reduce(all, 2); cooltime_reduce(2)
kaho	Prism Echo		7680	7200	6240	560	dr	end	score_up(502.2)	score_up(1053); splice(); dr_ap_up(5)	20	appeal_up(cerise, 160); ap_reduce(all, 2); cooltime_reduce(2)
sayaka	Prism Echo		6240	7680	6720	600	dr	start	vol_up(418)	vol_up(877); splice(); dr_ap_up(5)	20	appeal_up(dollche, 160); ap_reduce(all, 2); cooltime_reduce(2)
tsuzuri	Prism Echo		6240	6720	7680	600	dr	start	vol_up(418)	vol_up(877); splice(); dr_ap_up(5)	20	appeal_up(dollche, 160); ap_reduce(all, 2); cooltime_reduce(2)
rurino	Prism Echo		6720	7200	6240	640	dr	start	ap_up(12); mental_up(100)	score_buff(204.75);vol_buff(204.75);splice();dr_ap_up(5)	12	appeal_up(miracra, 160); ap_reduce(all, 2); cooltime_reduce(2)
megumi	Prism Echo		7680	7200	6240	560	dr	end	score_up(502.2)	score_up(1053); splice(); dr_ap_up(5)	20	appeal_up(miracra, 160); ap_reduce(all, 2); cooltime_reduce(2)
other	Edelied	桂城泉＆セラス 柳田 リリエンフェルト	5040	5040	5040	420	sr			score_up(631.8)	20	
kosuzu	レディバグ		4440	5520	6840	520	ur	fever_start	vol_up(170); mental_rate <= 75 ^ vol_up(204)	vol_up(478)	15	appeal_up(all, 80)
kaho	Ether Aria		8640	6720	5640	570	dr	end	score_up(502.2)	score_up(502.2); mental_rate >= 100 ^ score_up(1010.88); splice(); dr_ap_up(5)	20	appeal_up(cerise, 160); ap_reduce(all, 2); cooltime_reduce(2)
kozue	Ether Aria		6480	6480	8160	560	dr	start	ap_up(18)	score_buff(326.25); skill_count <= 3 ^ reset(); dr_ap_up(1)	12	appeal_up(cerise, 160); ap_reduce(all, 2); cooltime_reduce(2)
ginko	Ether Aria		5520	7800	7440	590	dr	start	mental_down(90)	mental_rate <= 1 ^ score_buff(652.5); mental_down(90*); skill_count >= 2 ^ splice(); dr_ap_up(3)	10	appeal_up(cerise, 160); ap_reduce(all, 2); cooltime_reduce(2)
sayaka	Ether Aria		6120	6240	8400	590	dr	start	vol_up(418)	vol_up(418); mental_rate <= 10 ^ vol_up(842); splice(); dr_ap_up(5)	20	appeal_up(dollche, 160); ap_reduce(all, 2); cooltime_reduce(2)
tsuzuri	Ether Aria		6240	8400	6480	560	dr	start	vol_up(418)	vol_up(418); mental_rate <= 10 ^ vol_up(842); splice(); dr_ap_up(5)	20	appeal_up(dollche, 160); ap_reduce(all, 2); cooltime_reduce(2)
kosuzu	Ether Aria		7800	7440	5760	570	dr	start	vol_up(418)	vol_up(418); mental_rate <= 10 ^ vol_up(842); splice(); dr_ap_up(5)	20	appeal_up(dollche, 160); ap_reduce(all, 2); cooltime_reduce(2)
rurino	Ether Aria		6240	8280	6480	570	dr	fever_start	ap_up(12); mental_up(100)	score_buff(204.75); mental_rate >= 100 ^ score_buff(368.55); mental_up(100); splice(); dr_ap_up(5)	12	appeal_up(miracra, 160); ap_reduce(all, 2); cooltime_reduce(2)
megumi	Ether Aria		8160	6360	6120	600	dr	end	score_up(502.2)	score_up(502.2); total_skill_count >= 15 ^ score_up(1123.2); splice(); dr_ap_up(5)	20	appeal_up(miracra, 160); ap_reduce(all, 2); cooltime_reduce(2)
hime	Ether Aria		6600	6960	7440	570	dr	end	score_up(502.2)	score_up(502.2); mental_rate <= 10 ^ score_up(1010.88); splice(); dr_ap_up(5)	20	appeal_up(miracra, 160); ap_reduce(all, 2); cooltime_reduce(2)
hime	Oracle Étude		5280	8400	7320	570	dr	end	score_up(502.2)	score_up(502.2); mental_rate <= 1 ^ score_up(1512); mental_up(50); splice(); dr_ap_up(5)	20	appeal_up(hime, 320); ap_reduce(all, 2); cooltime_reduce(2)
rurino	Oracle Étude		6960	5400	8400	590	dr	fever_start	ap_up(12); mental_up(100)	vol_buff(204.75); mental_rate >= 100 ^ vol_buff(368.55); mental_up(50*); reset(); splice(); dr_ap_up(5)	12	appeal_up(rurino, 320); ap_reduce(all, 2); cooltime_reduce(2)
kosuzu	Oracle Étude		7080	8640	5040	590	dr	start	vol_up(418)	vol_up(418); mental_rate <= 1 ^ vol_up(1260); mental_rate >= 50 ^ vol_down(300*); splice(); dr_ap_up(5)	20	appeal_up(kosuzu, 320); ap_reduce(all, 2); cooltime_reduce(2)
kozue	be proud		8640	5640	5040	510	lr	start	ap_up(15)	vol_buff(112.5); reset(); lr_kozue()	5	appeal_up(g102, 200); ap_reduce(all, 1); cooltime_reduce(2)
megumi	やっぱ天使！		5580	8580	4800	540	lr	end	score_up(573.75)	score_up(326.25); total_skill_count >= 15 ^ score_buff(364.5); lr_megumi()	12	appeal_up(g102, 200); ap_reduce(all, 1); cooltime_reduce(2)`;const ut=t=>t.replace(/_([a-z])/g,(r,o)=>o.toUpperCase()),T=(t=>{const r=t.split(`
`),o=r[0].split("	");return r.slice(1).map(a=>a.split("	")).map(a=>o.reduce((u,l,e)=>(u={...u,[ut(l)]:a[e]===""||isNaN(Number(a[e]))?a[e]:Number(a[e])},u),{}))})(ot),nt=["<=",">="],H=Object.freeze({1:1,2:1.1,3:1.2,4:1.3,5:1.4,6:1.5,7:1.6,8:1.7,9:1.8,10:2,11:2.2,12:2.4,13:2.6,14:3}),S=Object.freeze({vol_buff:{unit:.01,fixed:2},vol_up:{unit:.01,fixed:2},vol_down:{unit:.01,fixed:2},score_up:{unit:.01,fixed:2},score_buff:{unit:.01,fixed:2},mental_up:{unit:5,fixed:0},mental_down:{unit:5,fixed:0},ap_up:{unit:1,fixed:0},ap_down:{unit:1,fixed:0}}),P=(t,r,o)=>{const d=t.rawSkillText.replace(/([\w_]+)\(([\d.]*)(?<no_change>\*?)\)/g,(u,l,e,f)=>{if(f)return`${l}(${e})`;if(l==="dr_ap_up")return`ap_up(${(r-10)*Number(e)})`;if(l==="lr_tsuzuri")return"skill_count <= 12 ^ ap_up(20)";if(l==="lr_kozue")return"skill_count >= 10 ^ splice()";if(l==="lr_megumi")return"ap_up(2)";if(!e)return`${l}()`;const c=Math.floor(Number(e)*H[r]/3/S[l].unit+1e-6)*S[l].unit;return`${l}(${c.toFixed(S[l].fixed)})`}),a=t.rawCenterSkillText.replace(/([\w_]+)\(([\d.]+)(?<no_change>\*?)\)/g,(u,l,e,f)=>{if(f)return`${l}(${e})`;const c=Math.floor(Number(e)*H[o]/3/S[l].unit+1e-6)*S[l].unit;return`${l}(${c.toFixed(S[l].fixed)})`});return{...t,name:t.key,skill:d,centerSkillCondition:t.centerSkillCondition,centerSkill:a}};P(T[0],14,14),P(T[6],14,14),P(T[5],14,14),P(T[7],14,14),P(T[4],14,14),P(T[1],14,14);const J=t=>{if(!t)return;const r=nt.find(o=>t?.includes(o));if(r){const[o,d]=t.split(r).map(a=>a.trim());return!o||!d?void 0:[o,r,Number(d)]}else return},ct=t=>{const r=[],o=[],d=[],a=t.skill.split(";").map(u=>u.trim());for(const u of a){if(!u)continue;const[l,e]=u.split("^").map(x=>x.trim()),f=e?l:void 0,c=e||l,[,h,k]=c.match(/^(\w+)\((.*)\)$/)||[],g={type:h,value:k?Number(k):void 0,condition:J(f)};r.push(g)}if(t.centerSkill){const u=t.centerSkill.split(";").map(l=>l.trim());for(const l of u){const[e,f]=l.split("^").map(E=>E.trim()),c=f?e:void 0,h=f||e,[,k,g]=h.match(/^(\w+)\((.*)\)$/)||[],x={type:k,value:g?Number(g):void 0,condition:J(c)};o.push(x)}}if(t.centerAbilityText){const u=t.centerAbilityText.split(";").map(l=>l.trim());for(const l of u){const[,e,f]=l.match(/^(\w+)\((.*)\)$/)||[],c=f?f.split(",").map(k=>k.trim()):[],h={type:e,value:e==="cooltime_reduce"?{target:"all",amount:Number(c[0])}:{target:c[0]||"all",amount:Number(c[1])}};d.push(h)}}return{...t,skills:r,centerSkills:o,centerAbilities:d}},it=(t,r)=>lt[r]?.includes(t)||t===r,st=(t,r,o)=>{const a=t.find(l=>l.name===o)?.centerAbilities.find(l=>l.type==="appeal_up"),u=t.reduce((l,e)=>{const f=a?it(e.name,a?.value.target):!1,c=Math.ceil(e.smile*(f?(100+(a?.value.amount||0))/100:1)),h=Math.ceil(e.pure*(f?(100+(a?.value.amount||0))/100:1)),k=Math.ceil(e.cool*(f?(100+(a?.value.amount||0))/100:1));return{smile:l.smile+c,pure:l.pure+h,cool:l.cool+k}},{smile:0,pure:0,cool:0});return u.smile=Math.round(u.smile/(r==="smile"?1:10)),u.pure=Math.round(u.pure/(r==="pure"?1:10)),u.cool=Math.round(u.cool/(r==="cool"?1:10)),u.smile+u.pure+u.cool};function*Q(t,r){if(r===0)yield[];else if(r===1)for(const o of t)yield[o];else for(let o=0;o<t.length-r+1;o++){const d=t.slice(o+1);for(const a of Q(d,r-1))yield[t[o],...a]}}function*X(t){if(t.length===1)yield t;else for(let r=0;r<t.length;r++){const o=t.slice(0,r).concat(t.slice(r+1));for(const d of X(o))yield[t[r],...d]}}self.onmessage=t=>{const{requiredMembers:r,optionalMembers:o,notes:d,center:a,attribute:u,masteryLevel:l,playStyle:e,formationRule:f,includingCenterOnly:c,noLog:h,noDamagedFormation:k}=t.data;let g=0;const x=6-r.length,E=new WeakMap;t:for(const R of Q(o,x)){const M=[...r,...R];if(c&&!M.some(i=>i.key===a))continue;switch(f){case"current":{if(new Set(M.map(s=>s.key!=="other"?s.key:s.otherName)).size!==6)continue t;break}case"new_grand_prix":{if(M.filter(v=>v.rarity==="dr").length>1)continue t;const s={};if(M.forEach(v=>{const C=v.key!=="other"?v.key:v.otherName;s[C]=(s[C]||0)+1}),Object.values(s).some(v=>v>=3))continue t;break}}const w=M.map(i=>{if(E.has(i))return E.get(i);const s=ct(i);return E.set(i,s),s}),A=st(w,u,a),y=M.reduce((i,s)=>i+s.mental,0);for(const i of X(w))try{const s=at({notes:d,convertedMembers:i,center:a,appealSum:A,mentalSum:y,masteryLevel:l,playStyle:e,noLog:h,noDamagedFormation:k});s.score>g&&(g=s.score,self.postMessage({message:"calcScore",data:{...s,members:i}}))}catch(s){console.error(s)}}self.postMessage({message:"end"})}})();
