import{m as He,r as Xe,t as w,u as Se,v as E,o as z,w as we,d as Qe,b as H,x as Ye,g as Ze,s as $e,e as el,_ as ll,a as tl,j as nl,y as ol,p as sl,z as al,A as rl,k as il}from"./9TpFcwXJ.js";import{f as j,z as ul,A as de,B as dl,C as vl,c as f,D as cl,E as pl,G as ml,H as fl,l as y,I as Ve,o as m,a as e,F,n as O,j as g,t as b,m as t,v as q,q as bl,J as kl,p as A,_ as Me,K as he,g as P,r as c,L as yl,h as B,M as ke,d as $,b as M,k as Ue,N as G,x as D,s as X,O as N,i as ye,w as ge,u as gl,P as Cl,y as _l}from"./DXgWr4Lz.js";const Ll=Symbol.for("nuxt:client-only"),xl=j({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(x,{slots:i,attrs:v}){const C=ul(!1);de(()=>{C.value=!0});const _=cl();return _&&(_._nuxtClientOnly=!0),pl(Ll,!0),()=>{if(C.value){const u=i.default?.();return u&&u.length===1?[dl(u[0],v)]:u}const d=i.fallback||i.placeholder;if(d)return vl(d);const n=x.fallback||x.placeholder||"",r=x.fallbackTag||x.placeholderTag||"span";return f(r,v,n)}}}),wl="$s";function $l(...x){const i=typeof x[x.length-1]=="string"?x.pop():void 0;typeof x[0]!="string"&&x.unshift(i);const[v,C]=x;if(!v||typeof v!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+v);if(C!==void 0&&typeof C!="function")throw new Error("[nuxt] [useState] init must be a function: "+C);const _=wl+v,d=ml(),n=fl(d.payload.state,_);if(n.value===void 0&&C){const r=C();if(y(r))return d.payload.state[_]=r,r;n.value=r}return n}const Sl={class:"card my-2"},Vl={class:"card-body"},Ml={class:"row"},hl={class:"input-group"},Ul={class:"input-group-prepend"},Fl={class:"input-group-text",style:{width:"74px","justify-content":"center"}},Pl=["onUpdate:modelValue"],Tl=j({__name:"OSeasonFanLv",props:{seasonFanLvs:{required:!0},seasonFanLvsModifiers:{}},emits:["update:seasonFanLvs"],setup(x){const i=Ve(x,"seasonFanLvs"),v=["kaho","sayaka","rurino","ginko","kosuzu","hime","ceras","izumi"];return(C,_)=>(m(),f("div",Sl,[_[0]||(_[0]=e("div",{class:"card-header"}," Season Fan Lv. ",-1)),e("div",Vl,[e("div",Ml,[(m(),f(F,null,O(v,d=>e("div",{key:d,class:"col-12 col-sm-6 col-md-4 col-lg-3 mb-2"},[e("div",hl,[e("div",Ul,[e("div",Fl,[e("span",null,b(t(He)[d]),1)])]),g(e("input",{"onUpdate:modelValue":n=>i.value[d]=n,type:"number",class:"form-control",min:"1",max:"10"},null,8,Pl),[[q,i.value[d],void 0,{number:!0}]])])])),64))])])]))}}),Ol=Object.assign(Tl,{__name:"OSeasonFanLv"}),Al=j({__name:"AMarkSelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(x){const i=Ve(x,"modelValue");return(v,C)=>g((m(),f("select",{"onUpdate:modelValue":C[0]||(C[0]=_=>i.value=_),class:A(["form-select marker-select",[i.value]])},C[1]||(C[1]=[kl('<option value="none" data-v-4055ea95>-</option><option value="heart" data-v-4055ea95>♥</option><option value="diamond" data-v-4055ea95>♦</option><option value="spade" data-v-4055ea95>♠</option><option value="club" data-v-4055ea95>♣</option>',5)]),2)),[[bl,i.value]])}}),Ce=Object.assign(Me(Al,[["__scopeId","data-v-4055ea95"]]),{__name:"AMarkSelect"}),_e=Xe(()=>({skillCaches:he(new Map)})),Dl=["rowspan"],Rl=["max"],Nl=["rowspan"],El={class:"row"},zl={class:"col form-check-label"},ql={class:"col form-check-label"},jl={class:"col form-check-label"},Il=["rowspan"],Bl=["rowspan"],Gl={class:"friend-row"},Kl={class:"friend-row"},Wl=j({__name:"MMemberRow",props:{card:{},isVisible:{type:Boolean},openCardDetailsModal:{type:Function}},emits:["update:skillLevel"],setup(x,{emit:i}){const v=x,C=i,_=P(()=>w(v.card)),d=c("optional"),n=Se(_,{level:E[v.card.rarity]||1,centerSkillLevel:10,skillLevel:10,friendLevel:E[v.card.rarity]||1,friendCenterSkillLevel:14,lbCount:1,selected:"optional",friendPosession:!1,mark:"none"}),{skillCaches:r}=_e();return de(()=>{r.set(_.value,n)}),yl(()=>{r.delete(_.value)}),n.value.level||(n.value.level=E[v.card.rarity]||1),n.value.lbCount||(n.value.lbCount=1),n.value.friendLevel||(n.value.friendLevel=E[v.card.rarity]||1),n.value.friendCenterSkillLevel||(n.value.friendCenterSkillLevel=14),n.value.mark||(n.value.mark="none"),B(d,u=>{n.value.selected!==u&&(n.value.selected=u)}),B(n,u=>{d.value!==u.selected&&(d.value=u.selected)}),B(P(()=>n.value.skillLevel),u=>{u>10&&(n.value.lbCount=Math.max(n.value.lbCount,u-9))}),B(P(()=>n.value.centerSkillLevel),u=>{u>10&&(n.value.lbCount=Math.max(n.value.lbCount,u-9))}),B(n,u=>{C("update:skillLevel",u)}),de(()=>{d.value=n.value.selected||"optional",C("update:skillLevel",n.value)}),(u,o)=>{const L=Ue,T=Ce;return m(),f(F,null,[g(e("tr",null,[e("td",{rowspan:t(n).friendPosession?2:1},[$(b(t(z)(u.card))+" ",1),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:o[0]||(o[0]=p=>u.openCardDetailsModal(u.card))},[M(L,{icon:"circle-info"})])],8,Dl),e("td",{class:A({"gained-ap":t(we)(u.card,t(n).level)>0}),style:G({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},b(u.card.ap+t(we)(u.card,t(n).level)),7),e("td",{style:G({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},[g(e("input",{"onUpdate:modelValue":o[1]||(o[1]=p=>t(n).level=p),class:A(["form-control",{"not-max":t(n).level!==t(E)[u.card.rarity]}]),type:"number",min:"1",max:t(E)[u.card.rarity],onChange:o[2]||(o[2]=p=>C("update:skillLevel",t(n)))},null,42,Rl),[[q,t(n).level,void 0,{number:!0}]])],4),e("td",{style:G({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},[g(e("input",{"onUpdate:modelValue":o[3]||(o[3]=p=>t(n).skillLevel=p),class:A([[t(n).skillLevel>10?`level-exceeded-${t(n).skillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[q,t(n).skillLevel,void 0,{number:!0}]])],4),e("td",{style:G({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},[g(e("input",{"onUpdate:modelValue":o[4]||(o[4]=p=>t(n).centerSkillLevel=p),class:A([[t(n).centerSkillLevel>10?`level-exceeded-${t(n).centerSkillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[q,t(n).centerSkillLevel,void 0,{number:!0}]])],4),e("td",{style:G({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},[g(e("input",{"onUpdate:modelValue":o[5]||(o[5]=p=>t(n).lbCount=p),class:A(["form-control",[t(n).lbCount>1?`level-exceeded-${t(n).lbCount-1}`:""]]),type:"number",min:"1",max:"5"},null,2),[[q,t(n).lbCount,void 0,{number:!0}]])],4),e("td",{rowspan:t(n).friendPosession?2:1,class:A({"required-bg":t(d)==="required","excluded-bg":t(d)==="excluded"})},[e("div",El,[e("label",zl,[g(e("input",{"onUpdate:modelValue":o[6]||(o[6]=p=>y(d)?d.value=p:null),class:"form-check-input",type:"radio",value:"required"},null,512),[[D,t(d)]]),o[13]||(o[13]=$(" 必須 ",-1))]),e("label",ql,[g(e("input",{"onUpdate:modelValue":o[7]||(o[7]=p=>y(d)?d.value=p:null),class:"form-check-input",type:"radio",value:"optional"},null,512),[[D,t(d)]]),o[14]||(o[14]=$(" 任意 ",-1))]),e("label",jl,[g(e("input",{"onUpdate:modelValue":o[8]||(o[8]=p=>y(d)?d.value=p:null),class:"form-check-input",type:"radio",value:"excluded"},null,512),[[D,t(d)]]),o[15]||(o[15]=$(" 除外 ",-1))])])],10,Nl),e("td",{rowspan:t(n).friendPosession?2:1,style:{"text-align":"center"}},[u.card.rarity!=="dr"&&u.card.rarity!=="dr2"?g((m(),f("input",{key:0,"onUpdate:modelValue":o[9]||(o[9]=p=>t(n).friendPosession=p),class:"form-check-input",type:"checkbox"},null,512)),[[N,t(n).friendPosession]]):X("",!0)],8,Il),e("td",{rowspan:t(n).friendPosession?2:1},[M(T,{modelValue:t(n).mark,"onUpdate:modelValue":o[10]||(o[10]=p=>t(n).mark=p)},null,8,["modelValue"])],8,Bl)],512),[[ke,u.isVisible]]),g(e("tr",null,[o[16]||(o[16]=e("td",{class:"p-0 position-relative"},[e("div",{class:"friend-row-start"},[e("div",null,"フレンド")])],-1)),e("td",Gl,[g(e("input",{"onUpdate:modelValue":o[11]||(o[11]=p=>t(n).friendLevel=p),class:A([[t(n).friendLevel>10?`level-exceeded-${t(n).friendLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[q,t(n).friendLevel,void 0,{number:!0}]])]),o[17]||(o[17]=e("td",{class:"friend-row"},null,-1)),e("td",Kl,[g(e("input",{"onUpdate:modelValue":o[12]||(o[12]=p=>t(n).friendCenterSkillLevel=p),class:A([[t(n).friendCenterSkillLevel>10?`level-exceeded-${t(n).friendCenterSkillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[ke,t(n).friendPosession],[q,t(n).friendCenterSkillLevel,void 0,{number:!0}]])]),o[18]||(o[18]=e("td",{class:"p-0 position-relative"},[e("div",{class:"friend-row-end"})],-1))],512),[[ke,u.isVisible&&t(n).friendPosession]])],64)}}}),Jl=Object.assign(Me(Wl,[["__scopeId","data-v-584a6242"]]),{__name:"MMemberRow"}),Hl={class:"card my-2"},Xl={class:"card-body"},Ql={class:"d-flex gap-2 align-items-center"},Yl=j({__name:"OCardOperation",setup(x){const i=c("none"),{skillCaches:v}=_e(),C=()=>{v.forEach(o=>{o.value.mark===i.value&&(console.log("setSelectedMarkToRequired",o.value.mark),o.value={...o.value,selected:"required"})})},_=()=>{v.forEach(o=>{o.value.mark===i.value&&(o.value={...o.value,selected:"optional"})})},d=()=>{v.forEach(o=>{o.value.mark===i.value&&(o.value={...o.value,selected:"excluded"})})},n=()=>{confirm("マークをリセットしますか？")&&v.forEach(o=>{o.value={...o.value,mark:"none"}})},r=()=>{v.forEach(o=>{o.value={...o.value,friendPosession:!0}})},u=()=>{v.forEach(o=>{o.value={...o.value,friendPosession:!1}})};return(o,L)=>{const T=Ce;return m(),f("div",Hl,[L[3]||(L[3]=e("div",{class:"card-header"}," カード操作 ",-1)),e("div",Xl,[e("div",Ql,[e("div",null,[M(T,{modelValue:t(i),"onUpdate:modelValue":L[0]||(L[0]=p=>y(i)?i.value=p:null),class:""},null,8,["modelValue"])]),L[1]||(L[1]=e("div",null,"をすべて",-1)),e("button",{class:"btn btn-primary",onClick:C},"必須に"),e("button",{class:"btn btn-primary",onClick:_},"任意に"),e("button",{class:"btn btn-primary",onClick:d},"除外に")]),e("div",{class:"mt-2"},[e("button",{class:"btn btn-primary",onClick:n},"マークリセット")]),e("div",{class:"mt-2 d-flex gap-2 align-items-center"},[L[2]||(L[2]=e("div",null,"フレンド所持状況：",-1)),e("button",{class:"btn btn-primary",onClick:r},"すべてON"),e("button",{class:"btn btn-primary",onClick:u},"すべてOFF")])])])}}}),Zl=Object.assign(Yl,{__name:"OCardOperation"}),J=["スコアには楽曲マスタリーレベルとボルテージレベルの補正が乗る。スキルによるスコア獲得にも乗る。","コンボによるAP獲得量ボーナスはスキルにも乗る。","DRとLRは特殊なセンタースキルを持っている。強い。","「ボルテージPt.をXpt獲得／〜〜の時、ボルテージPt.をXpt獲得」みたいなスキルは、1番目のスキルにしか効果量増加が乗らない。","フィーバー中はボルテージ2倍になり獲得スコアも増加。スキルにも補正が乗るのでフィーバー中に発動できると強い。","ボルテージLv.7〜8（280〜449pt）のときに「[悠久の舞踏会] 大沢瑠璃乃」がループできると強い。","「[be proud] 乙宗梢」はスキルLv.12以上にすると手札からなくなるまでの回数が増えるので注意。","スキルLv.14の効果量はスキルLv.10の効果量の約1.5倍。切り捨ての関係でズレることはある。","フリックは実は下でも良い。"],et={class:"card my-2"},lt={class:"card-body"},tt=j({__name:"OTips",setup(x){const i=$l("currentTipIndex",()=>Math.floor(Math.random()*J.length)),v=P(()=>J[i.value]),C=()=>{i.value=(i.value+1)%J.length},_=()=>{i.value=(i.value-1+J.length)%J.length};return(d,n)=>(m(),f("div",et,[n[1]||(n[1]=e("div",{class:"card-header"}," Tips ",-1)),e("div",lt,[e("div",null," （No. "+b(t(i)+1)+"）"+b(t(v)),1),e("button",{type:"button",class:"btn btn-primary",onClick:_}," ＜前 "),n[0]||(n[0]=$("   ",-1)),e("button",{type:"button",class:"btn btn-primary",onClick:C}," 次＞ ")])]))}}),nt=Object.assign(tt,{__name:"OTips"}),ot={class:"mb-3"},st={class:"my-2"},at={class:"card my-2"},rt={class:"card-body"},it={class:"table"},ut={class:"card my-2"},dt={class:"card-body"},vt={class:"table"},ct={key:0,rowspan:"14"},pt={class:"card my-2"},mt={class:"card-body"},ft={class:"table"},bt={class:"card my-2"},kt={class:"card-body"},yt=j({__name:"MdCardDetails",props:{onClose:{},card:{},displayLevel:{}},setup(x){const i=x,v=P(()=>Array.from({length:14},(n,r)=>Qe(H(i.card,r+1,r+1)))),C=he(new Set([...Ye[i.card.rarity].map(([n])=>n),i.displayLevel])),_=P(()=>Array.from(C).sort((n,r)=>n-r)),d=P(()=>_.value.map(n=>H(i.card,1,1,n)));return(n,r)=>{const u=ll;return m(),ye(u,{"on-close":n.onClose},{default:ge(()=>[e("h3",ot,b(t(z)(n.card)),1),e("div",st,[e("div",at,[r[6]||(r[6]=e("div",{class:"card-header"}," ステータス ",-1)),e("div",rt,[e("table",it,[e("thead",null,[e("tr",null,[r[1]||(r[1]=e("th",null,"ステータス",-1)),(m(!0),f(F,null,O(t(_),o=>(m(),f("th",{key:`status-${o}`}," Lv."+b(o),1))),128))])]),e("tbody",null,[e("tr",null,[r[2]||(r[2]=e("td",null,"スマイル",-1)),(m(!0),f(F,null,O(t(d),o=>(m(),f("td",{key:`status-smile-${o.key}`},b(o.smile),1))),128))]),e("tr",null,[r[3]||(r[3]=e("td",null,"ピュア",-1)),(m(!0),f(F,null,O(t(d),o=>(m(),f("td",{key:`status-pure-${o.key}`},b(o.pure),1))),128))]),e("tr",null,[r[4]||(r[4]=e("td",null,"クール",-1)),(m(!0),f(F,null,O(t(d),o=>(m(),f("td",{key:`status-cool-${o.key}`},b(o.cool),1))),128))]),e("tr",null,[r[5]||(r[5]=e("td",null,"メンタル",-1)),(m(!0),f(F,null,O(t(d),o=>(m(),f("td",{key:`status-mental-${o.key}`},b(o.mental),1))),128))])])])])]),e("div",ut,[r[8]||(r[8]=e("div",{class:"card-header"}," センタースキル ",-1)),e("div",dt,[e("table",vt,[r[7]||(r[7]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"発動条件"),e("th",null,"効果")])],-1)),e("tbody",null,[(m(!0),f(F,null,O(t(v),(o,L)=>(m(),f("tr",{key:`center-skill-${L}`},[e("td",null,b(L+1),1),L===0?(m(),f("td",ct,b(t(Ze)(o.centerSkillCondition)),1)):X("",!0),e("td",null,b(t($e)(o.centerSkills)),1)]))),128))])])])]),e("div",pt,[r[10]||(r[10]=e("div",{class:"card-header"}," スキル ",-1)),e("div",mt,[e("table",ft,[r[9]||(r[9]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"効果")])],-1)),e("tbody",null,[(m(!0),f(F,null,O(t(v),(o,L)=>(m(),f("tr",{key:`skill-${L}`},[e("td",null,b(L+1),1),e("td",null,b(t($e)(o.skills)),1)]))),128))])])])]),e("div",bt,[r[11]||(r[11]=e("div",{class:"card-header"}," センター特性 ",-1)),e("div",kt,b(t(el)(t(v)[0].centerAbilities)),1)]),e("button",{class:"btn btn-primary",onClick:r[0]||(r[0]=o=>n.onClose(null))}," 閉じる ")])]),_:1},8,["on-close"])}}}),gt=Object.assign(yt,{__name:"MdCardDetails"}),Ct={class:"container-md"},_t={class:"card my-2"},Lt={class:"card-body"},xt={class:"table"},wt={scope:"col"},$t={class:"d-flex align-items-end"},St={class:""},Vt={class:"input-group"},Mt={class:"input-group-prepend"},ht={class:"input-group-text"},Ut={style:{"min-height":"1.5em"}},Ft={style:{"text-align":"right"}},Pt={class:"d-flex gap-3 justify-content-end"},Tt={class:"d-flex gap-2"},Ot=["disabled"],At={class:"card my-2"},Dt={class:"card-body"},Rt={class:"mb-2"},Nt={class:"row"},Et={class:"col-auto"},zt={class:"col-auto"},qt={class:"mb-2"},jt={class:"row"},It={class:"col-auto"},Bt={class:"col-auto"},Gt={class:"mb-2"},Kt={class:"row"},Wt={class:"col-auto"},Jt={class:"col-auto"},Ht={class:"mb-2"},Xt={class:"form-check"},Qt={class:"form-check-label",for:"parallel"},Yt={class:"form-check"},Zt={class:"form-check"},en={class:"form-check"},ln={class:"form-check"},tn={class:"form-check"},nn={class:"form-check"},on={key:2},sn={class:"card my-2"},an={class:"card-body"},rn=["value"],un={class:"d-flex gap-2 align-items-center"},cn=j({__name:"auto-formation",setup(x){const i=c("finished"),v=c(void 0),C=async()=>{if(v.value)try{await v.value.release(),v.value=void 0}catch{}if("wakeLock"in navigator)try{v.value=await navigator.wakeLock.request("screen")}catch(a){console.error(a)}};B(i,async a=>{if(a==="finished")try{await v.value?.release(),v.value=void 0}catch{}});const _=c(""),d=c(""),n=c(0),r=c(0),u=c("smile"),o=c(50),L=c("perfect"),T=c("current"),p=c("score"),Q=c(!0),Y=c(!0),Z=c(!1),ee=c([]),le=Se("seasonFanLvs",{kaho:1,sayaka:1,rurino:1,ginko:1,kosuzu:1,hime:1,ceras:1,izumi:1,kozue:1,tsuzuri:1,megumi:1}),te=c(""),ne=c(!0),oe=c(!0),se=c(!1),ae=c(!1),U=c([...tl]),S=c(Object.fromEntries(U.value.map(a=>[w(a),{level:E[a.rarity]||1,centerSkillLevel:10,skillLevel:10,friendLevel:E[a.rarity]||1,friendCenterSkillLevel:14,selected:"optional",friendPosession:!1}]))),Fe=(a,l)=>{S.value[a]=l},Pe=P(()=>U.value.filter(a=>S.value[w(a)]?.selected==="required").length),Te=P(()=>U.value.filter(a=>S.value[w(a)]?.selected==="excluded").length),Oe=P(()=>U.value.filter(a=>S.value[w(a)]?.selected==="optional").length),K=c([]),ve=c([]),ce=c(0),pe=c(1);de(()=>{pe.value=navigator.hardwareConcurrency||4});const h=c(null),Ae=P(()=>ve.value.reduce((a,l)=>a+l,0)),Le=c(Promise.resolve()),De=a=>{K.value=Array.from({length:a},()=>new Worker(new URL(""+new URL("calc-worker-parallel-DhdTVa44.js",import.meta.url).href,import.meta.url),{type:"module"})),K.value.forEach((l,R)=>{l.onmessage=V=>{switch(V.data.message){case"calcScore":Le.value=Le.value.then(async()=>{V.data.data.score>(h.value?.score||0)&&(h.value={score:V.data.data.score,liveGrandPrixPt:V.data.data.liveGrandPrixPt,members:V.data.data.members,centerMember:V.data.data.centerMember,friendMember:V.data.data.friendMember,log:V.data.data.log})});break;case"progress":ve.value[R]=V.data.data.progress;break;case"end":ce.value++,ce.value===K.value.length&&(i.value="finished");break}}})},Re=()=>{const a=Q.value?pe.value:1;De(a),C(),h.value=null,ve.value=Array.from({length:a},()=>0),ce.value=0;const l=sl(_.value,n.value),R=U.value.filter(k=>S.value[w(k)]&&S.value[w(k)].selected==="required").map(k=>H(k,S.value[w(k)]?.skillLevel||10,S.value[w(k)]?.centerSkillLevel||10,S.value[w(k)]?.level||1));if(R.length>6){W("必須のメンバーが6人を超えています");return}const V=U.value.filter(k=>!S.value[w(k)]?.selected||S.value[w(k)].selected==="optional").map(k=>H(k,S.value[w(k)]?.skillLevel||10,S.value[w(k)]?.centerSkillLevel||10,S.value[w(k)]?.level||1)),ue=Z.value?[]:U.value.filter(k=>S.value[w(k)]?.friendPosession).map(k=>H(k,10,S.value[w(k)]?.friendCenterSkillLevel||10,S.value[w(k)]?.friendLevel||1));i.value="running",K.value.forEach((k,fe)=>{k.postMessage(JSON.parse(JSON.stringify({requiredMembers:R,optionalMembers:V,friendMembers:ue,notes:l,center:d.value,attribute:u.value,masteryLevel:o.value,playStyle:L.value,formationRule:T.value,includingCenterOnly:ne.value,includeFriendOnlyCenter:Y.value,noLog:oe.value,noDamagedFormation:se.value,noCuredFormation:ae.value,scoreComparisonRule:p.value,seasonFanLvs:le.value,singers:ee.value,batchNum:a,batchIndex:fe})))})},Ne=()=>{K.value.forEach(a=>{a.terminate()}),i.value="finished"},W=a=>{window.alert(a)},{modals:Ee,openModal:ze}=nl(),qe=async a=>{await ze(gt,{card:a,displayLevel:S.value[w(a)]?.level||1})},me=c(null),je=()=>{const a=me.value?.files?.[0];if(a){const l=new FileReader;l.onload=R=>{const V=R.target?.result;U.value=U.value.concat(al(V))},l.readAsText(a)}},Ie=c(null),xe=c(!1),Be=()=>{U.value=U.value.concat(rl),xe.value=!0},re=c("none"),{skillCaches:I}=_e(),ie=P(()=>({spade:Array.from(I.values()).filter(a=>a.value.mark==="spade").length,heart:Array.from(I.values()).filter(a=>a.value.mark==="heart").length,diamond:Array.from(I.values()).filter(a=>a.value.mark==="diamond").length,club:Array.from(I.values()).filter(a=>a.value.mark==="club").length,none:Array.from(I.values()).filter(a=>a.value.mark==="none").length})),Ge=()=>{h.value?.members.forEach(a=>{const l=I.get(w(a));l&&(l.value={...l.value,mark:re.value})})};return gl({title:"スクショウ自動編成",meta:[{name:"twitter:title",content:"スクショウ自動編成"},{name:"description",content:"スクショウの編成を自動で計算します"}]}),ol(window,"beforeunload",a=>{if(i.value==="running")return a.preventDefault(),"計算中です"}),(a,l)=>{const R=il,V=Ol,ue=xl,k=Ue,fe=Jl,Ke=Zl,We=Ce,Je=nt;return m(),f("div",Ct,[l[64]||(l[64]=e("h1",null,"スクショウ自動編成",-1)),l[65]||(l[65]=e("a",{href:"https://note.com/asmape/n/nefd46574f4e3",target:"_blank"},"note",-1)),M(R,{"note-text":t(_),"onUpdate:noteText":l[0]||(l[0]=s=>y(_)?_.value=s:null),center:t(d),"onUpdate:center":l[1]||(l[1]=s=>y(d)?d.value=s:null),offset:t(n),"onUpdate:offset":l[2]||(l[2]=s=>y(n)?n.value=s:null),"combo-offset":t(r),"onUpdate:comboOffset":l[3]||(l[3]=s=>y(r)?r.value=s:null),attribute:t(u),"onUpdate:attribute":l[4]||(l[4]=s=>y(u)?u.value=s:null),"mastery-level":t(o),"onUpdate:masteryLevel":l[5]||(l[5]=s=>y(o)?o.value=s:null),singers:t(ee),"onUpdate:singers":l[6]||(l[6]=s=>y(ee)?ee.value=s:null)},null,8,["note-text","center","offset","combo-offset","attribute","mastery-level","singers"]),M(ue,null,{default:ge(()=>[M(V,{"season-fan-lvs":t(le),"onUpdate:seasonFanLvs":l[7]||(l[7]=s=>y(le)?le.value=s:null)},null,8,["season-fan-lvs"])]),_:1}),e("div",_t,[l[43]||(l[43]=e("div",{class:"card-header"}," メンバー ",-1)),e("div",Lt,[e("table",xt,[e("thead",null,[e("tr",null,[e("th",wt,[e("div",$t,[l[29]||(l[29]=e("div",{style:{"margin-right":"8px"}}," カード ",-1)),e("div",St,[e("div",Vt,[e("div",Mt,[e("div",ht,[e("div",Ut,[M(k,{icon:["fas","magnifying-glass"]})])])]),g(e("input",{"onUpdate:modelValue":l[8]||(l[8]=s=>y(te)?te.value=s:null),type:"text",class:"form-control"},null,512),[[q,t(te)]])])])])]),l[30]||(l[30]=e("th",{scope:"col"},"AP",-1)),l[31]||(l[31]=e("th",{scope:"col"},"Lv.",-1)),l[32]||(l[32]=e("th",{scope:"col"},"Sk Lv.",-1)),l[33]||(l[33]=e("th",{scope:"col"},"CtSk Lv.",-1)),l[34]||(l[34]=e("th",{scope:"col"},"凸数",-1)),l[35]||(l[35]=e("th",{scope:"col"},"選択",-1)),l[36]||(l[36]=e("th",{scope:"col"},"フレンド",-1)),l[37]||(l[37]=e("th",{scope:"col"},"マーク",-1))])]),e("tbody",null,[M(ue,{"fallback-tag":"tr"},{default:ge(()=>[(m(!0),f(F,null,O(t(U),s=>(m(),ye(fe,{isVisible:t(z)(s).toLowerCase().includes(t(te).toLowerCase()),key:t(z)(s),card:s,"open-card-details-modal":qe,"onUpdate:skillLevel":be=>Fe(t(w)(s),be)},null,8,["isVisible","card","onUpdate:skillLevel"]))),128))]),_:1})])]),e("div",Ft," 必須："+b(t(Pe))+" 任意："+b(t(Oe))+" 除外："+b(t(Te)),1),e("div",Pt,[e("div",null,[l[38]||(l[38]=e("span",{style:{color:"#ddbb00"}},"♥",-1)),$("："+b(t(ie).heart),1)]),e("div",null,[l[39]||(l[39]=e("span",{style:{color:"#6666dd"}},"♦",-1)),$("："+b(t(ie).diamond),1)]),e("div",null,[l[40]||(l[40]=e("span",{style:{color:"#888"}},"♠",-1)),$("："+b(t(ie).spade),1)]),e("div",null,[l[41]||(l[41]=e("span",{style:{color:"#ff88aa"}},"♣",-1)),$("："+b(t(ie).club),1)])]),e("div",Tt,[e("button",{type:"button",class:"btn btn-primary",onClick:l[9]||(l[9]=s=>t(me)?.click())}," TSVインポート "),e("button",{type:"button",class:"btn btn-primary",disabled:t(xe),onClick:l[10]||(l[10]=s=>Be())}," 後衛カード追加 ",8,Ot)]),l[42]||(l[42]=e("div",null,[e("a",{href:"https://docs.google.com/spreadsheets/d/13moGCQN2fd9_kxc5g3M9go98Sw6Y8fO25nDxKFoDsDk/edit?gid=1837505339#gid=1837505339",target:"_blank"}," 後衛カード一覧 ")],-1)),e("input",{ref_key:"tsvFileInput",ref:me,type:"file",class:"d-none",onChange:je},null,544)])]),M(Ke),e("div",At,[l[63]||(l[63]=e("div",{class:"card-header"}," 計算 ",-1)),e("div",Dt,[e("div",Rt,[l[46]||(l[46]=$(" プレイスタイル： ",-1)),e("div",Nt,[e("div",Et,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[11]||(l[11]=s=>y(L)?L.value=s:null),class:"form-check-input",type:"radio",value:"perfect"},null,512),[[D,t(L)]]),l[44]||(l[44]=$(" 渾身 ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[12]||(l[12]=s=>W("フルコンを目指すプレイ"))},[M(k,{icon:"circle-info"})])]),e("div",zt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[13]||(l[13]=s=>y(L)?L.value=s:null),class:"form-check-input",type:"radio",value:"desperate"},null,512),[[D,t(L)]]),l[45]||(l[45]=$(" 背水 ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[14]||(l[14]=s=>W("メンタルが10%以下になるようミスをするプレイ"))},[M(k,{icon:"circle-info"})])])])]),e("div",qt,[l[49]||(l[49]=$(" 編成ルール： ",-1)),e("div",jt,[e("div",It,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[15]||(l[15]=s=>y(T)?T.value=s:null),class:"form-check-input",type:"radio",value:"current"},null,512),[[D,t(T)]]),l[47]||(l[47]=$(" 通常ルール ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[16]||(l[16]=s=>W(`・メンバー1人あたり1種類まで
・カード制限なし`))},[M(k,{icon:"circle-info"})])]),e("div",Bt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[17]||(l[17]=s=>y(T)?T.value=s:null),class:"form-check-input",type:"radio",value:"new_grand_prix"},null,512),[[D,t(T)]]),l[48]||(l[48]=$(" ライグラルール ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[18]||(l[18]=s=>W(`・メンバー1人あたり2種類まで
・DRは1枚まで`))},[M(k,{icon:"circle-info"})])])])]),e("div",Gt,[l[52]||(l[52]=$(" スコア比較基準： ",-1)),e("div",Kt,[e("div",Wt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[19]||(l[19]=s=>y(p)?p.value=s:null),class:"form-check-input",type:"radio",value:"score"},null,512),[[D,t(p)]]),l[50]||(l[50]=$(" スコア ",-1))])]),e("div",Jt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[20]||(l[20]=s=>y(p)?p.value=s:null),class:"form-check-input",type:"radio",value:"grandPrixPt"},null,512),[[D,t(p)]]),l[51]||(l[51]=$(" グランプリpt ",-1))])])])]),e("div",Ht,[l[59]||(l[59]=$(" オプション： ",-1)),e("div",Xt,[g(e("input",{id:"parallel","onUpdate:modelValue":l[21]||(l[21]=s=>y(Q)?Q.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(Q)]]),e("label",Qt," マルチスレッド ("+b(t(pe))+"スレッド) ",1)]),e("div",Yt,[g(e("input",{id:"includingCenterOnly","onUpdate:modelValue":l[22]||(l[22]=s=>y(ne)?ne.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(ne)]]),l[53]||(l[53]=e("label",{class:"form-check-label",for:"includingCenterOnly"}," センターのメンバーを含まない編成は計算しない ",-1))]),e("div",Zt,[g(e("input",{id:"includeFriendOnlyCenter","onUpdate:modelValue":l[23]||(l[23]=s=>y(Y)?Y.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(Y)]]),l[54]||(l[54]=e("label",{class:"form-check-label",for:"includeFriendOnlyCenter"}," フレンドはセンターのメンバーのみ採用する ",-1))]),e("div",en,[g(e("input",{id:"noLog","onUpdate:modelValue":l[24]||(l[24]=s=>y(oe)?oe.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(oe)]]),l[55]||(l[55]=e("label",{class:"form-check-label",for:"noLog"}," ログを出力しない（効果大） ",-1))]),e("div",ln,[g(e("input",{id:"noDamagedFormation","onUpdate:modelValue":l[25]||(l[25]=s=>y(se)?se.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(se)]]),l[56]||(l[56]=e("label",{class:"form-check-label",for:"noDamagedFormation"}," 途中でメンタルが100%未満になった場合計算を打ち切る（渾身選択時以外は自動で無効） ",-1))]),e("div",tn,[g(e("input",{id:"noCuredFormation","onUpdate:modelValue":l[26]||(l[26]=s=>y(ae)?ae.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(ae)]]),l[57]||(l[57]=e("label",{class:"form-check-label",for:"noCuredFormation"}," 途中でメンタルが10%超になった場合計算を打ち切る（背水選択時以外は自動で無効） ",-1))]),e("div",nn,[g(e("input",{id:"noConsiderFriend","onUpdate:modelValue":l[27]||(l[27]=s=>y(Z)?Z.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(Z)]]),l[58]||(l[58]=e("label",{class:"form-check-label",for:"noConsiderFriend"}," フレンドなし固定 ",-1))])]),t(i)!=="running"?(m(),f("button",{key:0,type:"button",class:"btn btn-primary",onClick:Re}," 計算 ")):X("",!0),t(i)==="running"?(m(),f("button",{key:1,type:"button",class:"btn btn-primary",onClick:Ne}," 中止 ")):X("",!0),t(h)?(m(),f("div",on,[e("p",{ref_key:"progressView",ref:Ie},b(t(i)==="running"?`計算中... ${t(Ae).toFixed(2)}%`:"計算完了"),513),e("div",sn,[e("div",an,[e("p",null,"最高得点: "+b(t(h).score)+" ("+b(t(h).liveGrandPrixPt)+"pt)",1),l[62]||(l[62]=e("p",null,"メンバー:",-1)),e("ul",null,[(m(!0),f(F,null,O(t(h).members,s=>(m(),f("li",{key:t(w)(s),style:G({fontWeight:t(h).centerMember&&t(z)(s)===t(z)(t(h).centerMember)?"bold":"normal"})},b(t(z)(s)),5))),128))]),e("p",null,"フレンド: "+b(t(h).friendMember?t(z)(t(h).friendMember):"なし"),1),e("textarea",{class:"form-control",value:t(h).log,readonly:"",rows:"5"},null,8,rn),e("div",un,[l[60]||(l[60]=e("div",null,"編成に使用したカードを",-1)),e("div",null,[M(We,{modelValue:t(re),"onUpdate:modelValue":l[28]||(l[28]=s=>y(re)?re.value=s:null),class:""},null,8,["modelValue"])]),l[61]||(l[61]=e("div",null,"にする",-1)),e("button",{class:"btn btn-primary",onClick:Ge},"実行")])])])])):X("",!0)])]),M(Je),(m(!0),f(F,null,O(t(Ee),(s,be)=>(m(),ye(_l(s.component),Cl({key:`modal-${be}`,"on-close":s.onClose},{ref_for:!0},s.args),null,16,["on-close"]))),128))])}}});export{cn as default};
