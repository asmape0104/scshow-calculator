import{m as Xe,w as Qe,x as w,u as Ve,y as A,q as E,z as $e,e as Ye,d as J,A as Ze,j as el,s as Se,f as ll,_ as tl,b as nl,l as ol,B as sl,r as al,C as rl,D as il,n as ul}from"./BahvYJvC.js";import{f as j,z as dl,A as ve,B as vl,C as cl,c as f,D as pl,E as ml,G as fl,H as bl,l as k,I as Ue,o as m,a as e,F as P,n as O,j as y,t as g,m as t,v as z,q as kl,J as yl,p as q,_ as Me,K as he,g as F,r as c,L as gl,h as G,M as ye,d as $,b as V,k as Pe,N as K,x as D,s as X,O as R,i as ge,w as Ce,u as Cl,P as Ll,y as xl}from"./B7KdM9ZF.js";const _l=Symbol.for("nuxt:client-only"),wl=j({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(_,{slots:i,attrs:v}){const L=dl(!1);ve(()=>{L.value=!0});const x=pl();return x&&(x._nuxtClientOnly=!0),ml(_l,!0),()=>{if(L.value){const u=i.default?.();return u&&u.length===1?[vl(u[0],v)]:u}const d=i.fallback||i.placeholder;if(d)return cl(d);const n=_.fallback||_.placeholder||"",r=_.fallbackTag||_.placeholderTag||"span";return f(r,v,n)}}}),$l="$s";function Sl(..._){const i=typeof _[_.length-1]=="string"?_.pop():void 0;typeof _[0]!="string"&&_.unshift(i);const[v,L]=_;if(!v||typeof v!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+v);if(L!==void 0&&typeof L!="function")throw new Error("[nuxt] [useState] init must be a function: "+L);const x=$l+v,d=fl(),n=bl(d.payload.state,x);if(n.value===void 0&&L){const r=L();if(k(r))return d.payload.state[x]=r,r;n.value=r}return n}const Vl={class:"card my-2"},Ul={class:"card-body"},Ml={class:"row"},hl={class:"input-group"},Pl={class:"input-group-prepend"},Fl={class:"input-group-text",style:{width:"74px","justify-content":"center"}},Tl=["onUpdate:modelValue"],Ol=j({__name:"OSeasonFanLv",props:{seasonFanLvs:{required:!0},seasonFanLvsModifiers:{}},emits:["update:seasonFanLvs"],setup(_){const i=Ue(_,"seasonFanLvs"),v=["kaho","sayaka","rurino","ginko","kosuzu","hime","ceras","izumi"];return(L,x)=>(m(),f("div",Vl,[x[0]||(x[0]=e("div",{class:"card-header"}," Season Fan Lv. ",-1)),e("div",Ul,[e("div",Ml,[(m(),f(P,null,O(v,d=>e("div",{key:d,class:"col-12 col-sm-6 col-md-4 col-lg-3 mb-2"},[e("div",hl,[e("div",Pl,[e("div",Fl,[e("span",null,g(t(Xe)[d]),1)])]),y(e("input",{"onUpdate:modelValue":n=>i.value[d]=n,type:"number",class:"form-control",min:"1",max:"10"},null,8,Tl),[[z,i.value[d],void 0,{number:!0}]])])])),64))])])]))}}),Al=Object.assign(Ol,{__name:"OSeasonFanLv"}),Dl=j({__name:"AMarkSelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(_){const i=Ue(_,"modelValue");return(v,L)=>y((m(),f("select",{"onUpdate:modelValue":L[0]||(L[0]=x=>i.value=x),class:q(["form-select marker-select",[i.value]])},L[1]||(L[1]=[yl('<option value="none" data-v-4055ea95>-</option><option value="heart" data-v-4055ea95>♥</option><option value="diamond" data-v-4055ea95>♦</option><option value="spade" data-v-4055ea95>♠</option><option value="club" data-v-4055ea95>♣</option>',5)]),2)),[[kl,i.value]])}}),Le=Object.assign(Me(Dl,[["__scopeId","data-v-4055ea95"]]),{__name:"AMarkSelect"}),xe=Qe(()=>({skillCaches:he(new Map)})),ql=["rowspan"],Rl=["max"],Nl=["rowspan"],El={class:"row"},zl={class:"col form-check-label"},jl={class:"col form-check-label"},Bl={class:"col form-check-label"},Il=["rowspan"],Gl=["rowspan"],Kl={class:"friend-row"},Wl=["max"],Hl={class:"friend-row"},Jl=j({__name:"MMemberRow",props:{card:{},isVisible:{type:Boolean},openCardDetailsModal:{type:Function}},emits:["update:skillLevel"],setup(_,{emit:i}){const v=_,L=i,x=F(()=>w(v.card)),d=c("optional"),n=Ve(x,{level:A[v.card.rarity]||1,centerSkillLevel:10,skillLevel:10,friendLevel:A[v.card.rarity]||1,friendCenterSkillLevel:14,lbCount:1,selected:"optional",friendPosession:!1,mark:"none"}),{skillCaches:r}=xe();return ve(()=>{r.set(x.value,n)}),gl(()=>{r.delete(x.value)}),n.value.level||(n.value.level=A[v.card.rarity]||1),n.value.lbCount||(n.value.lbCount=1),n.value.friendLevel||(n.value.friendLevel=A[v.card.rarity]||1),n.value.friendCenterSkillLevel||(n.value.friendCenterSkillLevel=14),n.value.mark||(n.value.mark="none"),G(d,u=>{n.value.selected!==u&&(n.value.selected=u)}),G(n,u=>{d.value!==u.selected&&(d.value=u.selected)}),G(F(()=>n.value.skillLevel),u=>{u>10&&(n.value.lbCount=Math.max(n.value.lbCount,u-9))}),G(F(()=>n.value.centerSkillLevel),u=>{u>10&&(n.value.lbCount=Math.max(n.value.lbCount,u-9))}),G(n,u=>{L("update:skillLevel",u)}),ve(()=>{d.value=n.value.selected||"optional",L("update:skillLevel",n.value)}),(u,o)=>{const C=Pe,T=Le;return m(),f(P,null,[y(e("tr",null,[e("td",{rowspan:t(n).friendPosession?2:1},[$(g(t(E)(u.card))+" ",1),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:o[0]||(o[0]=p=>u.openCardDetailsModal(u.card))},[V(C,{icon:"circle-info"})])],8,ql),e("td",{class:q({"gained-ap":t($e)(u.card,t(n).level)>0}),style:K({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},g(u.card.ap+t($e)(u.card,t(n).level)),7),e("td",{style:K({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},[y(e("input",{"onUpdate:modelValue":o[1]||(o[1]=p=>t(n).level=p),class:q(["form-control",{"not-max":t(n).level!==t(A)[u.card.rarity]}]),type:"number",min:"1",max:t(A)[u.card.rarity],onChange:o[2]||(o[2]=p=>L("update:skillLevel",t(n)))},null,42,Rl),[[z,t(n).level,void 0,{number:!0}]])],4),e("td",{style:K({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},[y(e("input",{"onUpdate:modelValue":o[3]||(o[3]=p=>t(n).skillLevel=p),class:q([[t(n).skillLevel>10?`level-exceeded-${t(n).skillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[z,t(n).skillLevel,void 0,{number:!0}]])],4),e("td",{style:K({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},[y(e("input",{"onUpdate:modelValue":o[4]||(o[4]=p=>t(n).centerSkillLevel=p),class:q([[t(n).centerSkillLevel>10?`level-exceeded-${t(n).centerSkillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[z,t(n).centerSkillLevel,void 0,{number:!0}]])],4),e("td",{style:K({"border-bottom-width":t(n).friendPosession?"0px":"var(--bs-border-width)"})},[y(e("input",{"onUpdate:modelValue":o[5]||(o[5]=p=>t(n).lbCount=p),class:q(["form-control",[t(n).lbCount>1?`level-exceeded-${t(n).lbCount-1}`:""]]),type:"number",min:"1",max:"5"},null,2),[[z,t(n).lbCount,void 0,{number:!0}]])],4),e("td",{rowspan:t(n).friendPosession?2:1,class:q({"required-bg":t(d)==="required","excluded-bg":t(d)==="excluded"})},[e("div",El,[e("label",zl,[y(e("input",{"onUpdate:modelValue":o[6]||(o[6]=p=>k(d)?d.value=p:null),class:"form-check-input",type:"radio",value:"required"},null,512),[[D,t(d)]]),o[13]||(o[13]=$(" 必須 ",-1))]),e("label",jl,[y(e("input",{"onUpdate:modelValue":o[7]||(o[7]=p=>k(d)?d.value=p:null),class:"form-check-input",type:"radio",value:"optional"},null,512),[[D,t(d)]]),o[14]||(o[14]=$(" 任意 ",-1))]),e("label",Bl,[y(e("input",{"onUpdate:modelValue":o[8]||(o[8]=p=>k(d)?d.value=p:null),class:"form-check-input",type:"radio",value:"excluded"},null,512),[[D,t(d)]]),o[15]||(o[15]=$(" 除外 ",-1))])])],10,Nl),e("td",{rowspan:t(n).friendPosession?2:1,style:{"text-align":"center"}},[u.card.rarity!=="dr"&&u.card.rarity!=="dr2"?y((m(),f("input",{key:0,"onUpdate:modelValue":o[9]||(o[9]=p=>t(n).friendPosession=p),class:"form-check-input",type:"checkbox"},null,512)),[[R,t(n).friendPosession]]):X("",!0)],8,Il),e("td",{rowspan:t(n).friendPosession?2:1},[V(T,{modelValue:t(n).mark,"onUpdate:modelValue":o[10]||(o[10]=p=>t(n).mark=p)},null,8,["modelValue"])],8,Gl)],512),[[ye,u.isVisible]]),y(e("tr",null,[o[16]||(o[16]=e("td",{class:"p-0 position-relative"},[e("div",{class:"friend-row-start"},[e("div",null,"フレンド")])],-1)),e("td",Kl,[y(e("input",{"onUpdate:modelValue":o[11]||(o[11]=p=>t(n).friendLevel=p),class:q([{"not-max":t(n).friendLevel!==t(A)[u.card.rarity]},"form-control"]),type:"number",min:"1",max:t(A)[u.card.rarity]},null,10,Wl),[[z,t(n).friendLevel,void 0,{number:!0}]])]),o[17]||(o[17]=e("td",{class:"friend-row"},null,-1)),e("td",Hl,[y(e("input",{"onUpdate:modelValue":o[12]||(o[12]=p=>t(n).friendCenterSkillLevel=p),class:q([[t(n).friendCenterSkillLevel>10?`level-exceeded-${t(n).friendCenterSkillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[ye,t(n).friendPosession],[z,t(n).friendCenterSkillLevel,void 0,{number:!0}]])]),o[18]||(o[18]=e("td",{class:"p-0 position-relative"},[e("div",{class:"friend-row-end"})],-1))],512),[[ye,u.isVisible&&t(n).friendPosession]])],64)}}}),Xl=Object.assign(Me(Jl,[["__scopeId","data-v-870db6ec"]]),{__name:"MMemberRow"}),Ql={class:"card my-2"},Yl={class:"card-body"},Zl={class:"d-flex gap-2 align-items-center"},et=j({__name:"OCardOperation",setup(_){const i=c("none"),{skillCaches:v}=xe(),L=()=>{v.forEach(o=>{o.value.mark===i.value&&(console.log("setSelectedMarkToRequired",o.value.mark),o.value={...o.value,selected:"required"})})},x=()=>{v.forEach(o=>{o.value.mark===i.value&&(o.value={...o.value,selected:"optional"})})},d=()=>{v.forEach(o=>{o.value.mark===i.value&&(o.value={...o.value,selected:"excluded"})})},n=()=>{confirm("マークをリセットしますか？")&&v.forEach(o=>{o.value={...o.value,mark:"none"}})},r=()=>{v.forEach(o=>{o.value={...o.value,friendPosession:!0}})},u=()=>{v.forEach(o=>{o.value={...o.value,friendPosession:!1}})};return(o,C)=>{const T=Le;return m(),f("div",Ql,[C[3]||(C[3]=e("div",{class:"card-header"}," カード操作 ",-1)),e("div",Yl,[e("div",Zl,[e("div",null,[V(T,{modelValue:t(i),"onUpdate:modelValue":C[0]||(C[0]=p=>k(i)?i.value=p:null),class:""},null,8,["modelValue"])]),C[1]||(C[1]=e("div",null,"をすべて",-1)),e("button",{class:"btn btn-primary",onClick:L},"必須に"),e("button",{class:"btn btn-primary",onClick:x},"任意に"),e("button",{class:"btn btn-primary",onClick:d},"除外に")]),e("div",{class:"mt-2"},[e("button",{class:"btn btn-primary",onClick:n},"マークリセット")]),e("div",{class:"mt-2 d-flex gap-2 align-items-center"},[C[2]||(C[2]=e("div",null,"フレンド所持状況：",-1)),e("button",{class:"btn btn-primary",onClick:r},"すべてON"),e("button",{class:"btn btn-primary",onClick:u},"すべてOFF")])])])}}}),lt=Object.assign(et,{__name:"OCardOperation"}),H=["スコアには楽曲マスタリーレベルとボルテージレベルの補正が乗る。スキルによるスコア獲得にも乗る。","コンボによるAP獲得量ボーナスはスキルにも乗る。","DRとLRは特殊なセンタースキルを持っている。強い。","「ボルテージPt.をXpt獲得／〜〜の時、ボルテージPt.をXpt獲得」みたいなスキルは、1番目のスキルにしか効果量増加が乗らない。","フィーバー中はボルテージ2倍になり獲得スコアも増加。スキルにも補正が乗るのでフィーバー中に発動できると強い。","ボルテージLv.7〜8（280〜449pt）のときに「[悠久の舞踏会] 大沢瑠璃乃」がループできると強い。","「[be proud] 乙宗梢」はスキルLv.12以上にすると手札からなくなるまでの回数が増えるので注意。","スキルLv.14の効果量はスキルLv.10の効果量の約1.5倍。切り捨ての関係でズレることはある。","フリックは実は下でも良い。"],tt={class:"card my-2"},nt={class:"card-body"},ot=j({__name:"OTips",setup(_){const i=Sl("currentTipIndex",()=>Math.floor(Math.random()*H.length)),v=F(()=>H[i.value]),L=()=>{i.value=(i.value+1)%H.length},x=()=>{i.value=(i.value-1+H.length)%H.length};return(d,n)=>(m(),f("div",tt,[n[1]||(n[1]=e("div",{class:"card-header"}," Tips ",-1)),e("div",nt,[e("div",null," （No. "+g(t(i)+1)+"）"+g(t(v)),1),e("button",{type:"button",class:"btn btn-primary",onClick:x}," ＜前 "),n[0]||(n[0]=$("   ",-1)),e("button",{type:"button",class:"btn btn-primary",onClick:L}," 次＞ ")])]))}}),st=Object.assign(ot,{__name:"OTips"}),at={class:"mb-3"},rt={class:"my-2"},it={class:"card my-2"},ut={class:"card-body"},dt={class:"table"},vt={class:"card my-2"},ct={class:"card-body"},pt={class:"table"},mt={key:0,rowspan:"14"},ft={class:"card my-2"},bt={class:"card-body"},kt={class:"table"},yt={class:"card my-2"},gt={class:"card-body"},Ct=j({__name:"MdCardDetails",props:{onClose:{},card:{},displayLevel:{}},setup(_){const i=_,v=F(()=>Array.from({length:14},(n,r)=>Ye(J(i.card,r+1,r+1)))),L=he(new Set([...Ze[i.card.rarity].map(([n])=>n),i.displayLevel])),x=F(()=>Array.from(L).sort((n,r)=>n-r)),d=F(()=>x.value.map(n=>J(i.card,1,1,n)));return(n,r)=>{const u=tl;return m(),ge(u,{"on-close":n.onClose},{default:Ce(()=>[e("h3",at,g(t(E)(n.card)),1),e("div",rt,[e("div",it,[r[6]||(r[6]=e("div",{class:"card-header"}," ステータス ",-1)),e("div",ut,[e("table",dt,[e("thead",null,[e("tr",null,[r[1]||(r[1]=e("th",null,"ステータス",-1)),(m(!0),f(P,null,O(t(x),o=>(m(),f("th",{key:`status-${o}`}," Lv."+g(o),1))),128))])]),e("tbody",null,[e("tr",null,[r[2]||(r[2]=e("td",null,"スマイル",-1)),(m(!0),f(P,null,O(t(d),o=>(m(),f("td",{key:`status-smile-${o.key}`},g(o.smile),1))),128))]),e("tr",null,[r[3]||(r[3]=e("td",null,"ピュア",-1)),(m(!0),f(P,null,O(t(d),o=>(m(),f("td",{key:`status-pure-${o.key}`},g(o.pure),1))),128))]),e("tr",null,[r[4]||(r[4]=e("td",null,"クール",-1)),(m(!0),f(P,null,O(t(d),o=>(m(),f("td",{key:`status-cool-${o.key}`},g(o.cool),1))),128))]),e("tr",null,[r[5]||(r[5]=e("td",null,"メンタル",-1)),(m(!0),f(P,null,O(t(d),o=>(m(),f("td",{key:`status-mental-${o.key}`},g(o.mental),1))),128))])])])])]),e("div",vt,[r[8]||(r[8]=e("div",{class:"card-header"}," センタースキル ",-1)),e("div",ct,[e("table",pt,[r[7]||(r[7]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"発動条件"),e("th",null,"効果")])],-1)),e("tbody",null,[(m(!0),f(P,null,O(t(v),(o,C)=>(m(),f("tr",{key:`center-skill-${C}`},[e("td",null,g(C+1),1),C===0?(m(),f("td",mt,g(t(el)(o.centerSkillCondition)),1)):X("",!0),e("td",null,g(t(Se)(o.centerSkills)),1)]))),128))])])])]),e("div",ft,[r[10]||(r[10]=e("div",{class:"card-header"}," スキル ",-1)),e("div",bt,[e("table",kt,[r[9]||(r[9]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"効果")])],-1)),e("tbody",null,[(m(!0),f(P,null,O(t(v),(o,C)=>(m(),f("tr",{key:`skill-${C}`},[e("td",null,g(C+1),1),e("td",null,g(t(Se)(o.skills)),1)]))),128))])])])]),e("div",yt,[r[11]||(r[11]=e("div",{class:"card-header"}," センター特性 ",-1)),e("div",gt,g(t(ll)(t(v)[0].centerAbilities)),1)]),e("button",{class:"btn btn-primary",onClick:r[0]||(r[0]=o=>n.onClose(null))}," 閉じる ")])]),_:1},8,["on-close"])}}}),Lt=Object.assign(Ct,{__name:"MdCardDetails"}),xt={class:"container-md"},_t={class:"card my-2"},wt={class:"card-body"},$t={class:"table"},St={scope:"col"},Vt={class:"d-flex align-items-end"},Ut={class:""},Mt={class:"input-group"},ht={class:"input-group-prepend"},Pt={class:"input-group-text"},Ft={style:{"min-height":"1.5em"}},Tt={style:{"text-align":"right"}},Ot={class:"d-flex gap-3 justify-content-end"},At={class:"d-flex gap-2"},Dt=["disabled"],qt={class:"card my-2"},Rt={class:"card-body"},Nt={class:"mb-2"},Et={class:"row"},zt={class:"col-auto"},jt={class:"col-auto"},Bt={class:"col-auto"},It={class:"mb-2"},Gt={class:"row"},Kt={class:"col-auto"},Wt={class:"col-auto"},Ht={class:"mb-2"},Jt={class:"row"},Xt={class:"col-auto"},Qt={class:"col-auto"},Yt={class:"mb-2"},Zt={class:"form-check"},en={class:"form-check-label",for:"parallel"},ln={class:"form-check"},tn={class:"form-check"},nn={class:"form-check"},on={class:"form-check"},sn={class:"form-check"},an={class:"form-check"},rn={class:"form-check"},un={key:2},dn={class:"card my-2"},vn={class:"card-body"},cn=["value"],pn={class:"d-flex gap-2 align-items-center"},bn=j({__name:"auto-formation",setup(_){const i=c("finished"),v=c(void 0),L=async()=>{if(v.value)try{await v.value.release(),v.value=void 0}catch{}if("wakeLock"in navigator)try{v.value=await navigator.wakeLock.request("screen")}catch(a){console.error(a)}};G(i,async a=>{if(a==="finished")try{await v.value?.release(),v.value=void 0}catch{}});const x=c(""),d=c(""),n=c(0),r=c(0),u=c("smile"),o=c(50),C=c("perfect"),T=c("current"),p=c("score"),Q=c(!0),Y=c(!0),Z=c(!0),ee=c(!0),le=c(!1),te=c([]),ne=c(!0),oe=c(!0),se=c(!1),ae=Ve("seasonFanLvs",{kaho:1,sayaka:1,rurino:1,ginko:1,kosuzu:1,hime:1,ceras:1,izumi:1,kozue:1,tsuzuri:1,megumi:1}),re=c(""),h=c([...nl]),S=c(Object.fromEntries(h.value.map(a=>[w(a),{level:A[a.rarity]||1,centerSkillLevel:10,skillLevel:10,friendLevel:A[a.rarity]||1,friendCenterSkillLevel:14,selected:"optional",friendPosession:!1}]))),Fe=(a,l)=>{S.value[a]=l},Te=F(()=>h.value.filter(a=>S.value[w(a)]?.selected==="required").length),Oe=F(()=>h.value.filter(a=>S.value[w(a)]?.selected==="excluded").length),Ae=F(()=>h.value.filter(a=>S.value[w(a)]?.selected==="optional").length),W=c([]),ce=c([]),pe=c(0),me=c(1);ve(()=>{me.value=navigator.hardwareConcurrency||4});const M=c(null),De=F(()=>ce.value.reduce((a,l)=>a+l,0)),_e=c(Promise.resolve()),qe=a=>{W.value=Array.from({length:a},()=>new Worker(new URL(""+new URL("calc-worker-parallel-DH9mdsxw.js",import.meta.url).href,import.meta.url),{type:"module"})),W.value.forEach((l,N)=>{l.onmessage=U=>{switch(U.data.message){case"calcScore":_e.value=_e.value.then(async()=>{U.data.data.score>(M.value?.score||0)&&(M.value={score:U.data.data.score,liveGrandPrixPt:U.data.data.liveGrandPrixPt,members:U.data.data.members,centerMember:U.data.data.centerMember,friendMember:U.data.data.friendMember,log:U.data.data.log})});break;case"progress":ce.value[N]=U.data.data.progress;break;case"end":pe.value++,pe.value===W.value.length&&(i.value="finished");break}}})},Re=()=>{const a=Q.value?me.value:1;qe(a),L(),M.value=null,ce.value=Array.from({length:a},()=>0),pe.value=0;const l=al(x.value,n.value),N=h.value.filter(b=>S.value[w(b)]&&S.value[w(b)].selected==="required").map(b=>J(b,S.value[w(b)]?.skillLevel||10,S.value[w(b)]?.centerSkillLevel||10,S.value[w(b)]?.level||1));if(N.length>6){B("必須のメンバーが6人を超えています");return}const U=h.value.filter(b=>!S.value[w(b)]?.selected||S.value[w(b)].selected==="optional").map(b=>J(b,S.value[w(b)]?.skillLevel||10,S.value[w(b)]?.centerSkillLevel||10,S.value[w(b)]?.level||1)),de=le.value?[]:h.value.filter(b=>S.value[w(b)]?.friendPosession).map(b=>J(b,10,S.value[w(b)]?.friendCenterSkillLevel||10,S.value[w(b)]?.friendLevel||1));i.value="running",W.value.forEach((b,be)=>{b.postMessage(JSON.parse(JSON.stringify({requiredMembers:N,optionalMembers:U,friendMembers:de,notes:l,center:d.value,attribute:u.value,masteryLevel:o.value,playStyle:C.value,formationRule:T.value,includingCenterOnly:ne.value,includeFriendOnlyCenter:Y.value,requireVolUpAndScoreUp:Z.value,requireScoreBuff:ee.value,noLog:oe.value,noDamagedFormation:se.value,scoreComparisonRule:p.value,seasonFanLvs:ae.value,singers:te.value,batchNum:a,batchIndex:be})))})},Ne=()=>{W.value.forEach(a=>{a.terminate()}),i.value="finished"},B=a=>{window.alert(a)},{modals:Ee,openModal:ze}=ol(),je=async a=>{await ze(Lt,{card:a,displayLevel:S.value[w(a)]?.level||1})},fe=c(null),Be=()=>{const a=fe.value?.files?.[0];if(a){const l=new FileReader;l.onload=N=>{const U=N.target?.result;h.value=h.value.concat(rl(U))},l.readAsText(a)}},Ie=c(null),we=c(!1),Ge=()=>{h.value=h.value.concat(il),we.value=!0},ie=c("none"),{skillCaches:I}=xe(),ue=F(()=>({spade:Array.from(I.values()).filter(a=>a.value.mark==="spade").length,heart:Array.from(I.values()).filter(a=>a.value.mark==="heart").length,diamond:Array.from(I.values()).filter(a=>a.value.mark==="diamond").length,club:Array.from(I.values()).filter(a=>a.value.mark==="club").length,none:Array.from(I.values()).filter(a=>a.value.mark==="none").length})),Ke=()=>{M.value?.members.forEach(a=>{const l=I.get(w(a));l&&(l.value={...l.value,mark:ie.value})})};return Cl({title:"スクショウ自動編成",meta:[{name:"twitter:title",content:"スクショウ自動編成"},{name:"description",content:"スクショウの編成を自動で計算します"}]}),sl(window,"beforeunload",a=>{if(i.value==="running")return a.preventDefault(),"計算中です"}),(a,l)=>{const N=ul,U=Al,de=wl,b=Pe,be=Xl,We=lt,He=Le,Je=st;return m(),f("div",xt,[l[69]||(l[69]=e("h1",null,"スクショウ自動編成",-1)),l[70]||(l[70]=e("a",{href:"https://note.com/asmape/n/nefd46574f4e3",target:"_blank"},"note",-1)),V(N,{"note-text":t(x),"onUpdate:noteText":l[0]||(l[0]=s=>k(x)?x.value=s:null),center:t(d),"onUpdate:center":l[1]||(l[1]=s=>k(d)?d.value=s:null),offset:t(n),"onUpdate:offset":l[2]||(l[2]=s=>k(n)?n.value=s:null),"combo-offset":t(r),"onUpdate:comboOffset":l[3]||(l[3]=s=>k(r)?r.value=s:null),attribute:t(u),"onUpdate:attribute":l[4]||(l[4]=s=>k(u)?u.value=s:null),"mastery-level":t(o),"onUpdate:masteryLevel":l[5]||(l[5]=s=>k(o)?o.value=s:null),singers:t(te),"onUpdate:singers":l[6]||(l[6]=s=>k(te)?te.value=s:null)},null,8,["note-text","center","offset","combo-offset","attribute","mastery-level","singers"]),V(de,null,{default:Ce(()=>[V(U,{"season-fan-lvs":t(ae),"onUpdate:seasonFanLvs":l[7]||(l[7]=s=>k(ae)?ae.value=s:null)},null,8,["season-fan-lvs"])]),_:1}),e("div",_t,[l[46]||(l[46]=e("div",{class:"card-header"}," メンバー ",-1)),e("div",wt,[e("table",$t,[e("thead",null,[e("tr",null,[e("th",St,[e("div",Vt,[l[32]||(l[32]=e("div",{style:{"margin-right":"8px"}}," カード ",-1)),e("div",Ut,[e("div",Mt,[e("div",ht,[e("div",Pt,[e("div",Ft,[V(b,{icon:["fas","magnifying-glass"]})])])]),y(e("input",{"onUpdate:modelValue":l[8]||(l[8]=s=>k(re)?re.value=s:null),type:"text",class:"form-control"},null,512),[[z,t(re)]])])])])]),l[33]||(l[33]=e("th",{scope:"col"},"AP",-1)),l[34]||(l[34]=e("th",{scope:"col"},"Lv.",-1)),l[35]||(l[35]=e("th",{scope:"col"},"Sk Lv.",-1)),l[36]||(l[36]=e("th",{scope:"col"},"CtSk Lv.",-1)),l[37]||(l[37]=e("th",{scope:"col"},"凸数",-1)),l[38]||(l[38]=e("th",{scope:"col"},"選択",-1)),l[39]||(l[39]=e("th",{scope:"col"},"フレンド",-1)),l[40]||(l[40]=e("th",{scope:"col"},"マーク",-1))])]),e("tbody",null,[V(de,{"fallback-tag":"tr"},{default:Ce(()=>[(m(!0),f(P,null,O(t(h),s=>(m(),ge(be,{isVisible:t(E)(s).toLowerCase().includes(t(re).toLowerCase()),key:t(E)(s),card:s,"open-card-details-modal":je,"onUpdate:skillLevel":ke=>Fe(t(w)(s),ke)},null,8,["isVisible","card","onUpdate:skillLevel"]))),128))]),_:1})])]),e("div",Tt," 必須："+g(t(Te))+" 任意："+g(t(Ae))+" 除外："+g(t(Oe)),1),e("div",Ot,[e("div",null,[l[41]||(l[41]=e("span",{style:{color:"#ddbb00"}},"♥",-1)),$("："+g(t(ue).heart),1)]),e("div",null,[l[42]||(l[42]=e("span",{style:{color:"#6666dd"}},"♦",-1)),$("："+g(t(ue).diamond),1)]),e("div",null,[l[43]||(l[43]=e("span",{style:{color:"#888"}},"♠",-1)),$("："+g(t(ue).spade),1)]),e("div",null,[l[44]||(l[44]=e("span",{style:{color:"#ff88aa"}},"♣",-1)),$("："+g(t(ue).club),1)])]),e("div",At,[e("button",{type:"button",class:"btn btn-primary",onClick:l[9]||(l[9]=s=>t(fe)?.click())}," TSVインポート "),e("button",{type:"button",class:"btn btn-primary",disabled:t(we),onClick:l[10]||(l[10]=s=>Ge())}," 後衛カード追加 ",8,Dt)]),l[45]||(l[45]=e("div",null,[e("a",{href:"https://docs.google.com/spreadsheets/d/13moGCQN2fd9_kxc5g3M9go98Sw6Y8fO25nDxKFoDsDk/edit?gid=1837505339#gid=1837505339",target:"_blank"}," 後衛カード一覧 ")],-1)),e("input",{ref_key:"tsvFileInput",ref:fe,type:"file",class:"d-none",onChange:Be},null,544)])]),V(We),e("div",qt,[l[68]||(l[68]=e("div",{class:"card-header"}," 計算 ",-1)),e("div",Rt,[e("div",Nt,[l[50]||(l[50]=$(" プレイスタイル： ",-1)),e("div",Et,[e("div",zt,[e("label",null,[y(e("input",{"onUpdate:modelValue":l[11]||(l[11]=s=>k(C)?C.value=s:null),class:"form-check-input",type:"radio",value:"perfect"},null,512),[[D,t(C)]]),l[47]||(l[47]=$(" 渾身 ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[12]||(l[12]=s=>B("フルコンを目指すプレイ"))},[V(b,{icon:"circle-info"})])]),e("div",jt,[e("label",null,[y(e("input",{"onUpdate:modelValue":l[13]||(l[13]=s=>k(C)?C.value=s:null),class:"form-check-input",type:"radio",value:"desperate"},null,512),[[D,t(C)]]),l[48]||(l[48]=$(" 背水 ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[14]||(l[14]=s=>B("メンタルが10%以下になるようミスをするプレイ"))},[V(b,{icon:"circle-info"})])]),e("div",Bt,[e("label",null,[y(e("input",{"onUpdate:modelValue":l[15]||(l[15]=s=>k(C)?C.value=s:null),class:"form-check-input",type:"radio",value:"desperate1"},null,512),[[D,t(C)]]),l[49]||(l[49]=$(" 1%背水 ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[16]||(l[16]=s=>B("メンタルが1%以下になるようミスをするプレイ。MISSのみで1%を達成できない編成は計算できません。"))},[V(b,{icon:"circle-info"})])])])]),e("div",It,[l[53]||(l[53]=$(" 編成ルール： ",-1)),e("div",Gt,[e("div",Kt,[e("label",null,[y(e("input",{"onUpdate:modelValue":l[17]||(l[17]=s=>k(T)?T.value=s:null),class:"form-check-input",type:"radio",value:"current"},null,512),[[D,t(T)]]),l[51]||(l[51]=$(" 通常ルール ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[18]||(l[18]=s=>B(`・メンバー1人あたり1種類まで
・カード制限なし`))},[V(b,{icon:"circle-info"})])]),e("div",Wt,[e("label",null,[y(e("input",{"onUpdate:modelValue":l[19]||(l[19]=s=>k(T)?T.value=s:null),class:"form-check-input",type:"radio",value:"new_grand_prix"},null,512),[[D,t(T)]]),l[52]||(l[52]=$(" ライグラルール ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[20]||(l[20]=s=>B(`・メンバー1人あたり2種類まで
・DRは1枚まで`))},[V(b,{icon:"circle-info"})])])])]),e("div",Ht,[l[56]||(l[56]=$(" スコア比較基準： ",-1)),e("div",Jt,[e("div",Xt,[e("label",null,[y(e("input",{"onUpdate:modelValue":l[21]||(l[21]=s=>k(p)?p.value=s:null),class:"form-check-input",type:"radio",value:"score"},null,512),[[D,t(p)]]),l[54]||(l[54]=$(" スコア ",-1))])]),e("div",Qt,[e("label",null,[y(e("input",{"onUpdate:modelValue":l[22]||(l[22]=s=>k(p)?p.value=s:null),class:"form-check-input",type:"radio",value:"grandPrixPt"},null,512),[[D,t(p)]]),l[55]||(l[55]=$(" グランプリpt ",-1))])])])]),e("div",Yt,[l[64]||(l[64]=$(" オプション： ",-1)),e("div",Zt,[y(e("input",{id:"parallel","onUpdate:modelValue":l[23]||(l[23]=s=>k(Q)?Q.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[R,t(Q)]]),e("label",en," マルチスレッド ("+g(t(me))+"スレッド) ",1)]),e("div",ln,[y(e("input",{id:"includingCenterOnly","onUpdate:modelValue":l[24]||(l[24]=s=>k(ne)?ne.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[R,t(ne)]]),l[57]||(l[57]=e("label",{class:"form-check-label",for:"includingCenterOnly"}," センターのメンバーを含まない編成は計算しない ",-1))]),e("div",tn,[y(e("input",{id:"includeFriendOnlyCenter","onUpdate:modelValue":l[25]||(l[25]=s=>k(Y)?Y.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[R,t(Y)]]),l[58]||(l[58]=e("label",{class:"form-check-label",for:"includeFriendOnlyCenter"}," フレンドはセンターのメンバーのみ採用する ",-1))]),e("div",nn,[y(e("input",{id:"requireVolUpAndScoreUp","onUpdate:modelValue":l[26]||(l[26]=s=>k(Z)?Z.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[R,t(Z)]]),l[59]||(l[59]=e("label",{class:"form-check-label",for:"requireVolUpAndScoreUp"}," スキルにボルテージゲインとスコアアップを含まない編成は除外する ",-1))]),e("div",on,[y(e("input",{id:"requireScoreBuff","onUpdate:modelValue":l[27]||(l[27]=s=>k(ee)?ee.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[R,t(ee)]]),l[60]||(l[60]=e("label",{class:"form-check-label",for:"requireScoreBuff"}," スキルにスコア獲得量アップを含まない編成は除外する ",-1))]),e("div",sn,[y(e("input",{id:"noLog","onUpdate:modelValue":l[28]||(l[28]=s=>k(oe)?oe.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[R,t(oe)]]),l[61]||(l[61]=e("label",{class:"form-check-label",for:"noLog"}," ログを出力しない（効果大） ",-1))]),e("div",an,[y(e("input",{id:"noDamagedFormation","onUpdate:modelValue":l[29]||(l[29]=s=>k(se)?se.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[R,t(se)]]),l[62]||(l[62]=e("label",{class:"form-check-label",for:"noDamagedFormation"}," 途中でメンタルが100%未満になった場合計算を打ち切る（渾身選択時以外は自動で無効） ",-1))]),e("div",rn,[y(e("input",{id:"noConsiderFriend","onUpdate:modelValue":l[30]||(l[30]=s=>k(le)?le.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[R,t(le)]]),l[63]||(l[63]=e("label",{class:"form-check-label",for:"noConsiderFriend"}," フレンドなし固定 ",-1))])]),t(i)!=="running"?(m(),f("button",{key:0,type:"button",class:"btn btn-primary",onClick:Re}," 計算 ")):X("",!0),t(i)==="running"?(m(),f("button",{key:1,type:"button",class:"btn btn-primary",onClick:Ne}," 中止 ")):X("",!0),t(M)?(m(),f("div",un,[e("p",{ref_key:"progressView",ref:Ie},g(t(i)==="running"?`計算中... ${t(De).toFixed(3)}%`:"計算完了"),513),e("div",dn,[e("div",vn,[e("p",null,"最高得点: "+g(t(M).score)+" ("+g(t(M).liveGrandPrixPt)+"pt)",1),l[67]||(l[67]=e("p",null,"メンバー:",-1)),e("ul",null,[(m(!0),f(P,null,O(t(M).members,s=>(m(),f("li",{key:t(w)(s),style:K({fontWeight:t(M).centerMember&&t(E)(s)===t(E)(t(M).centerMember)?"bold":"normal"})},g(t(E)(s)),5))),128))]),e("p",null,"フレンド: "+g(t(M).friendMember?t(E)(t(M).friendMember):"なし"),1),e("textarea",{class:"form-control",value:t(M).log,readonly:"",rows:"5"},null,8,cn),e("div",pn,[l[65]||(l[65]=e("div",null,"編成に使用したカードを",-1)),e("div",null,[V(He,{modelValue:t(ie),"onUpdate:modelValue":l[31]||(l[31]=s=>k(ie)?ie.value=s:null),class:""},null,8,["modelValue"])]),l[66]||(l[66]=e("div",null,"にする",-1)),e("button",{class:"btn btn-primary",onClick:Ke},"実行")])])])])):X("",!0)])]),V(Je),(m(!0),f(P,null,O(t(Ee),(s,ke)=>(m(),ge(xl(s.component),Ll({key:`modal-${ke}`,"on-close":s.onClose},{ref_for:!0},s.args),null,16,["on-close"]))),128))])}}});export{bn as default};
