import{m as Je,r as Xe,t as $,u as Se,v as z,o as E,w as xe,d as He,b as J,x as Qe,g as Ye,s as $e,e as Ze,_ as el,a as ll,j as tl,p as nl,y as ol,z as sl,k as al}from"./CCDa55HU.js";import{f as j,z as rl,A as ue,B as il,C as ul,c as f,D as dl,E as vl,G as cl,H as pl,l as y,I as Me,o as m,a as e,F as O,n as P,j as g,t as b,m as t,v as q,q as ml,J as fl,p as A,_ as Ve,K as we,g as T,r as c,L as bl,h as G,d as S,b as w,k as Ue,M as be,x as D,s as X,N,i as ke,w as ye,u as kl,O as yl,P as gl,y as Cl}from"./Nqtfw3I9.js";const _l=Symbol.for("nuxt:client-only"),Ll=j({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(x,{slots:i,attrs:v}){const C=rl(!1);ue(()=>{C.value=!0});const _=dl();return _&&(_._nuxtClientOnly=!0),vl(_l,!0),()=>{if(C.value){const d=i.default?.();return d&&d.length===1?[il(d[0],v)]:d}const u=i.fallback||i.placeholder;if(u)return ul(u);const n=x.fallback||x.placeholder||"",r=x.fallbackTag||x.placeholderTag||"span";return f(r,v,n)}}}),xl="$s";function $l(...x){const i=typeof x[x.length-1]=="string"?x.pop():void 0;typeof x[0]!="string"&&x.unshift(i);const[v,C]=x;if(!v||typeof v!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+v);if(C!==void 0&&typeof C!="function")throw new Error("[nuxt] [useState] init must be a function: "+C);const _=xl+v,u=cl(),n=pl(u.payload.state,_);if(n.value===void 0&&C){const r=C();if(y(r))return u.payload.state[_]=r,r;n.value=r}return n}const Sl={class:"card my-2"},Ml={class:"card-body"},Vl={class:"row"},wl={class:"input-group"},Ul={class:"input-group-prepend"},Fl={class:"input-group-text",style:{width:"74px","justify-content":"center"}},Tl=["onUpdate:modelValue"],hl=j({__name:"OSeasonFanLv",props:{seasonFanLvs:{required:!0},seasonFanLvsModifiers:{}},emits:["update:seasonFanLvs"],setup(x){const i=Me(x,"seasonFanLvs"),v=["kaho","sayaka","rurino","ginko","kosuzu","hime","ceras","izumi"];return(C,_)=>(m(),f("div",Sl,[_[0]||(_[0]=e("div",{class:"card-header"}," Season Fan Lv. ",-1)),e("div",Ml,[e("div",Vl,[(m(),f(O,null,P(v,u=>e("div",{key:u,class:"col-12 col-sm-6 col-md-4 col-lg-3 mb-2"},[e("div",wl,[e("div",Ul,[e("div",Fl,[e("span",null,b(t(Je)[u]),1)])]),g(e("input",{"onUpdate:modelValue":n=>i.value[u]=n,type:"number",class:"form-control",min:"1",max:"10"},null,8,Tl),[[q,i.value[u],void 0,{number:!0}]])])])),64))])])]))}}),Ol=Object.assign(hl,{__name:"OSeasonFanLv"}),Pl=j({__name:"AMarkSelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(x){const i=Me(x,"modelValue");return(v,C)=>g((m(),f("select",{"onUpdate:modelValue":C[0]||(C[0]=_=>i.value=_),class:A(["form-select marker-select",[i.value]])},C[1]||(C[1]=[fl('<option value="none" data-v-4055ea95>-</option><option value="heart" data-v-4055ea95>♥</option><option value="diamond" data-v-4055ea95>♦</option><option value="spade" data-v-4055ea95>♠</option><option value="club" data-v-4055ea95>♣</option>',5)]),2)),[[ml,i.value]])}}),ge=Object.assign(Ve(Pl,[["__scopeId","data-v-4055ea95"]]),{__name:"AMarkSelect"}),Ce=Xe(()=>({skillCaches:we(new Map)})),Al=["max"],Dl={class:"row"},Rl={class:"col form-check-label"},Nl={class:"col form-check-label"},zl={class:"col form-check-label"},El={style:{"text-align":"center"}},ql=j({__name:"MMemberRow",props:{card:{},openCardDetailsModal:{type:Function}},emits:["update:skillLevel"],setup(x,{emit:i}){const v=x,C=i,_=T(()=>$(v.card)),u=c("optional"),n=Se(_,{level:z[v.card.rarity]||1,centerSkillLevel:10,skillLevel:10,friendLevel:z[v.card.rarity]||1,friendCenterSkillLevel:14,lbCount:1,selected:"optional",friendPosession:!1,mark:"none"}),{skillCaches:r}=Ce();return ue(()=>{r.set(_.value,n)}),bl(()=>{r.delete(_.value)}),n.value.level||(n.value.level=z[v.card.rarity]||1),n.value.lbCount||(n.value.lbCount=1),n.value.friendLevel||(n.value.friendLevel=z[v.card.rarity]||1),n.value.friendCenterSkillLevel||(n.value.friendCenterSkillLevel=14),n.value.mark||(n.value.mark="none"),G(u,d=>{n.value.selected!==d&&(n.value.selected=d)}),G(n,d=>{u.value!==d.selected&&(u.value=d.selected)}),G(T(()=>n.value.skillLevel),d=>{d>10&&(n.value.lbCount=Math.max(n.value.lbCount,d-9))}),G(T(()=>n.value.centerSkillLevel),d=>{d>10&&(n.value.lbCount=Math.max(n.value.lbCount,d-9))}),G(n,d=>{C("update:skillLevel",d)}),ue(()=>{u.value=n.value.selected||"optional",C("update:skillLevel",n.value)}),(d,o)=>{const L=Ue,h=ge;return m(),f("tr",null,[e("td",null,[S(b(t(E)(d.card))+" ",1),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:o[0]||(o[0]=p=>d.openCardDetailsModal(d.card))},[w(L,{icon:"circle-info"})])]),e("td",{class:A({"gained-ap":t(xe)(d.card,t(n).level)>0})},b(d.card.ap+t(xe)(d.card,t(n).level)),3),e("td",null,[g(e("input",{"onUpdate:modelValue":o[1]||(o[1]=p=>t(n).level=p),class:A(["form-control",{"not-max":t(n).level!==t(z)[d.card.rarity]}]),type:"number",min:"1",max:t(z)[d.card.rarity],onChange:o[2]||(o[2]=p=>C("update:skillLevel",t(n)))},null,42,Al),[[q,t(n).level,void 0,{number:!0}]]),g(e("input",{"onUpdate:modelValue":o[3]||(o[3]=p=>t(n).friendLevel=p),class:A([[t(n).friendLevel>10?`level-exceeded-${t(n).friendLevel-10}`:""],"form-control mt-2"]),type:"number",min:"1",max:"14"},null,2),[[be,t(n).friendPosession],[q,t(n).friendLevel,void 0,{number:!0}]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":o[4]||(o[4]=p=>t(n).skillLevel=p),class:A([[t(n).skillLevel>10?`level-exceeded-${t(n).skillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[q,t(n).skillLevel,void 0,{number:!0}]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":o[5]||(o[5]=p=>t(n).centerSkillLevel=p),class:A([[t(n).centerSkillLevel>10?`level-exceeded-${t(n).centerSkillLevel-10}`:""],"form-control"]),type:"number",min:"1",max:"14"},null,2),[[q,t(n).centerSkillLevel,void 0,{number:!0}]]),g(e("input",{"onUpdate:modelValue":o[6]||(o[6]=p=>t(n).friendCenterSkillLevel=p),class:A([[t(n).friendCenterSkillLevel>10?`level-exceeded-${t(n).friendCenterSkillLevel-10}`:""],"form-control mt-2"]),type:"number",min:"1",max:"14"},null,2),[[be,t(n).friendPosession],[q,t(n).friendCenterSkillLevel,void 0,{number:!0}]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":o[7]||(o[7]=p=>t(n).lbCount=p),class:A(["form-control",[t(n).lbCount>1?`level-exceeded-${t(n).lbCount-1}`:""]]),type:"number",min:"1",max:"5"},null,2),[[q,t(n).lbCount,void 0,{number:!0}]])]),e("td",{class:A({"required-bg":t(u)==="required","excluded-bg":t(u)==="excluded"})},[e("div",Dl,[e("label",Rl,[g(e("input",{"onUpdate:modelValue":o[8]||(o[8]=p=>y(u)?u.value=p:null),class:"form-check-input",type:"radio",value:"required"},null,512),[[D,t(u)]]),o[13]||(o[13]=S(" 必須 ",-1))]),e("label",Nl,[g(e("input",{"onUpdate:modelValue":o[9]||(o[9]=p=>y(u)?u.value=p:null),class:"form-check-input",type:"radio",value:"optional"},null,512),[[D,t(u)]]),o[14]||(o[14]=S(" 任意 ",-1))]),e("label",zl,[g(e("input",{"onUpdate:modelValue":o[10]||(o[10]=p=>y(u)?u.value=p:null),class:"form-check-input",type:"radio",value:"excluded"},null,512),[[D,t(u)]]),o[15]||(o[15]=S(" 除外 ",-1))])])],2),e("td",El,[d.card.rarity!=="dr"&&d.card.rarity!=="dr2"?g((m(),f("input",{key:0,"onUpdate:modelValue":o[11]||(o[11]=p=>t(n).friendPosession=p),class:"form-check-input",type:"checkbox"},null,512)),[[N,t(n).friendPosession]]):X("",!0)]),e("td",null,[w(h,{modelValue:t(n).mark,"onUpdate:modelValue":o[12]||(o[12]=p=>t(n).mark=p)},null,8,["modelValue"])])])}}}),jl=Object.assign(Ve(ql,[["__scopeId","data-v-fbe610c8"]]),{__name:"MMemberRow"}),Il={class:"card my-2"},Gl={class:"card-body"},Bl={class:"d-flex gap-2 align-items-center"},Kl=j({__name:"OCardOperation",setup(x){const i=c("none"),{skillCaches:v}=Ce(),C=()=>{v.forEach(o=>{o.value.mark===i.value&&(console.log("setSelectedMarkToRequired",o.value.mark),o.value={...o.value,selected:"required"})})},_=()=>{v.forEach(o=>{o.value.mark===i.value&&(o.value={...o.value,selected:"optional"})})},u=()=>{v.forEach(o=>{o.value.mark===i.value&&(o.value={...o.value,selected:"excluded"})})},n=()=>{confirm("マークをリセットしますか？")&&v.forEach(o=>{o.value={...o.value,mark:"none"}})},r=()=>{v.forEach(o=>{o.value={...o.value,friendPosession:!0}})},d=()=>{v.forEach(o=>{o.value={...o.value,friendPosession:!1}})};return(o,L)=>{const h=ge;return m(),f("div",Il,[L[3]||(L[3]=e("div",{class:"card-header"}," カード操作 ",-1)),e("div",Gl,[e("div",Bl,[e("div",null,[w(h,{modelValue:t(i),"onUpdate:modelValue":L[0]||(L[0]=p=>y(i)?i.value=p:null),class:""},null,8,["modelValue"])]),L[1]||(L[1]=e("div",null,"をすべて",-1)),e("button",{class:"btn btn-primary",onClick:C},"必須に"),e("button",{class:"btn btn-primary",onClick:_},"任意に"),e("button",{class:"btn btn-primary",onClick:u},"除外に")]),e("div",{class:"mt-2"},[e("button",{class:"btn btn-primary",onClick:n},"マークリセット")]),e("div",{class:"mt-2 d-flex gap-2 align-items-center"},[L[2]||(L[2]=e("div",null,"フレンド所持状況：",-1)),e("button",{class:"btn btn-primary",onClick:r},"すべてON"),e("button",{class:"btn btn-primary",onClick:d},"すべてOFF")])])])}}}),Wl=Object.assign(Kl,{__name:"OCardOperation"}),W=["スコアには楽曲マスタリーレベルとボルテージレベルの補正が乗る。スキルによるスコア獲得にも乗る。","コンボによるAP獲得量ボーナスはスキルにも乗る。","DRとLRは特殊なセンタースキルを持っている。強い。","「ボルテージPt.をXpt獲得／〜〜の時、ボルテージPt.をXpt獲得」みたいなスキルは、1番目のスキルにしか効果量増加が乗らない。","フィーバー中はボルテージ2倍になり獲得スコアも増加。スキルにも補正が乗るのでフィーバー中に発動できると強い。","ボルテージLv.7〜8（280〜449pt）のときに「[悠久の舞踏会] 大沢瑠璃乃」がループできると強い。","「[be proud] 乙宗梢」はスキルLv.12以上にすると手札からなくなるまでの回数が増えるので注意。","スキルLv.14の効果量はスキルLv.10の効果量の約1.5倍。切り捨ての関係でズレることはある。","フリックは実は下でも良い。"],Jl={class:"card my-2"},Xl={class:"card-body"},Hl=j({__name:"OTips",setup(x){const i=$l("currentTipIndex",()=>Math.floor(Math.random()*W.length)),v=T(()=>W[i.value]),C=()=>{i.value=(i.value+1)%W.length},_=()=>{i.value=(i.value-1+W.length)%W.length};return(u,n)=>(m(),f("div",Jl,[n[1]||(n[1]=e("div",{class:"card-header"}," Tips ",-1)),e("div",Xl,[e("div",null," （No. "+b(t(i)+1)+"）"+b(t(v)),1),e("button",{type:"button",class:"btn btn-primary",onClick:_}," ＜前 "),n[0]||(n[0]=S("   ",-1)),e("button",{type:"button",class:"btn btn-primary",onClick:C}," 次＞ ")])]))}}),Ql=Object.assign(Hl,{__name:"OTips"}),Yl={class:"mb-3"},Zl={class:"my-2"},et={class:"card my-2"},lt={class:"card-body"},tt={class:"table"},nt={class:"card my-2"},ot={class:"card-body"},st={class:"table"},at={key:0,rowspan:"14"},rt={class:"card my-2"},it={class:"card-body"},ut={class:"table"},dt={class:"card my-2"},vt={class:"card-body"},ct=j({__name:"MdCardDetails",props:{onClose:{},card:{},displayLevel:{}},setup(x){const i=x,v=T(()=>Array.from({length:14},(n,r)=>He(J(i.card,r+1,r+1)))),C=we(new Set([...Qe[i.card.rarity].map(([n])=>n),i.displayLevel])),_=T(()=>Array.from(C).sort((n,r)=>n-r)),u=T(()=>_.value.map(n=>J(i.card,1,1,n)));return(n,r)=>{const d=el;return m(),ke(d,{"on-close":n.onClose},{default:ye(()=>[e("h3",Yl,b(t(E)(n.card)),1),e("div",Zl,[e("div",et,[r[6]||(r[6]=e("div",{class:"card-header"}," ステータス ",-1)),e("div",lt,[e("table",tt,[e("thead",null,[e("tr",null,[r[1]||(r[1]=e("th",null,"ステータス",-1)),(m(!0),f(O,null,P(t(_),o=>(m(),f("th",{key:`status-${o}`}," Lv."+b(o),1))),128))])]),e("tbody",null,[e("tr",null,[r[2]||(r[2]=e("td",null,"スマイル",-1)),(m(!0),f(O,null,P(t(u),o=>(m(),f("td",{key:`status-smile-${o.key}`},b(o.smile),1))),128))]),e("tr",null,[r[3]||(r[3]=e("td",null,"ピュア",-1)),(m(!0),f(O,null,P(t(u),o=>(m(),f("td",{key:`status-pure-${o.key}`},b(o.pure),1))),128))]),e("tr",null,[r[4]||(r[4]=e("td",null,"クール",-1)),(m(!0),f(O,null,P(t(u),o=>(m(),f("td",{key:`status-cool-${o.key}`},b(o.cool),1))),128))]),e("tr",null,[r[5]||(r[5]=e("td",null,"メンタル",-1)),(m(!0),f(O,null,P(t(u),o=>(m(),f("td",{key:`status-mental-${o.key}`},b(o.mental),1))),128))])])])])]),e("div",nt,[r[8]||(r[8]=e("div",{class:"card-header"}," センタースキル ",-1)),e("div",ot,[e("table",st,[r[7]||(r[7]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"発動条件"),e("th",null,"効果")])],-1)),e("tbody",null,[(m(!0),f(O,null,P(t(v),(o,L)=>(m(),f("tr",{key:`center-skill-${L}`},[e("td",null,b(L+1),1),L===0?(m(),f("td",at,b(t(Ye)(o.centerSkillCondition)),1)):X("",!0),e("td",null,b(t($e)(o.centerSkills)),1)]))),128))])])])]),e("div",rt,[r[10]||(r[10]=e("div",{class:"card-header"}," スキル ",-1)),e("div",it,[e("table",ut,[r[9]||(r[9]=e("thead",null,[e("tr",null,[e("th",null,"スキルLv."),e("th",null,"効果")])],-1)),e("tbody",null,[(m(!0),f(O,null,P(t(v),(o,L)=>(m(),f("tr",{key:`skill-${L}`},[e("td",null,b(L+1),1),e("td",null,b(t($e)(o.skills)),1)]))),128))])])])]),e("div",dt,[r[11]||(r[11]=e("div",{class:"card-header"}," センター特性 ",-1)),e("div",vt,b(t(Ze)(t(v)[0].centerAbilities)),1)]),e("button",{class:"btn btn-primary",onClick:r[0]||(r[0]=o=>n.onClose(null))}," 閉じる ")])]),_:1},8,["on-close"])}}}),pt=Object.assign(ct,{__name:"MdCardDetails"}),mt={class:"container-md"},ft={class:"card my-2"},bt={class:"card-body"},kt={class:"table"},yt={scope:"col"},gt={class:"d-flex align-items-end"},Ct={class:""},_t={class:"input-group"},Lt={class:"input-group-prepend"},xt={class:"input-group-text"},$t={style:{"min-height":"1.5em"}},St={style:{"text-align":"right"}},Mt={class:"d-flex gap-3 justify-content-end"},Vt={class:"d-flex gap-2"},wt=["disabled"],Ut={class:"card my-2"},Ft={class:"card-body"},Tt={class:"mb-2"},ht={class:"row"},Ot={class:"col-auto"},Pt={class:"col-auto"},At={class:"mb-2"},Dt={class:"row"},Rt={class:"col-auto"},Nt={class:"col-auto"},zt={class:"mb-2"},Et={class:"row"},qt={class:"col-auto"},jt={class:"col-auto"},It={class:"mb-2"},Gt={class:"form-check"},Bt={class:"form-check-label",for:"parallel"},Kt={class:"form-check"},Wt={class:"form-check"},Jt={class:"form-check"},Xt={class:"form-check"},Ht={class:"form-check"},Qt={class:"form-check"},Yt={key:2},Zt={class:"card my-2"},en={class:"card-body"},ln=["value"],tn={class:"d-flex gap-2 align-items-center"},sn=j({__name:"auto-formation",setup(x){const i=c("finished"),v=c(void 0),C=async()=>{if(v.value)try{await v.value.release(),v.value=void 0}catch{}if("wakeLock"in navigator)try{v.value=await navigator.wakeLock.request("screen")}catch(a){console.error(a)}};G(i,async a=>{if(a==="finished")try{await v.value?.release(),v.value=void 0}catch{}});const _=c(""),u=c(""),n=c(0),r=c(0),d=c("smile"),o=c(50),L=c("perfect"),h=c("current"),p=c("score"),H=c(!0),Q=c(!0),Y=c(!1),Z=c([]),ee=Se("seasonFanLvs",{kaho:1,sayaka:1,rurino:1,ginko:1,kosuzu:1,hime:1,ceras:1,izumi:1,kozue:1,tsuzuri:1,megumi:1}),le=c(""),te=c(!0),ne=c(!0),oe=c(!1),se=c(!1),F=c([...ll]),M=c(Object.fromEntries(F.value.map(a=>[$(a),{level:z[a.rarity]||1,centerSkillLevel:10,skillLevel:10,friendLevel:z[a.rarity]||1,friendCenterSkillLevel:14,selected:"optional",friendPosession:!1}]))),Fe=(a,l)=>{M.value[a]=l},Te=T(()=>F.value.filter(a=>M.value[$(a)]?.selected==="required").length),he=T(()=>F.value.filter(a=>M.value[$(a)]?.selected==="excluded").length),Oe=T(()=>F.value.filter(a=>M.value[$(a)]?.selected==="optional").length),B=c([]),de=c([]),ve=c(0),ce=c(1);ue(()=>{ce.value=navigator.hardwareConcurrency||4});const U=c(null),Pe=T(()=>de.value.reduce((a,l)=>a+l,0)),_e=c(Promise.resolve()),Ae=a=>{B.value=Array.from({length:a},()=>new Worker(new URL(""+new URL("calc-worker-parallel-CzxQMXCU.js",import.meta.url).href,import.meta.url),{type:"module"})),B.value.forEach((l,R)=>{l.onmessage=V=>{switch(V.data.message){case"calcScore":_e.value=_e.value.then(async()=>{V.data.data.score>(U.value?.score||0)&&(U.value={score:V.data.data.score,liveGrandPrixPt:V.data.data.liveGrandPrixPt,members:V.data.data.members,centerMember:V.data.data.centerMember,friendMember:V.data.data.friendMember,log:V.data.data.log})});break;case"progress":de.value[R]=V.data.data.progress;break;case"end":ve.value++,ve.value===B.value.length&&(i.value="finished");break}}})},De=()=>{const a=H.value?ce.value:1;Ae(a),C(),U.value=null,de.value=Array.from({length:a},()=>0),ve.value=0;const l=nl(_.value,n.value),R=F.value.filter(k=>M.value[$(k)]&&M.value[$(k)].selected==="required").map(k=>J(k,M.value[$(k)]?.skillLevel||10,M.value[$(k)]?.centerSkillLevel||10,M.value[$(k)]?.level||1));if(R.length>6){K("必須のメンバーが6人を超えています");return}const V=F.value.filter(k=>!M.value[$(k)]?.selected||M.value[$(k)].selected==="optional").map(k=>J(k,M.value[$(k)]?.skillLevel||10,M.value[$(k)]?.centerSkillLevel||10,M.value[$(k)]?.level||1)),ie=Y.value?[]:F.value.filter(k=>M.value[$(k)]?.friendPosession).map(k=>J(k,10,M.value[$(k)]?.friendCenterSkillLevel||10,M.value[$(k)]?.friendLevel||1));i.value="running",B.value.forEach((k,me)=>{k.postMessage(JSON.parse(JSON.stringify({requiredMembers:R,optionalMembers:V,friendMembers:ie,notes:l,center:u.value,attribute:d.value,masteryLevel:o.value,playStyle:L.value,formationRule:h.value,includingCenterOnly:te.value,includeFriendOnlyCenter:Q.value,noLog:ne.value,noDamagedFormation:oe.value,noCuredFormation:se.value,scoreComparisonRule:p.value,seasonFanLvs:ee.value,singers:Z.value,batchNum:a,batchIndex:me})))})},Re=()=>{B.value.forEach(a=>{a.terminate()}),i.value="finished"},K=a=>{window.alert(a)},{modals:Ne,openModal:ze}=tl(),Ee=async a=>{await ze(pt,{card:a,displayLevel:M.value[$(a)]?.level||1})},pe=c(null),qe=()=>{const a=pe.value?.files?.[0];if(a){const l=new FileReader;l.onload=R=>{const V=R.target?.result;F.value=F.value.concat(ol(V))},l.readAsText(a)}},je=c(null),Le=c(!1),Ie=()=>{F.value=F.value.concat(sl),Le.value=!0},ae=c("none"),{skillCaches:I}=Ce(),re=T(()=>({spade:Array.from(I.values()).filter(a=>a.value.mark==="spade").length,heart:Array.from(I.values()).filter(a=>a.value.mark==="heart").length,diamond:Array.from(I.values()).filter(a=>a.value.mark==="diamond").length,club:Array.from(I.values()).filter(a=>a.value.mark==="club").length,none:Array.from(I.values()).filter(a=>a.value.mark==="none").length})),Ge=()=>{U.value?.members.forEach(a=>{const l=I.get($(a));l&&(l.value={...l.value,mark:ae.value})})};return kl({title:"スクショウ自動編成",meta:[{name:"twitter:title",content:"スクショウ自動編成"},{name:"description",content:"スクショウの編成を自動で計算します"}]}),(a,l)=>{const R=al,V=Ol,ie=Ll,k=Ue,me=jl,Be=Wl,Ke=ge,We=Ql;return m(),f("div",mt,[l[64]||(l[64]=e("h1",null,"スクショウ自動編成",-1)),l[65]||(l[65]=e("a",{href:"https://note.com/asmape/n/nefd46574f4e3",target:"_blank"},"note",-1)),w(R,{"note-text":t(_),"onUpdate:noteText":l[0]||(l[0]=s=>y(_)?_.value=s:null),center:t(u),"onUpdate:center":l[1]||(l[1]=s=>y(u)?u.value=s:null),offset:t(n),"onUpdate:offset":l[2]||(l[2]=s=>y(n)?n.value=s:null),"combo-offset":t(r),"onUpdate:comboOffset":l[3]||(l[3]=s=>y(r)?r.value=s:null),attribute:t(d),"onUpdate:attribute":l[4]||(l[4]=s=>y(d)?d.value=s:null),"mastery-level":t(o),"onUpdate:masteryLevel":l[5]||(l[5]=s=>y(o)?o.value=s:null),singers:t(Z),"onUpdate:singers":l[6]||(l[6]=s=>y(Z)?Z.value=s:null)},null,8,["note-text","center","offset","combo-offset","attribute","mastery-level","singers"]),w(ie,null,{default:ye(()=>[w(V,{"season-fan-lvs":t(ee),"onUpdate:seasonFanLvs":l[7]||(l[7]=s=>y(ee)?ee.value=s:null)},null,8,["season-fan-lvs"])]),_:1}),e("div",ft,[l[43]||(l[43]=e("div",{class:"card-header"}," メンバー ",-1)),e("div",bt,[e("table",kt,[e("thead",null,[e("tr",null,[e("th",yt,[e("div",gt,[l[29]||(l[29]=e("div",{style:{"margin-right":"8px"}}," カード ",-1)),e("div",Ct,[e("div",_t,[e("div",Lt,[e("div",xt,[e("div",$t,[w(k,{icon:["fas","magnifying-glass"]})])])]),g(e("input",{"onUpdate:modelValue":l[8]||(l[8]=s=>y(le)?le.value=s:null),type:"text",class:"form-control"},null,512),[[q,t(le)]])])])])]),l[30]||(l[30]=e("th",{scope:"col"},"AP",-1)),l[31]||(l[31]=e("th",{scope:"col"},"Lv.",-1)),l[32]||(l[32]=e("th",{scope:"col"},"Sk Lv.",-1)),l[33]||(l[33]=e("th",{scope:"col"},"CtSk Lv.",-1)),l[34]||(l[34]=e("th",{scope:"col"},"凸数",-1)),l[35]||(l[35]=e("th",{scope:"col"},"選択",-1)),l[36]||(l[36]=e("th",{scope:"col"},"フレンド",-1)),l[37]||(l[37]=e("th",{scope:"col"},"マーク",-1))])]),e("tbody",null,[w(ie,{"fallback-tag":"tr"},{default:ye(()=>[(m(!0),f(O,null,P(t(F),s=>g((m(),ke(me,{key:t(E)(s),card:s,"open-card-details-modal":Ee,"onUpdate:skillLevel":fe=>Fe(t($)(s),fe)},null,8,["card","onUpdate:skillLevel"])),[[be,t(E)(s).toLowerCase().includes(t(le).toLowerCase())]])),128))]),_:1})])]),e("div",St," 必須："+b(t(Te))+" 任意："+b(t(Oe))+" 除外："+b(t(he)),1),e("div",Mt,[e("div",null,[l[38]||(l[38]=e("span",{style:{color:"#ddbb00"}},"♥",-1)),S("："+b(t(re).heart),1)]),e("div",null,[l[39]||(l[39]=e("span",{style:{color:"#6666dd"}},"♦",-1)),S("："+b(t(re).diamond),1)]),e("div",null,[l[40]||(l[40]=e("span",{style:{color:"#888"}},"♠",-1)),S("："+b(t(re).spade),1)]),e("div",null,[l[41]||(l[41]=e("span",{style:{color:"#ff88aa"}},"♣",-1)),S("："+b(t(re).club),1)])]),e("div",Vt,[e("button",{type:"button",class:"btn btn-primary",onClick:l[9]||(l[9]=s=>t(pe)?.click())}," TSVインポート "),e("button",{type:"button",class:"btn btn-primary",disabled:t(Le),onClick:l[10]||(l[10]=s=>Ie())}," 後衛カード追加 ",8,wt)]),l[42]||(l[42]=e("div",null,[e("a",{href:"https://docs.google.com/spreadsheets/d/13moGCQN2fd9_kxc5g3M9go98Sw6Y8fO25nDxKFoDsDk/edit?gid=1837505339#gid=1837505339",target:"_blank"}," 後衛カード一覧 ")],-1)),e("input",{ref_key:"tsvFileInput",ref:pe,type:"file",class:"d-none",onChange:qe},null,544)])]),w(Be),e("div",Ut,[l[63]||(l[63]=e("div",{class:"card-header"}," 計算 ",-1)),e("div",Ft,[e("div",Tt,[l[46]||(l[46]=S(" プレイスタイル： ",-1)),e("div",ht,[e("div",Ot,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[11]||(l[11]=s=>y(L)?L.value=s:null),class:"form-check-input",type:"radio",value:"perfect"},null,512),[[D,t(L)]]),l[44]||(l[44]=S(" 渾身 ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[12]||(l[12]=s=>K("フルコンを目指すプレイ"))},[w(k,{icon:"circle-info"})])]),e("div",Pt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[13]||(l[13]=s=>y(L)?L.value=s:null),class:"form-check-input",type:"radio",value:"desperate"},null,512),[[D,t(L)]]),l[45]||(l[45]=S(" 背水 ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[14]||(l[14]=s=>K("メンタルが10%以下になるようミスをするプレイ"))},[w(k,{icon:"circle-info"})])])])]),e("div",At,[l[49]||(l[49]=S(" 編成ルール： ",-1)),e("div",Dt,[e("div",Rt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[15]||(l[15]=s=>y(h)?h.value=s:null),class:"form-check-input",type:"radio",value:"current"},null,512),[[D,t(h)]]),l[47]||(l[47]=S(" 通常ルール ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[16]||(l[16]=s=>K(`・メンバー1人あたり1種類まで
・カード制限なし`))},[w(k,{icon:"circle-info"})])]),e("div",Nt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[17]||(l[17]=s=>y(h)?h.value=s:null),class:"form-check-input",type:"radio",value:"new_grand_prix"},null,512),[[D,t(h)]]),l[48]||(l[48]=S(" ライグラルール ",-1))]),e("a",{style:{"vertical-align":"super","font-size":"0.8em"},onClick:l[18]||(l[18]=s=>K(`・メンバー1人あたり2種類まで
・DRは1枚まで`))},[w(k,{icon:"circle-info"})])])])]),e("div",zt,[l[52]||(l[52]=S(" スコア比較基準： ",-1)),e("div",Et,[e("div",qt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[19]||(l[19]=s=>y(p)?p.value=s:null),class:"form-check-input",type:"radio",value:"score"},null,512),[[D,t(p)]]),l[50]||(l[50]=S(" スコア ",-1))])]),e("div",jt,[e("label",null,[g(e("input",{"onUpdate:modelValue":l[20]||(l[20]=s=>y(p)?p.value=s:null),class:"form-check-input",type:"radio",value:"grandPrixPt"},null,512),[[D,t(p)]]),l[51]||(l[51]=S(" グランプリpt ",-1))])])])]),e("div",It,[l[59]||(l[59]=S(" オプション： ",-1)),e("div",Gt,[g(e("input",{id:"parallel","onUpdate:modelValue":l[21]||(l[21]=s=>y(H)?H.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(H)]]),e("label",Bt," マルチスレッド ("+b(t(ce))+"スレッド) ",1)]),e("div",Kt,[g(e("input",{id:"includingCenterOnly","onUpdate:modelValue":l[22]||(l[22]=s=>y(te)?te.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(te)]]),l[53]||(l[53]=e("label",{class:"form-check-label",for:"includingCenterOnly"}," センターのメンバーを含まない編成は計算しない ",-1))]),e("div",Wt,[g(e("input",{id:"includeFriendOnlyCenter","onUpdate:modelValue":l[23]||(l[23]=s=>y(Q)?Q.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(Q)]]),l[54]||(l[54]=e("label",{class:"form-check-label",for:"includeFriendOnlyCenter"}," フレンドはセンターのメンバーのみ採用する ",-1))]),e("div",Jt,[g(e("input",{id:"noLog","onUpdate:modelValue":l[24]||(l[24]=s=>y(ne)?ne.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(ne)]]),l[55]||(l[55]=e("label",{class:"form-check-label",for:"noLog"}," ログを出力しない（効果大） ",-1))]),e("div",Xt,[g(e("input",{id:"noDamagedFormation","onUpdate:modelValue":l[25]||(l[25]=s=>y(oe)?oe.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(oe)]]),l[56]||(l[56]=e("label",{class:"form-check-label",for:"noDamagedFormation"}," 途中でメンタルが100%未満になった場合計算を打ち切る（渾身選択時以外は自動で無効） ",-1))]),e("div",Ht,[g(e("input",{id:"noCuredFormation","onUpdate:modelValue":l[26]||(l[26]=s=>y(se)?se.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(se)]]),l[57]||(l[57]=e("label",{class:"form-check-label",for:"noCuredFormation"}," 途中でメンタルが10%超になった場合計算を打ち切る（背水選択時以外は自動で無効） ",-1))]),e("div",Qt,[g(e("input",{id:"noConsiderFriend","onUpdate:modelValue":l[27]||(l[27]=s=>y(Y)?Y.value=s:null),class:"form-check-input",type:"checkbox"},null,512),[[N,t(Y)]]),l[58]||(l[58]=e("label",{class:"form-check-label",for:"noConsiderFriend"}," フレンドなし固定 ",-1))])]),t(i)!=="running"?(m(),f("button",{key:0,type:"button",class:"btn btn-primary",onClick:De}," 計算 ")):X("",!0),t(i)==="running"?(m(),f("button",{key:1,type:"button",class:"btn btn-primary",onClick:Re}," 中止 ")):X("",!0),t(U)?(m(),f("div",Yt,[e("p",{ref_key:"progressView",ref:je},b(t(i)==="running"?`計算中... ${t(Pe).toFixed(2)}%`:"計算完了"),513),e("div",Zt,[e("div",en,[e("p",null,"最高得点: "+b(t(U).score)+" ("+b(t(U).liveGrandPrixPt)+"pt)",1),l[62]||(l[62]=e("p",null,"メンバー:",-1)),e("ul",null,[(m(!0),f(O,null,P(t(U).members,s=>(m(),f("li",{key:t($)(s),style:yl({fontWeight:t(U).centerMember&&t(E)(s)===t(E)(t(U).centerMember)?"bold":"normal"})},b(t(E)(s)),5))),128))]),e("p",null,"フレンド: "+b(t(U).friendMember?t(E)(t(U).friendMember):"なし"),1),e("textarea",{class:"form-control",value:t(U).log,readonly:"",rows:"5"},null,8,ln),e("div",tn,[l[60]||(l[60]=e("div",null,"編成に使用したカードを",-1)),e("div",null,[w(Ke,{modelValue:t(ae),"onUpdate:modelValue":l[28]||(l[28]=s=>y(ae)?ae.value=s:null),class:""},null,8,["modelValue"])]),l[61]||(l[61]=e("div",null,"にする",-1)),e("button",{class:"btn btn-primary",onClick:Ge},"実行")])])])])):X("",!0)])]),w(We),(m(!0),f(O,null,P(t(Ne),(s,fe)=>(m(),ke(Cl(s.component),gl({key:`modal-${fe}`,"on-close":s.onClose},{ref_for:!0},s.args),null,16,["on-close"]))),128))])}}});export{sn as default};
